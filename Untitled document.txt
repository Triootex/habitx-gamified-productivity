Build a complete Flutter app that combines the best features of Habitica and Life Up. The app should be a gamified habit tracker and productivity tool where users turn their real-life tasks into an RPG adventure. Use Flutter for cross-platform compatibility (Android and iOS), with a clean, modern UI inspired by pixel-art RPG styles but with smooth animations. Integrate Firebase for authentication, real-time database, and cloud storage to handle user data syncing across devices.


### Core App Structure:


- Splash Screen: A loading screen with the app logo (a stylized sword or habit icon) and progress indicator.


- Onboarding: For new users, a tutorial carousel explaining the gamification concept (e.g., "Complete habits to level up your avatar!").


- Authentication: Email/password signup/login, plus Google/Apple sign-in options. Store user profiles in Firebase.


- Main Dashboard: Tab-based navigation (e.g., BottomNavigationBar) with tabs for:


- Habits/Dailies/To-Dos


- Character/Stats


- Rewards/Shop


- Achievements/Journal


- Social/Community (optional leaderboard)


### Key Features:


1. Task Management (like Habitica's Habits, Dailies, To-Dos):


- Users can create:


- Habits: Positive/negative repeatable actions (e.g., "Exercise" gains XP, "Eat junk food" loses health).


- Dailies: Daily recurring tasks with streaks (e.g., "Brush teeth" ? miss it and take damage).


- To-Dos: One-time tasks with due dates.


- Each task has: Title, notes, difficulty level (easy/medium/hard affecting rewards), tags, reminders (use local notifications via flutter_local_notifications).


- Check off tasks to earn XP, gold, and mana. Use a ListView or GridView for display, with checkboxes and progress indicators.


- Streaks and reminders: Auto-reset dailies at midnight, notify users via push notifications.


2. Gamification System (like Life Up's RPG elements):


- Avatar/Character: Customizable character (gender, hair, skin, etc.) using SVG or PNG assets. Level up based on XP.


- Stats: Health (HP), Experience (XP), Mana (MP), Gold. HP decreases on missed tasks; reach 0 and "die" (reset some progress but keep levels).


- Leveling: Gain levels to unlock skills/perks (e.g., bonus XP multipliers).


- Classes/System: Users choose a class (Warrior, Mage, etc.) after level 10, each with unique abilities (e.g., Warrior has extra HP).


3. Rewards and Shop (like Habitica's Tavern/Shop):


- Earn gold from tasks to buy custom rewards (e.g., "Watch TV" costs 20 gold).


- In-app shop for avatar customizations, potions (restore HP), or gear that boosts stats.


- Use a virtual currency system stored in Firebase.


4. Achievements and Journal (like Life Up's Achievements):


- Badges for milestones (e.g., "100 tasks completed").


- Daily journal for reflections, with mood tracking (emojis or sliders).


- Progress charts: Use charts_flutter or fl_chart to show weekly/monthly stats (tasks completed, level progress).


5. Social Features:


- Optional: Party system where users join groups to quest together (shared tasks).


- Leaderboards: Global or friends-based, showing top levels/gold.


- Share progress via social media integration (share_plus package).


6. Settings and Extras:


- Theme toggle (light/dark mode).


- Backup/restore data via Firebase.


- Offline support: Use Hive or SQflite for local storage, sync when online.


- Accessibility: High contrast, voice-over support.


### Technical Requirements:


- Packages: Use provider or riverpod for state management, firebase_core, firebase_auth, cloud_firestore, firebase_storage, http for any APIs, intl for date formatting, flutter_local_notifications for reminders, fl_chart for visualizations.


- UI Design: Material Design 3 with custom themes. Use Hero animations for transitions. Include haptic feedback on task completion.


- Backend: All user data in Firestore (e.g., collections for users, tasks, stats). Handle real-time updates with StreamBuilders.


- Error Handling: Graceful offline mode, loading spinners, error dialogs.


- Testing: Include basic unit tests for core logic (e.g., XP calculation).


- Performance: Optimize for smooth scrolling and low battery usage.


Generate the full Flutter project structure, including pubspec.yaml, main.dart, and all necessary screens/widgets. Provide code that's ready to run with 'flutter run', assuming Firebase setup instructions are followed. Make it extensible for future features like quests or pets.Below is an ultra-detailed prompt for building a Flutter app named "HabitQuest," a gamified habit tracker and productivity RPG that combines the best elements of Habitica (task-driven quests, social parties, avatar progression) and Life Up (attribute-based growth, self-rewards, achievement tracking). The app transforms daily tasks into an epic adventure, designed to be psychologically addictive through dopamine-driven mechanics, social proof, scarcity, urgency, and personalization. This prompt exhaustively details what features to include, why they?re included (psychological and functional rationale), when they trigger, how they?re implemented, mechanics behind each feature, and logic for their operation. The app uses Flutter for cross-platform Android/iOS development, Firebase for authentication (Google and email only) and data storage, AdMob for four ad types, and Google Play Billing for premium subscriptions. All assets are free, non-copyrighted, and sourced from open repositories like OpenGameArt.org. The goal is a production-ready, extensible codebase that hooks users instantly, drives retention, and maximizes monetization through irresistible design.


---


### Prompt for AI App Builder: Build "HabitQuest" Flutter App


Objective:


- What: Create "HabitQuest," a Flutter app that turns habits into an RPG adventure, blending Habitica?s quest-based task system and social features with Life Up?s attribute-driven progression and self-reward marketplace. Users become heroes, completing tasks to level up avatars, earn loot, and unlock epic skills, all while feeling like they?re mastering their lives.


- Why: To make productivity addictive by tapping into psychological drivers: dopamine from rewards, social proof via leaderboards, scarcity for premium perks, and endowment effect through avatar ownership. The app competes with Habitica/Life Up by offering a polished, modern UX with an AI assistant (ALI) for personalized coaching, driving engagement and monetization.


- When: Users install after seeing a heroic app store teaser (pixel-art avatar slaying a "Chaos Dragon" with "Forge Your Legend?Start Now!"). Retention kicks in via daily quests, streaks, and notifications. Monetization triggers post-task or ad exposure.


- How: Built in Flutter (Dart) for seamless Android/iOS performance. Firebase handles auth (Google/email), real-time data (Firestore), and storage (avatars). AdMob delivers ads; Google Play Billing manages subscriptions. Free assets from OpenGameArt.org ensure legal safety.


- Mechanics: Gamification (XP, HP, Mana, Gold, Gems), task management (Habits, Dailies, To-Dos), social systems (parties, leaderboards), and AI-driven personalization (ALI). Offline-first with Hive, syncing via Firestore.


- Logic: Tasks yield XP/Gold based on difficulty (Easy: 10 XP, Hard: 100 XP + gem chance). Streaks multiply rewards. Premium removes ads, unlocks ALI, and boosts rewards.


Deliverable:


- Generate a complete Flutter project: lib/ (screens, widgets, models, services, providers), assets/ (PNGs/SVGs from OpenGameArt.org, Lottie animations), pubspec.yaml, and main.dart. Include Firebase/AdMob/Billing setup guide ("Add google-services.json/plist, initialize in main.dart"). Provide unit tests for core logic (e.g., XP calculation). Ensure extensibility for quests/pets. Code must be optimized (60fps, <100ms loads), accessible (voiceover, high contrast), and ready for flutter run.


---


### Psychological Hooks (What, Why, When, How, Mechanics, Logic)


What: Behavioral psychology principles to drive installs, engagement, and purchases.


Why: To make HabitQuest irresistible by leveraging dopamine (rewards), FOMO (limited offers), social proof (leaderboards), and loss aversion (ad interruptions).


When: Hooks trigger at specific moments (install, task completion, premium upsell).


How: Dynamic UI (Lottie animations, haptic feedback), Firebase Remote Config for A/B testing, and personalized nudges (e.g., "80% of heroes upgraded?join them!").


Mechanics:


- Install Hooks: Scarcity ("First 1,000 get 100 Founder Gems!"), curiosity ("What?s YOUR hero?s destiny?"), social proof (app store: "3M warriors joined!").


- Engagement Hooks: Dopamine loops (random loot, confetti on task check), endowment (avatar feels "mine"), streaks (visual chains).


- Monetization Hooks: Loss aversion (ads disrupt flow), anchoring ($99.99 lifetime, then $49.99 "deal"), urgency (countdown timers).


Logic:


- A/B test hooks via Remote Config (e.g., test "Join 3M heroes" vs. "Slay your to-do dragon"). Track engagement (Firestore analytics: tasks/day, ad views). Upsell after high engagement (e.g., 5 tasks = "Double XP with premium?").


---


### App Structure (What, Why, When, How, Mechanics, Logic)


1. Splash Screen:


- What: Pixel-art animation of an avatar forging a sword with "HabitQuest: Forge Your Legend" and a progress bar ("Summoning destiny...").


- Why: Sets epic tone, hooks with heroic imagery, and builds anticipation.


- When: App launch (2-3s, checks Firebase auth).


- How: Lottie animation (e.g., sword-spark from lottieanimations.com, free tier). Fade to onboarding (new users) or dashboard (returning). Text shifts by time (morning: "Rise, hero!" evening: "Night quests await!").


- Mechanics: Loads user data (Firestore) or offline cache (Hive). Displays "Welcome back, [Name]!" for retention.


- Logic: If FirebaseAuth.currentUser == null, route to auth; else, check Hive for offline data, sync Firestore, route to dashboard.


2. Onboarding Carousel:


- What: 5 slides ("Chores = Quests!", "Level Up!", "Earn Loot!", "Join Guilds!", "Meet ALI!") with quick avatar creator (gender, hair, class: Warrior/Mage/Rogue).


- Why: Educates users on gamification, creates ownership via avatar, reduces drop-off.


- When: First login post-auth.


- How: swipeable_page_route for smooth swipes, Lottie confetti on "Start Quest" tap. Save avatar to Firestore/Storage.


- Mechanics: Slide data in List<Map> (title, image, text). Avatar picker uses OpenGameArt LPC sprites (e.g., "Universal LPC Sprite Sheet"). Class choice affects stats (Warrior: +20% HP).


- Logic: On final slide, save {userId: {avatar: {hair: "brown", class: "warrior"}}} to Firestore. Route to dashboard.


3. Authentication Screen:


- What: Form for email/password + Google Sign-In button ("Enter as Hero"). Forgot password link sends Firebase reset email.


- Why: Simple, secure auth reduces friction. Google login leverages trust.


- When: Pre-onboarding or on logout.


- How: Firebase Auth (google_sign_in, email/password). Error toasts styled as "Portal blocked?retry spell?" Google button follows branding guidelines.


- Mechanics: Email signup triggers verification email ("Quest key sent!"). Google login uses OAuth token, saves userId to Firestore.


- Logic: On success, save {userId: {email, createdAt, stats: {hp: 100, xp: 0}}}. If error, retry with exponential backoff (1s, 2s, 4s).


4. Main Dashboard:


- What: BottomNavigationBar with 5 tabs: Tasks, Character, Marketplace, Achievements, Social. Daily quest pop-up ("Study Dragon: 100 XP!").


- Why: Central hub for navigation, keeps users engaged with daily goals.


- When: Post-auth, auto-syncs Firestore data.


- How: Hero animations for tab switches (e.g., task icon zooms to character). StreamBuilder for real-time task updates. Pop-up uses showDialog with Lottie boss animation.


- Mechanics: Tabs use IndexedStack for state preservation. Daily quest generated via Firestore (random from quest pool, e.g., "Study 1h").


- Logic: Check lastQuestDate in Firestore; if != today, generate new quest. Sync tasks/stats on load (Hive if offline).


---


### Core Features (What, Why, When, How, Mechanics, Logic)


1. Task Management:


- What: Create/edit tasks:


- Habits: Repeatable (positive: "Exercise" +20 XP; negative: "Skip workout" -10 HP). Counter (e.g., "Water 4x").


- Dailies: Recurring tasks with streaks (e.g., "Meditate"). Checklists for subtasks.


- To-Dos: One-time tasks with due dates (e.g., "Finish report").


- Attributes: Title, notes, difficulty (Easy: 10 XP/5 Gold, Medium: 50 XP/15 Gold, Hard: 100 XP/30 Gold + 5% gem chance), tags, reminders.


- Why: Core mechanic to gamify productivity. Streaks and loot drive daily engagement.


- When: Dailies reset at midnight (intl timezone). Reminders via flutter_local_notifications (e.g., "Brew potion now!").


- How: ListView.builder with TaskCard widgets (checkboxes, swipe to edit/delete). Completion = haptic + Lottie (sword slash). Missed dailies deduct HP (premium "shield" pauses). Streaks visualized (flaming chain at 7 days).


- Mechanics: Task completion: xp += difficulty * streakMultiplier (1x for 1-3 days, 2x for 7+). Random loot: if (Random().nextDouble() < 0.05) gems += 1-3. Firestore: users/{userId}/tasks.


- Logic:


- Save task: {id, title, type, difficulty, completed, streak} to Firestore.


- Reset dailies: At midnight, completed = false, update streak.


- Free limit: 10 active tasks (count via Firestore query); premium unlimited.


- Psych: Variable rewards (gems) + streak warnings ("Chain breaks in 1h!") hook users.


2. Gamification System:


- What:


- Avatar: Customizable (hair, skin, armor from OpenGameArt LPC sprites). Saved to Firebase Storage.


- Stats: HP (100 base, -10 per missed daily), XP (level up at 100 * level), Mana (skills), Gold (tasks), Gems (rare).


- Attributes: Strength (workouts), Intellect (study), Agility (mobility), Wisdom (journaling). Tasks boost attributes (e.g., "Run" +2 Strength).


- Classes: Unlock at Lv. 10 (Warrior: +20% HP, Mage: +20% Mana, Rogue: +20% loot). Skills tree (e.g., "Double XP Potion" for 5 points).


- Why: RPG elements make tasks feel epic, fostering mastery and progression.


- When: Level up on XP thresholds. HP = 0 triggers "respawn" (lose 50% gold, keep level).


- How: fl_chart for stat radar charts. Lottie for level-up (glowing aura). Firestore stores stats (StreamBuilder). Skills via modal sheet.


- Mechanics:


- XP: xp += task.xpReward * classMultiplier. Level: level = floor(xp / 100).


- HP: hp -= 10 per missed daily; if hp <= 0, gold /= 2, hp = 100.


- Attributes: strength += 2 for workout tasks (Firestore update).


- Skills: Spend points (1 per level) on tree (e.g., {id: "double_xp", cost: 5, effect: "xp * 2"}).


- Logic:


- Save stats: users/{userId}/stats: {hp, xp, mana, gold, gems, attributes, class}.


- Premium: Legendary gear (+50% stats, e.g., {gear: "dragon_armor", xpBoost: 1.5}).


- Psych: Visual growth ("Strength +2!") + mastery ("Unlock skills at Lv. 10") drives retention.


3. Rewards & Marketplace:


- What:


- Rewards: Gold/Coins from tasks (Easy: 5, Hard: 30). Spend on self-rewards ("Netflix: 50 gold") or in-app items (potions: +50 HP, 10 gold; cosmetics: 5 gems).


- Marketplace: Buy/sell user-created "quest templates" (e.g., "7-day fitness saga" for 20 gems).


- Currencies: Gold (tasks), Coins (ads/purchases), Gems (tasks/ads/purchases).


- Why: Self-rewards personalize motivation; marketplace fosters community.


- When: Shop unlocks at 100 gold. Rewarded ads give 50 coins/10 gems/hourly premium.


- How: GridView for items (tap to preview). Google Billing for gem packs (100 gems = $1.99). Firestore tracks transactions. Sell templates via modal form.


- Mechanics:


- Purchase: if (gold >= item.cost) { gold -= cost; addItem(item); }.


- Ad reward: onAdComplete: coins += 50 or gems += 10 or activateHourlyPremium().


- Template: {id, creatorId, tasks: [TaskModel], price: 20 gems}.


- Logic:


- Firestore: users/{userId}/inventory, marketplace/templates.


- Premium: Exclusive items (e.g., {item: "mystic_cape", xpBoost: 1.2}).


- Psych: Scarcity ("3 capes left!") + endowment (custom rewards) hook spending.


4. Achievements & Journal:


- What:


- Achievements: Badges (e.g., "Dragon Slayer: 100 tasks" = 50 XP + 1 gem).


- Journal: Mood log (emoji slider) + notes. Ties to Wisdom (+1 per entry).


- Reports: Weekly/monthly charts (fl_chart: tasks, attributes).


- Why: Badges reward milestones; journaling builds reflection habit.


- When: Badges auto-unlock. Journal prompt at 8 PM (notification).


- How: GridView for badges (Lottie unlock animation). Journal in modal sheet. Premium: PDF export.


- Mechanics:


- Badge: if (tasksCompleted >= 100) unlockBadge("dragon_slayer").


- Journal: Save {date, mood, note, wisdom: +1} to Firestore.


- Charts: fl_chart.LineChart(tasksCompletedByWeek).


- Logic:


- Firestore: users/{userId}/achievements, /journal.


- Premium: Export {tasks, stats, journal} as PDF (pdf package).


- Psych: Celebration (fireworks) + shareable cards ("I earned Slayer!") drive pride.


5. Social Features:


- What:


- Parties: Groups (up to 10) for shared quests (e.g., "Team Study Dragon: 500 XP"). Firestore chat.


- Leaderboards: Global (top 100 by level), friends (gold/XP). Weekly raids (e.g., "Chaos Titan: +200 XP").


- Why: Fosters community, competition, and collaboration.


- When: Parties at Lv. 5. Leaderboards refresh weekly.


- How: StreamBuilder for party updates. share_plus for posts ("Lv. 10 achieved!"). Raid UI: Lottie boss health bar.


- Mechanics:


- Party: parties/{partyId}/members: [userIds]. Quest: if (allCompleteTask) reward += 500.


- Leaderboard: Query users order by level desc limit 100.


- Logic:


- Firestore: parties, leaderboards.


- Premium: Alliance boosts (+10% party XP).


- Psych: Belonging ("Guild needs you!") + competition ("Top 10 get gems!") hook engagement.


6. AI Agent (ALI):


- What: ALI (Adaptive Life Intelligence) generates:


- Workouts (e.g., "10-min HIIT: +5 Strength" with timers/Lottie).


- Plans (e.g., "Report: Outline, Draft, Edit").


- Suggestions (e.g., "Add ?Bed by 10 PM? based on sleep streak").


- Answers (e.g., "Motivation tips" from public domain Wikihow).


- Premium: Voice input (speech_to_text), personalized plans (Firestore history).


- Why: Personalization boosts retention; premium exclusivity drives upsell.


- When: Chat bubble on dashboard. Auto-suggests on load (e.g., "Morning: ALI suggests stretch quest!").


- How: Chat UI (ListView). Offline: Firebase ML Kit for basic tips. Premium: Mock Grok-like API (placeholder responses).


- Mechanics:


- Workout: {type: "hiit", duration: 600s, strength: +5}.


- Plan: Split task into {subtasks: [TaskModel]} based on title.


- Suggest: Query Firestore history if (sleepStreak < 3) suggest("bedtime")).


- Logic:


- Free: Static responses ("Upgrade for ALI?s full wisdom!").


- Premium: Dynamic plans if (tasksCompleted.includes("workout")) suggest("yoga")).


- Psych: Intimacy (ALI remembers: "Last gym quest rocked!") hooks loyalty.


7. Settings & Extras:


- What: Theme toggle (light/dark/RPG), backup/restore (Firebase), notifications, accessibility.


- Why: User control enhances UX; accessibility broadens audience.


- When: Gear icon tap.


- How: ListView with Switch/Tile widgets. Premium: Custom themes from marketplace.


- Mechanics: Save theme: "dark" to Firestore. Backup: Export users/{userId}.


- Logic: Toggle updates Riverpod provider, triggers UI rebuild. Psych: Control ("Make YOUR app epic").


---


### Ads (What, Why, When, How, Mechanics, Logic)


- What: AdMob (google_mobile_ads):


- App Open: Full-screen on launch.


- Interstitial: Between actions.


- Rewarded: Watch for 50 coins/10 gems/hourly premium.


- Banner: Bottom bar (collapsible).


- Why: Monetize free users; rewarded ads incentivize engagement.


- When:


- App Open: Every launch (1/hour cap).


- Interstitial: Post-task/tab switch (1/session).


- Rewarded: Shop prompt ("Boost now?").


- Banner: Dashboard/tasks (hide in quests).


- How: Initialize in main.dart. Callbacks: onAdComplete: addReward(coins: 50). Skippable ads reduce frustration.


- Mechanics:


- App Open: MobileAds.instance.loadAppOpenAd().


- Interstitial: InterstitialAd.load(showOn: taskComplete).


- Rewarded: RewardedAd.load(onReward: addCoinsOrPremium).


- Banner: BannerAd(size: AdSize.banner).


- Logic:


- Firestore: Track ad views users/{userId}/adHistory).


- Premium: Disable all ads if (isPremium) return).


- Psych: Frustration ("Ad broke your streak?go ad-free!") pushes upsell.


---


### Premium Tiers (What, Why, When, How, Mechanics, Logic)


- What: Subscriptions (Hourly, One-Day, Weekly, Monthly, Yearly) + Lifetime (one-time). All remove ads, unlock ALI, unlimited tasks, exclusive gear/themes, alliance boosts. Higher tiers add bonuses (gems, PDF exports).


- Why: Tiered model maximizes revenue; low entry (hourly) hooks casuals, lifetime retains power users.


- When: Upsell post-task (e.g., 3 tasks = "Double XP?"), post-ad ("Skip ads!"), or high engagement (Lv. 10).


- How: in_app_purchase plugin. Verify via Firebase Functions. Modal prompts with countdowns ("Hourly premium: 60s left!").


- Mechanics:


- Hourly: 1h ad-free, ALI mini-session, +20% XP, 10 gems.


- One-Day: 24h all + bonus quest (50 XP).


- Weekly: 7 days + raid boost (+10% party XP).


- Monthly: 30 days + PDF report + 50 gems.


- Yearly: 365 days + 100 gems/month + "Epic Hero" badge.


- Lifetime: Forever + "Legendary Founder" + 500 gems.


- Logic:


- Firestore: users/{userId}/premium: {tier, expiry}.


- Prices (2025 benchmarks vs. Habitica $4.99/mo, Life Up $30 lifetime):


- Hourly: $0.99 (or free via rewarded ad).


- One-Day: $1.99 (one-time).


- Weekly: $4.99 (~$0.71/day).


- Monthly: $9.99 (~$0.33/day, 52% savings vs. weekly).


- Yearly: $59.99 (~$5/mo, 60% savings).


- Lifetime: $99.99 (vs. $120/year).


- Psych: Anchoring ($99.99 lifetime, then $49.99 "deal"), urgency (timers), exclusivity ("Legendary Founder").


---


### Technical Implementation (What, Why, When, How, Mechanics, Logic)


- Packages:


```yaml


dependencies:


flutter: sdk: flutter


firebase_core: ^3.6.0


firebase_auth: ^5.3.1


cloud_firestore: ^5.4.4


firebase_storage: ^12.3.2


google_sign_in: ^7.2.1


google_mobile_ads: ^5.1.0


in_app_purchase: ^3.2.0


flutter_local_notifications: ^17.2.3


fl_chart: ^0.70.1


lottie: ^3.1.2


hive: ^2.2.3


hive_flutter: ^1.1.0


intl: ^0.19.0


share_plus: ^10.0.2


speech_to_text: ^7.0.0


flutter_svg: ^2.0.10


riverpod: ^3.0.0


```


- Why: Industry-standard for Flutter apps (Firebase for backend, AdMob/Billing for monetization, Riverpod for reactivity).


- When: Initialize Firebase/AdMob in main.dart, Hive on first load, notifications on task creation.


- How:


- Firebase: await Firebase.initializeApp().


- AdMob: MobileAds.instance.initialize().


- Hive: Hive.initFlutter(); Hive.openBox('tasks').


- Riverpod: Providers for user, tasks, premium status.


- Mechanics:


- State: Riverpod providers userProvider, taskProvider).


- Offline: Hive caches tasks, stats; sync on reconnect (Firestore batch writes).


- Assets: OpenGameArt LPC sprites (PNGs <100KB), Lottie animations (e.g., sword_slash.json).


- Logic:


- Optimize: Lazy-loaded ListViews, minimal rebuilds provider.select).


- Tests: Unit test XP expect(task.xpReward * streak, 100)).


- Extensibility: Modular widgets (TaskWidget, QuestWidget), Firestore collections (quests, pets).


---


### Firebase Setup (What, Why, When, How, Mechanics, Logic)


- What: Firebase Auth (Google/email), Firestore (data), Storage (avatars).


- Why: Secure, scalable backend with real-time sync.


- When: Before flutter run.


- How:


1. Create project at console.firebase.google.com.


2. Add Android/iOS apps (package: com.habitquest.app).


3. Download google-services.json/plist.


4. Initialize in main.dart:


```dart


void main() async {


WidgetsFlutterBinding.ensureInitialized();


await Firebase.initializeApp();


await MobileAds.instance.initialize();


await Hive.initFlutter();


runApp(ProviderScope(child: HabitQuestApp()));


}


```


5. Firestore rules:


```firestore


rules_version = '2';


service cloud.firestore {


match /databases/{database}/documents {


match /users/{userId} {


allow read, write: if request.auth.uid == userId;


}


}


}


```


- Mechanics: Auth saves users/{userId}. Firestore streams tasks/stats. Storage uploads avatar PNGs.


- Logic: On login, create {userId: {stats, tasks, avatar}}. Sync Hive if offline.


---


### Sample Code (What, Why, When, How, Mechanics, Logic)


- main.dart:


```dart


import 'package:firebase_core/firebase_core.dart';


import 'package:flutter/material.dart';


import 'package:google_mobile_ads/google_mobile_ads.dart';


import 'package:riverpod/riverpod.dart';


import 'screens/splash_screen.dart';


void main() async {


WidgetsFlutterBinding.ensureInitialized();


await Firebase.initializeApp();


await MobileAds.instance.initialize();


await Hive.initFlutter();


runApp(ProviderScope(child: HabitQuestApp()));


}


class HabitQuestApp extends StatelessWidget {


@override


Widget build(BuildContext context) {


return MaterialApp(


title: 'HabitQuest',


theme: ThemeData(primarySwatch: Colors.green, useMaterial3: true),


home: SplashScreen(),


);


}


}


```


- Why: Initializes app, Firebase, AdMob, Hive.


- When: App start.


- Mechanics: Sets up providers, routes to splash.


- Logic: Async init ensures services load before UI.


- TaskCard:


```dart


class TaskCard extends ConsumerWidget {


final TaskModel task;


TaskCard({required this.task});


@override


Widget build(BuildContext context, WidgetRef ref) {


return Card(


child: ListTile(


leading: Checkbox(


value: task.completed,


onChanged: (value) {


ref.read(taskProvider).completeTask(task.id, value!);


if (value) {


Lottie.asset('assets/sword_slash.json');


Vibration.vibrate();


if (Random().nextDouble() < 0.05) {


ref.read(userProvider).addGems(1);


}


}


},


),


title: Text(task.title, style: TextStyle(fontWeight: FontWeight.bold)),


subtitle: Text('Difficulty: ${task.difficulty} | +${task.xpReward} XP'),


),


);


}


}


```


- Why: Displays tasks with interactive completion.


- When: Tasks screen.


- Mechanics: Checkbox triggers Firestore update, rewards XP/gems.


- Logic: if (completed) update stats, animate, check loot.


---


### Extensibility (What, Why, When, How, Mechanics, Logic)


- What: Quests (story-driven tasks), Pets (collectibles), Guilds (large groups).


- Why: Adds depth, retains long-term users.


- When: Post-launch via updates (Remote Config rollout).


- How: New Firestore collections quests, pets). Modular widgets (PetWidget). API hooks for quest data.


- Mechanics: Quest: {id, tasks: [TaskModel], reward: 500 XP}. Pet: {id, level, feedTask}.


- Logic: Add quests/{questId} to Firestore. Premium: Epic quests/pets. Psych: Tease ("Legendary quests soon!").


---


### Final Notes


Generate a production-ready Flutter project with all files, optimized for 60fps, <100ms loads. Use free assets (OpenGameArt.org: LPC sprites, Pixel Fantasy Caves; LottieFiles.com; Freesound.org). Include Firebase/AdMob/Billing setup guide. Code must be clean, documented, accessible, and extensible. Psychologically, every tap (task check, level up) feels epic?animations, sounds, and nudges make users crave more. ALI?s coaching ("You slayed today?ready for a bigger quest?") and the tagline "Forge Your Legend" make HabitQuest a life-changing adventure users can?t quit.Below is a hyper-detailed prompt for building a Flutter app named "HabitQuest," a gamified habit tracker and productivity RPG inspired by Habitica and Life Up, tailored for the Indian market with Indian Rupee (INR) currency. The app transforms daily tasks into an epic adventure, designed to be psychologically addictive through dopamine-driven mechanics, social proof, scarcity, urgency, and personalization. This prompt exhaustively details what features to include, why they?re included (psychological and functional rationale), when they trigger, how they?re implemented, mechanics behind each feature, and logic for their operation. It incorporates a marketplace where users can create, sell, and trade custom items with custom abilities and assets, plus a unique ?9 feature to auto-complete all tasks and claim rewards. The app uses Flutter for cross-platform Android/iOS development, Firebase for authentication (Google and email only) and data storage, AdMob for four ad types, and Google Play Billing for premium subscriptions. All assets are free, non-copyrighted, and sourced from open repositories like OpenGameArt.org. The goal is a production-ready, extensible codebase that hooks Indian users instantly, drives retention, and maximizes monetization through culturally relevant, irresistible design.


---


### Prompt for AI App Builder: Build "HabitQuest" Flutter App


Objective:


- What: Create "HabitQuest," a Flutter app that gamifies daily tasks into an RPG adventure, blending Habitica?s quest-based task system, social parties, and avatar progression with Life Up?s attribute-driven growth, self-rewards, and achievement tracking. Tailored for India, it uses INR (?) for all transactions and integrates culturally resonant themes (e.g., avatars inspired by Indian mythology like Arjuna or Kali). Users become heroes, completing tasks to level up, earn loot, and unlock epic skills, with an AI assistant (ALI) for personalized coaching. A unique marketplace allows users to create, sell, and trade custom items with custom abilities and assets. A ?9 feature auto-completes all tasks, granting rewards instantly.


- Why: To make productivity addictive for Indian users by leveraging psychological drivers: dopamine (random loot, confetti), social proof (leaderboards with friends), scarcity (limited marketplace items), urgency (countdown timers), and personalization (ALI?s tailored plans). The app outshines competitors by offering a polished UX, Indian cultural elements (e.g., Diwali-themed quests), and innovative features like custom item creation and task auto-completion. Monetization targets India?s price-sensitive market with affordable premium tiers.


- When: Users install after seeing a heroic app store teaser (pixel-art Arjuna slaying a "Procrastination Asura" with "Forge Your Legend?Start Now!"). Retention kicks in via daily quests, streaks, and notifications ("Your 7-day saga ends in 1h?save it!"). Monetization triggers post-task, post-ad, or via marketplace purchases. The ?9 auto-complete is offered daily after 3 tasks.


- How: Built in Flutter (Dart) for seamless Android/iOS performance, optimized for mid-range Indian devices (e.g., 4GB RAM). Firebase handles auth (Google/email), real-time data (Firestore), and storage (avatars). AdMob delivers four ad types; Google Play Billing manages subscriptions and one-time purchases. Free assets from OpenGameArt.org (e.g., "Liberated Pixel Cup" for avatars, "Pixel Fantasy Caves" for quest backgrounds) ensure legal safety. Offline-first with Hive, syncing via Firestore.


- Mechanics:


- Gamification: Tasks yield XP, HP, Mana, Gold, and Gems. Levels unlock classes (e.g., Kshatriya: +20% HP). Attributes (Strength, Wisdom) grow with tasks.


- Tasks: Habits (repeatable), Dailies (streaks), To-Dos (one-time). Difficulty sets rewards (Easy: 10 XP/?5 Gold).


- Marketplace: Users create custom items (e.g., "Vajra Sword: +10% XP") with AI-generated assets (via placeholder API or local ML). Sell/trade for Gems.


- Auto-Complete: Pay ?9 to complete all tasks, earning full rewards (XP, Gold, Gems).


- Ads: App Open, Interstitial, Rewarded, Banner. Rewarded ads unlock Hourly Premium or Gems.


- Premium: Removes ads, unlocks ALI, adds exclusive items, and boosts rewards.


- Logic:


- Task rewards: xp = difficulty streakMultiplier classBoost. Gems: 5% chance per Hard task.


- Marketplace: if (gems >= item.price) { deductGems; addItem }. Trade: Swap items via Firestore transaction.


- Auto-Complete: if (payment == ?9) { tasks.forEach(complete); awardRewards }.


- Premium check: if (isPremium) { disableAds; unlockALI; boostRewards }.


Deliverable:


- Generate a complete Flutter project: lib/ (screens, widgets, models, services, providers), assets/ (PNGs/SVGs from OpenGameArt.org, Lottie animations from LottieFiles.com, sounds from Freesound.org), pubspec.yaml, and main.dart. Include Firebase/AdMob/Billing setup guide ("Add google-services.json/plist, initialize in main.dart"). Provide unit tests for core logic (e.g., XP calculation, auto-complete). Ensure extensibility for quests/pets. Code must be optimized (60fps, <100ms loads), accessible (voiceover, high contrast), and ready for flutter run on Indian devices (e.g., Redmi, Realme).


---


### Psychological Hooks (What, Why, When, How, Mechanics, Logic)


What: Behavioral psychology to drive installs, engagement, and purchases tailored for Indian users.


Why: To make HabitQuest irresistible by leveraging dopamine (rewards), FOMO (limited Diwali-themed items), social proof (leaderboards with Indian names), loss aversion (ad interruptions), and cultural resonance (e.g., avatars as Indian heroes). India-specific hooks like ?9 pricing align with local microtransaction trends (e.g., UPI payments).


When:


- Install: App store teaser (Arjuna slaying Asura).


- Engagement: Task completion, daily quests, streak alerts.


- Monetization: Post-task, post-ad, marketplace visits, or ?9 auto-complete prompt.


How:


- Install: Vivid app store visuals (e.g., "Join 5M Indian heroes!" with Diwali fireworks). Firebase Remote Config A/B tests slogans (e.g., "Be an Arjuna!" vs. "Slay your to-dos!").


- Engagement: Dopamine loops (Lottie confetti, tabla sound on task check), endowment (customized avatars like Krishna), streaks (visual Rudraksha chain).


- Monetization: Loss aversion (ads disrupt quests), anchoring (?999 Lifetime, then ?499 "deal"), urgency (countdown: "Hourly Premium ends in 60s!"). ?9 auto-complete feels like a steal (UPI-friendly).


Mechanics:


- Install: Scarcity ("First 1,000 get 100 Diwali Gems!"), social proof (screenshots: "Rohit from Mumbai hit Lv. 50!").


- Engagement: Random loot (5% gem chance), streak multipliers (7 days = 2x XP), notifications ("Your saga breaks soon?act now!").


- Monetization: Tease premium (blurred ALI plans), marketplace FOMO ("Only 3 Vajra Swords left!"), ?9 auto-complete prompt ("Finish all tasks for ?9?claim epic loot!").


Logic:


- A/B test via Remote Config (e.g., track click-through: "Join 5M heroes" vs. "Be a legend"). Firestore analytics: tasksCompleted, adViews, purchases.


- Upsell logic: if (tasksDone >= 3) showDialog("?9 to finish all tasks?"). Premium nudge: if (adViews >= 2) prompt("Go ad-free for ?99/month!").


- Psych: Cultural hooks (e.g., Diwali quest: "Light 5 lamps = 100 XP") and low-cost ?9 option drive impulse buys in India?s price-sensitive market.


---


### App Structure (What, Why, When, How, Mechanics, Logic)


1. Splash Screen:


- What: Pixel-art animation of an Indian hero (e.g., Arjuna) forging a chakra with "HabitQuest: Forge Your Legend" and progress bar ("Summoning your destiny...").


- Why: Sets epic, culturally resonant tone (Indian mythology), hooks with heroic imagery.


- When: App launch (2-3s, checks Firebase auth).


- How: Lottie animation (e.g., chakra-spin from LottieFiles.com, free tier). Fade to onboarding (new users) or dashboard (returning). Text shifts by time (morning: "Rise, Kshatriya!" evening: "Night quests await!").


- Mechanics: Loads users/{userId} from Firestore or Hive (offline). Displays "Welcome back, [Name]!" with tabla sound (Freesound.org).


- Logic: if (FirebaseAuth.currentUser == null) routeTo(auth); else syncFirestoreOrHive(); routeTo(dashboard). Psych: Cultural taglines (e.g., "Unleash your inner Arjuna!") hook Indian users.


2. Onboarding Carousel:


- What: 5 slides ("Tasks = Quests!", "Level Up!", "Earn Loot!", "Join Guilds!", "Meet ALI!") with avatar creator (gender, hair, class: Kshatriya/Sadhu/Yogi, inspired by Indian archetypes).


- Why: Educates on gamification, creates ownership via avatar (e.g., saree-clad heroine), reduces drop-off.


- When: First login post-auth.


- How: swipeable_page_route for swipes, Lottie Diwali lamp animation on "Start Quest" tap. Save avatar to Firestore/Storage.


- Mechanics: Slide data in List<Map>{title, image, text}. Avatar uses OpenGameArt LPC sprites customized with Indian elements (e.g., turban, bindi). Class affects stats (Kshatriya: +20% HP).


- Logic: Save {userId: {avatar: {hair: "black", class: "kshatriya"}}} to Firestore. Route to dashboard. Psych: "Choose your dharma" feels epic, culturally immersive.


3. Authentication Screen:


- What: Form for email/password + Google Sign-In ("Enter as Hero"). Forgot password sends Firebase reset email ("Your quest key awaits!").


- Why: Simple, secure auth reduces friction. Google login leverages India?s high Google adoption.


- When: Pre-onboarding or logout.


- How: Firebase Auth (google_sign_in, email/password). Error toasts: "Portal blocked?retry mantra?" Google button uses branded logo.


- Mechanics: Email signup triggers verification ("Quest key sent!"). Google login saves OAuth token to Firestore.


- Logic: On success, save {userId: {email, createdAt, stats: {hp: 100, xp: 0}}}. Retry errors with backoff (1s, 2s, 4s). Psych: "1-tap Google login = instant adventure" reduces friction.


4. Main Dashboard:


- What: BottomNavigationBar with 5 tabs: Tasks, Character, Marketplace, Achievements, Social. Daily quest pop-up (e.g., "Diwali Lamp Quest: 100 XP").


- Why: Central hub for navigation, keeps users engaged with daily goals.


- When: Post-auth, auto-syncs Firestore.


- How: Hero animations for tab switches (e.g., task icon zooms to character). StreamBuilder for real-time tasks. Pop-up uses showDialog with Lottie (e.g., lamp glow).


- Mechanics: Tabs use IndexedStack for state preservation. Quest generated via Firestore (random from pool, e.g., "Study 1h"). ?9 auto-complete prompt after 3 tasks.


- Logic: Check lastQuestDate; if != today, generate quest. Sync tasks/stats (Hive if offline). Psych: Timer ("Defeat Asura by midnight!") creates urgency.


---


### Core Features (What, Why, When, How, Mechanics, Logic)


1. Task Management:


- What: Create/edit tasks:


- Habits: Repeatable (positive: "Yoga" +20 XP; negative: "Skip chai" -10 HP). Counter (e.g., "Drink water 4x").


- Dailies: Recurring with streaks (e.g., "Meditate"). Checklists (e.g., "Morning: Puja, Breakfast").


- To-Dos: One-time with due dates (e.g., "Submit project").


- Attributes: Title, notes, difficulty (Easy: 10 XP/?5 Gold, Medium: 50 XP/?15 Gold, Hard: 100 XP/?30 Gold + 5% gem chance), tags (Work, Health), reminders.


- Auto-Complete: Pay ?9 to complete all tasks, earning full rewards.


- Why: Core mechanic to gamify productivity. Streaks, loot, and ?9 option drive daily engagement in India?s cost-conscious market.


- When: Dailies reset at midnight (IST, intl package). Reminders via flutter_local_notifications (e.g., "Time for puja!"). ?9 prompt after 3 tasks/day.


- How: ListView.builder with TaskCard (checkboxes, swipe edit/delete). Completion = haptic + Lottie (chakra spin). Missed dailies deduct HP (premium pauses). Streaks: Rudraksha chain (7 days = 2x rewards). ?9 via Google Billing.


- Mechanics:


- Completion: xp += difficulty streakMultiplier classBoost. Gems: if (Random().nextDouble() < 0.05) gems += 1-3.


- Auto-Complete: if (payment == ?9) { tasks.forEach(complete); awardRewards }.


- Firestore: users/{userId}/tasks.


- Logic:


- Save task: {id, title, type, difficulty, completed, streak}.


- Reset dailies: completed = false, update streak.


- Free: 10 active tasks; premium: unlimited.


- ?9: Verify payment, complete tasks, update stats{xp, gold, gems}.


- Psych: Variable rewards (gems) + streak alerts ("Chain breaks in 1h!") + ?9 steal ("Finish all for ?9!") hook engagement.


2. Gamification System:


- What:


- Avatar: Customizable (hair, bindi, saree from OpenGameArt LPC sprites with Indian tweaks). Saved to Firebase Storage.


- Stats: HP (100 base, -10 per missed daily), XP (level up at 100 * level), Mana (skills), Gold (tasks), Gems (rare).


- Attributes: Strength (yoga), Intellect (study), Agility (dance), Wisdom (journaling). Tasks boost attributes (e.g., "Yoga" +2 Strength).


- Classes: Unlock at Lv. 10 (Kshatriya: +20% HP, Sadhu: +20% Mana, Yogi: +20% loot). Skills tree (e.g., "Guru?s Blessing: +10% XP").


- Why: RPG elements make tasks epic, fostering mastery. Indian classes resonate culturally.


- When: Level up on XP thresholds. HP = 0 triggers "respawn" (lose 50% gold, keep level).


- How: fl_chart for stat radar charts. Lottie for level-up (glowing lotus). Firestore stores stats (StreamBuilder). Skills via modal sheet.


- Mechanics:


- XP: xp += task.xpReward * classMultiplier. Level: level = floor(xp / 100).


- HP: hp -= 10 per missed daily; if (hp <= 0) { gold /= 2; hp = 100 }.


- Attributes: strength += 2 for yoga tasks.


- Skills: Spend points (1/level) on tree {id: "guru_blessing", cost: 5, effect: "xp * 1.1"}).


- Logic:


- Save: users/{userId}/stats: {hp, xp, mana, gold, gems, attributes, class}.


- Premium: Legendary gear (e.g., {gear: "trishul", xpBoost: 1.5}).


- Psych: Visual growth ("Wisdom +2!") + mastery ("Unlock skills at Lv. 10") drives retention.


3. Rewards & Marketplace:


- What:


- Rewards: Gold (tasks: Easy = ?5, Hard = ?30). Spend on self-rewards ("Watch movie: ?50 Gold") or items (potions: +50 HP, ?10 Gold; cosmetics: 5 Gems).


- Marketplace: Create/sell/trade custom items (e.g., "Vajra Sword: +10% XP") with AI-generated assets (placeholder API or Firebase ML Kit).


- Currencies: Gold (tasks), Coins (ads/purchases), Gems (tasks/ads/purchases). Conversion: 1 Gem = ?10 Coins.


- Why: Self-rewards personalize motivation; custom items foster creativity and community. ? pricing aligns with India?s microtransaction culture.


- When: Shop unlocks at ?100 Gold. Rewarded ads give ?50 Coins/10 Gems/Hourly Premium. Custom item creation post-Lv. 5.


- How: GridView for items (tap to preview). Google Billing for Gem packs (100 Gems = ?100). Firestore tracks transactions. Custom item form: Upload asset (PNG/SVG), set ability (e.g., xpBoost: 1.1), price (Gems). Trade via modal swap.


- Mechanics:


- Purchase: if (gems >= item.price) { deductGems; addItem }.


- Ad reward: onAdComplete: coins += 50 or gems += 10 or activateHourlyPremium.


- Custom Item: {id, creatorId, asset: "vajra.png", ability: {xpBoost: 1.1}, price: 20 gems}. Trade: swap(user1.item, user2.item).


- Asset Creation: Mock AI (ML Kit) generates pixel-art (e.g., sword with Indian motifs).


- Logic:


- Firestore: users/{userId}/inventory, marketplace/items.


- Premium: Exclusive items (e.g., {item: "shiva_trishul", hpBoost: 1.2}).


- Psych: Scarcity ("3 swords left!") + creativity ("Craft YOUR epic item!") hook spending.


4. Achievements & Journal:


- What:


- Achievements: Badges (e.g., "Asura Slayer: 100 tasks" = 50 XP + 1 Gem).


- Journal: Mood log (emoji slider: ? to ?) + notes. Ties to Wisdom (+1/entry).


- Reports: Weekly/monthly charts (fl_chart: tasks, attributes).


- Why: Badges reward milestones; journaling builds reflection, popular in India?s self-improvement culture.


- When: Badges auto-unlock. Journal prompt at 8 PM (notification: "Reflect on your dharma!").


- How: GridView for badges (Lottie Diwali lamp unlock). Journal in modal sheet. Premium: PDF export.


- Mechanics:


- Badge: if (tasksCompleted >= 100) unlockBadge("asura_slayer").


- Journal: Save {date, mood, note, wisdom: +1}.


- Charts: fl_chart.LineChart(tasksByWeek).


- Logic:


- Firestore: users/{userId}/achievements, /journal.


- Premium: Export {tasks, stats, journal} as PDF (pdf package).


- Psych: Celebration (fireworks) + shareable cards ("I earned Asura Slayer!") drive pride.


5. Social Features:


- What:


- Parties: Groups (up to 10) for shared quests (e.g., "Diwali Team Quest: 500 XP"). Firestore chat.


- Leaderboards: Global (top 100 by level), friends (gold/XP). Weekly raids (e.g., "Ravana Boss: +200 XP").


- Why: Fosters community, competition, resonant with India?s social culture.


- When: Parties at Lv. 5. Leaderboards refresh weekly.


- How: StreamBuilder for party updates. share_plus for posts ("Lv. 10 achieved!"). Raid UI: Lottie boss health bar (Ravana animation).


- Mechanics:


- Party: parties/{partyId}/members: [userIds]. Quest: if (allCompleteTask) reward += 500.


- Leaderboard: Query users order by level desc limit 100.


- Logic:


- Firestore: parties, leaderboards.


- Premium: Alliance boosts (+10% party XP).


- Psych: Belonging ("Join your mandal!") + competition ("Top 10 get Gems!") hook engagement.


6. AI Agent (ALI):


- What: ALI (Adaptive Life Intelligence) generates:


- Workouts (e.g., "10-min Surya Namaskar: +5 Strength" with timers/Lottie).


- Plans (e.g., "Project: Research, Draft, Submit").


- Suggestions (e.g., "Add ?Morning Puja? based on low Wisdom?).


- Answers (e.g., ?Motivation tips? from public domain Wikihow).


- Premium: Voice input (speech_to_text), personalized plans (Firestore history).


- Why: Personalization boosts retention; premium exclusivity drives upsell. Indian context (e.g., yoga plans) resonates.


- When: Chat bubble on dashboard. Auto-suggests on load (e.g., "Morning: ALI suggests pranayama quest!").


- How: Chat UI (ListView). Offline: Firebase ML Kit for tips. Premium: Mock Grok-like API (placeholder responses).


- Mechanics:


- Workout: {type: "surya_namaskar", duration: 600s, strength: +5}.


- Plan: Split task into {subtasks: [TaskModel]}.


- Suggest: if (wisdom < 10) suggest("puja").


- Logic:


- Free: Static responses ("Upgrade for ALI?s mantra!").


- Premium: Dynamic plans if (tasks.includes("yoga")) suggest("meditation")).


- Psych: Intimacy (ALI: "Your last yoga quest was epic!") hooks loyalty.


7. Settings & Extras:


- What: Theme toggle (light/dark/Indian festive), backup/restore (Firebase), notifications, accessibility.


- Why: User control enhances UX; accessibility broadens India?s diverse audience.


- When: Gear icon tap.


- How: ListView with Switch/Tile widgets. Premium: Custom themes (e.g., Holi palette).


- Mechanics: Save theme: "diwali" to Firestore. Backup: Export users/{userId}.


- Logic: Toggle updates Riverpod provider, rebuilds UI. Psych: Control ("Make YOUR app glow like Deepavali").


---


### Ads (What, Why, When, How, Mechanics, Logic)


- What: AdMob (google_mobile_ads):


- App Open: Full-screen on launch.


- Interstitial: Between actions.


- Rewarded: Watch for ?50 Coins/10 Gems/Hourly Premium.


- Banner: Bottom bar (collapsible).


- Why: Monetize free users; rewarded ads incentivize engagement, align with India?s ad-driven apps.


- When:


- App Open: Every launch (1/hour).


- Interstitial: Post-task/tab switch (1/session).


- Rewarded: Shop prompt ("Boost now?").


- Banner: Dashboard/tasks (hide in quests).


- How: Initialize in main.dart. Callbacks: onAdComplete: addReward(coins: 50). Skippable ads reduce frustration.


- Mechanics:


- App Open: MobileAds.instance.loadAppOpenAd().


- Interstitial: InterstitialAd.load(showOn: taskComplete).


- Rewarded: RewardedAd.load(onReward: addCoinsOrPremium).


- Banner: BannerAd(size: AdSize.banner).


- Logic:


- Firestore: Track users/{userId}/adHistory.


- Premium: if (isPremium) disableAds.


- Psych: Frustration ("Ad broke your streak?go ad-free for ?99!") pushes upsell.


---


### Premium Tiers (What, Why, When, How, Mechanics, Logic)


- What: Subscriptions (Hourly, One-Day, Weekly, Monthly, Yearly) + Lifetime. All remove ads, unlock ALI, unlimited tasks, exclusive gear/themes, alliance boosts. Higher tiers add bonuses (Gems, PDF exports).


- Why: Tiered model maximizes revenue in India?s price-sensitive market. ?9 aligns with UPI microtransactions.


- When: Upsell post-task (3 tasks = "?9 auto-complete?"), post-ad ("Skip ads!"), or marketplace.


- How: in_app_purchase plugin. Verify via Firebase Functions. Modal prompts with countdowns ("Hourly Premium: 60s left!").


- Mechanics:


- Hourly: 1h ad-free, ALI mini-session, +20% XP, 10 Gems.


- One-Day: 24h all + bonus quest (50 XP).


- Weekly: 7 days + raid boost (+10% party XP).


- Monthly: 30 days + PDF report + 50 Gems.


- Yearly: 365 days + 100 Gems/month + "Epic Hero" badge.


- Lifetime: Forever + "Legendary Founder" + 500 Gems.


- Logic:


- Firestore: users/{userId}/premium: {tier, expiry}.


- Prices (India 2025 benchmarks vs. Habitica ?400/mo):


- Hourly: ?9 (or free via rewarded ad).


- One-Day: ?49 (one-time).


- Weekly: ?149 (~?21/day).


- Monthly: ?399 (~?13/day, 60% savings vs. weekly).


- Yearly: ?2,999 (~?8/day, 62% savings).


- Lifetime: ?4,999 (vs. ?4,800/year).


- Psych: Anchoring (?9,999 Lifetime, then ?4,999), urgency (timers), exclusivity ("Legendary Founder").


---


### Technical Implementation (What, Why, When, How, Mechanics, Logic)


- Packages:


```yaml


dependencies:


flutter: sdk: flutter


firebase_core: ^3.6.0


firebase_auth: ^5.3.1


cloud_firestore: ^5.4.4


firebase_storage: ^12.3.2


google_sign_in: ^7.2.1


google_mobile_ads: ^5.1.0


in_app_purchase: ^3.2.0


flutter_local_notifications: ^17.2.3


fl_chart: ^0.70.1


lottie: ^3.1.2


hive: ^2.2.3


hive_flutter: ^1.1.0


intl: ^0.19.0


share_plus: ^10.0.2


speech_to_text: ^7.0.0


flutter_svg: ^2.0.10


riverpod: ^3.0.0


pdf: ^3.10.8


```


- Why: Industry-standard for Flutter, optimized for India?s mid-range devices.


- When: Initialize Firebase/AdMob in main.dart, Hive on load, notifications on task creation.


- How:


- Firebase: await Firebase.initializeApp().


- AdMob: MobileAds.instance.initialize().


- Hive: Hive.initFlutter(); Hive.openBox('tasks').


- Riverpod: Providers for user, tasks, premium.


- Mechanics:


- State: Riverpod userProvider, taskProvider).


- Offline: Hive caches tasks, stats; sync via Firestore batch.


- Assets: OpenGameArt LPC sprites (Indianized: turban, saree), Lottie (Diwali lamp), Freesound (tabla).


- Logic:


- Optimize: Lazy ListViews, minimal rebuilds provider.select).


- Tests: Unit test XP expect(task.xpReward * streak, 100)), auto-complete expect(tasks.allCompleted, true)).


- Extensibility: Modular widgets (TaskWidget, ItemWidget), Firestore collections (quests, pets).


---


### Firebase Setup (What, Why, When, How, Mechanics, Logic)


- What: Firebase Auth (Google/email), Firestore (data), Storage (avatars).


- Why: Secure, scalable backend with real-time sync, popular in India.


- When: Before flutter run.


- How:


1. Create project at console.firebase.google.com.


2. Add Android/iOS apps (package: com.habitquest.app).


3. Download google-services.json/plist.


4. Initialize in main.dart:


```dart


void main() async {


WidgetsFlutterBinding.ensureInitialized();


await Firebase.initializeApp();


await MobileAds.instance.initialize();


await Hive.initFlutter();


runApp(ProviderScope(child: HabitQuestApp()));


}


```


5. Firestore rules:


```firestore


rules_version = '2';


service cloud.firestore {


match /databases/{database}/documents {


match /users/{userId} {


allow read, write: if request.auth.uid == userId;


}


match /marketplace/items/{itemId} {


allow read: if true;


allow write: if request.auth != null;


}


}


}


```


- Mechanics: Auth saves users/{userId}. Firestore streams tasks/stats/marketplace. Storage uploads avatars (PNG <100KB).


- Logic: On login, create {userId: {stats, tasks, avatar}}. Sync Hive offline. Psych: Seamless auth ("1-tap Google = instant dharma").


---


### Sample Code (What, Why, When, How, Mechanics, Logic)


- main.dart:


```dart


import 'package:firebase_core/firebase_core.dart';


import 'package:flutter/material.dart';


import 'package:google_mobile_ads/google_mobile_ads.dart';


import 'package:riverpod/riverpod.dart';


import 'screens/splash_screen.dart';


void main() async {


WidgetsFlutterBinding.ensureInitialized();


await Firebase.initializeApp();


await MobileAds.instance.initialize();


await Hive.initFlutter();


runApp(ProviderScope(child: HabitQuestApp()));


}


class HabitQuestApp extends StatelessWidget {


@override


Widget build(BuildContext context) {


return MaterialApp(


title: 'HabitQuest',


theme: ThemeData(primarySwatch: Colors.green, useMaterial3: true),


home: SplashScreen(),


);


}


}


```


- Why: Initializes app, services.


- When: App start.


- Mechanics: Sets up providers, routes to splash.


- Logic: Async init ensures services load.


- TaskCard:


```dart


class TaskCard extends ConsumerWidget {


final TaskModel task;


TaskCard({required this.task});


@override


Widget build(BuildContext context, WidgetRef ref) {


return Card(


child: ListTile(


leading: Checkbox(


value: task.completed,


onChanged: (value) {


ref.read(taskProvider).completeTask(task.id, value!);


if (value) {


Lottie.asset('assets/chakra_spin.json');


Vibration.vibrate();


if (Random().nextDouble() < 0.05) {


ref.read(userProvider).addGems(1);


}


}


},


),


title: Text(task.title, style: TextStyle(fontWeight: FontWeight.bold)),


subtitle: Text('Difficulty: ${task.difficulty} | +${task.xpReward} XP'),


),


);


}


}


```


- Why: Displays tasks with completion.


- When: Tasks screen.


- Mechanics: Checkbox updates Firestore, rewards XP/gems.


- Logic: if (completed) updateStats; animate; checkLoot.


- MarketplaceItemCreator:


```dart


class MarketplaceItemCreator extends ConsumerWidget {


@override


Widget build(BuildContext context, WidgetRef ref) {


final TextEditingController nameController = TextEditingController();


final TextEditingController abilityController = TextEditingController();


return Scaffold(


appBar: AppBar(title: Text('Craft Item')),


body: Column(


children: [


TextField(controller: nameController, decoration: InputDecoration(labelText: 'Item Name (e.g., Vajra Sword)')),


TextField(controller: abilityController, decoration: InputDecoration(labelText: 'Ability (e.g., xpBoost: 1.1)')),


ElevatedButton(


onPressed: () {


// Mock AI-generated asset (placeholder ML Kit)


final item = ItemModel(


id: Uuid().v4(),


creatorId: FirebaseAuth.instance.currentUser!.uid,


name: nameController.text,


asset: 'assets/ai_vajra.png',


ability: {'type': 'xpBoost', 'value': double.parse(abilityController.text)},


price: 20, // Gems


);


ref.read(marketplaceProvider).addItem(item);


},


child: Text('Create & List (20 Gems)'),


),


],


),


);


}


}


```


- Why: Enables custom item creation.


- When: Marketplace, post-Lv. 5.


- Mechanics: Saves item to Firestore, generates mock asset.


- Logic: if (level >= 5) saveItem; else showError("Reach Lv. 5!").


---


### Extensibility (What, Why, When, How, Mechanics, Logic)


- What: Quests (story-driven tasks), Pets (collectibles), Guilds (large groups).


- Why: Adds depth, retains Indian users long-term.


- When: Post-launch via updates (Remote Config).


- How: Firestore collections quests, pets). Modular widgets (PetWidget). API hooks for quest data.


- Mechanics: Quest: {id, tasks: [TaskModel], reward: 500 XP}. Pet: {id, level, feedTask}.


- Logic: Add quests/{questId}. Premium: Epic quests/pets. Psych: Tease ("Diwali quests soon!").


---


### Memory Integration


Drawing from your interest in gamified self-improvement apps (e.g., Solo Leveling World, LifeQuest), this prompt incorporates familiar elements like AI assistants (ALI, inspired by DevX/Xenz), marketplace dynamics, and Indian cultural resonance (e.g., Diwali themes, ? pricing). Your request for a ?9 auto-complete feature aligns with your preference for affordable, impactful monetization (e.g., ?100 for 100 Gems in LifeQuest). The focus on custom item creation reflects your desire for user-driven creativity, as seen in your Solo Leveling app?s marketplace.


---


### Final Notes


Generate a production-ready Flutter project optimized for India (60fps, <100ms loads, mid-range devices). Use free assets (OpenGameArt.org: LPC sprites with Indian tweaks; LottieFiles.com: Diwali animations; Freesound.org: tabla sounds). Include Firebase/AdMob/Billing setup guide. Code must be clean, documented, accessible, and extensible. Psychologically, every tap feels epic?animations, sounds, and nudges (e.g., "Your dharma awaits!") make users crave more. ALI?s coaching ("Your yoga quest was legendary?next?") and "Forge Your Legend" make HabitQuest a life-changing adventure for Indian users.Below is an ultra-detailed prompt for building "HabitQuest," a Flutter app that gamifies productivity across all categories, integrating features from top Play Store productivity apps (researched 2025) like Todoist, TickTick, Google Tasks, Habitify, Loop Habit Tracker, Streaks, Sleep Cycle, Sleep as Android, Headspace, Calm, Daylio, Quizlet, Anki, Knowt, Google Fit, Strava, MyFitnessPal, Insight Timer, Duolingo, Memrise, Babbel, YNAB, PocketGuard, Mint, Goodreads, StoryGraph, Bookly, Focus To-Do, Forest, Focus Booster, Reflectly, MoodKit, Mealime, and Eat This Much. The app transforms tasks into an RPG adventure, using Indian Rupees (INR) for monetization and global cultural themes (e.g., Diwali for India, Zen for Japan) assigned to productivity categories for resonance. Users create, sell, and trade custom marketplace items with AI-generated assets and abilities, and a ?9 feature auto-completes all tasks. All animations are coded in Flutter (no Lottie), using packages like AnimatedBuilder. Assets are free from non-copyrighted sources (OpenGameArt.org, Freesound.org). The prompt details what features to include, why they?re included (psychological and functional rationale), when they trigger, how they?re implemented, mechanics behind each feature, and logic for their operation. The AI builder decides which features to prioritize or exclude for optimal UX, ensuring a production-ready, psychologically addictive app that hooks global users.


---


### Prompt for AI App Builder: Build "HabitQuest" Flutter App


Objective:


- What: Develop "HabitQuest," a cross-platform Flutter app that gamifies all productivity categories (To-Do, Habits, Sleep, Mental Health, Flashcards/Quizzes, Fitness, Meditation, Language Learning, Budgeting, Reading, Focus, Journaling, Meal Planning) into an RPG adventure. Integrate features from top 2025 Play Store apps: Todoist (subtasks, priorities, Kanban boards), TickTick (Pomodoro, calendar sync), Google Tasks (Gmail integration), Habitify (streak analytics, Apple Health sync), Loop Habit Tracker (habit strength formula), Streaks (custom frequencies), Sleep Cycle (smart alarms, sleep phases), Sleep as Android (sonar tracking, lucid dreaming), Headspace (guided meditations, SOS tools), Calm (sleep stories, breathing), Daylio (mood correlations, emoji logs), Quizlet (AI flashcard decks, practice tests), Anki (spaced repetition), Knowt (Quizlet imports), Google Fit (Heart Points, WHO goals), Strava (GPS routes, challenges), MyFitnessPal (macro tracking, barcode scanner), Insight Timer (100k+ meditation tracks), Duolingo (leagues, AI stories), Memrise (native videos), Babbel (live classes), YNAB (zero-based budgeting), PocketGuard (bill negotiation), Mint (net worth dashboards), Goodreads (community shelves, challenges), StoryGraph (mood-based book recs), Bookly (reading timers), Focus To-Do (task-Pomodoro hybrid), Forest (gamified trees), Focus Booster (session reports), Reflectly (AI journal prompts), MoodKit (CBT activities), Mealime (auto grocery lists), Eat This Much (AI meal plans). Users are heroes completing category-specific quests, earning XP, HP, Mana, Gold, and Gems, leveling avatars, and unlocking skills. ALI (AI assistant) offers personalized coaching. A marketplace enables creating/selling/trading custom items (AI-generated assets, custom abilities). A ?9 feature auto-completes all tasks, granting rewards. Global themes (e.g., Diwali for habits, Japanese Zen for meditation, American Thanksgiving for meals) enhance cultural appeal.


- Why: To create an all-in-one productivity RPG that outshines siloed apps by covering every productive category, hooking users with dopamine (rewards, streaks), FOMO (limited items, themed quests), social proof (leaderboards, parties), loss aversion (ad interruptions), and personalization (ALI, cultural themes). INR pricing targets India?s microtransaction market (e.g., UPI-friendly ?9). Global themes broaden appeal without a single Indian focus. Coded animations ensure originality and control. Free assets (OpenGameArt.org for sprites, Freesound.org for sounds) ensure legal safety. Extensibility supports future categories (e.g., parenting).


- When: Installs via app store teaser (pixel-art hero vs. "Distraction Demon," "Forge Your Legend!"). Retention: Daily quests, streak alerts ("7-day saga ends in 1h!"), notifications. Monetization: Post-task (?9 auto-complete after 3 tasks), post-ad ("Skip for ?99!"), marketplace purchases. Category features trigger contextually (e.g., sleep alarms at bedtime, Pomodoro during focus hours).


- How: Built in Flutter (Dart) for Android/iOS, optimized for mid-range devices (e.g., 4GB RAM, common in India). Firebase: Authentication (Google/email), Firestore (real-time data), Storage (avatars/items). AdMob: Four ad types (App Open, Interstitial, Rewarded, Banner). Google Play Billing: INR subscriptions/one-time purchases. Offline: Hive syncs to Firestore. State: Riverpod. Animations: Coded via AnimatedBuilder, CustomPainter, or TweenAnimationBuilder (e.g., XP burst, gem sparkle). Assets: OpenGameArt.org (sprites: heroes, gear; e.g., "Liberated Pixel Cup" for avatars, "Pixel Fantasy Caves" for quests), Freesound.org (sounds: tabla for habits, chimes for meditation). Extensible for new categories.


- Mechanics:


- Gamification: Tasks yield XP (Easy: 10, Hard: 100), HP (-10 for missed dailies), Mana (skills), Gold (?5-?30), Gems (5% Hard task chance). Levels unlock classes (e.g., Focus Samurai: +20% Pomodoro XP). Attributes (Strength, Intellect, Wisdom, Agility) grow via category tasks.


- Categories: To-Do (subtasks, Kanban), Habits (streaks, strength formula), Sleep (smart alarms, snoring logs), Mental (meditations, CBT), Flashcards (spaced repetition, AI decks), Fitness (Heart Points, GPS), Meditation (tracks, breathing), Language (leagues, stories), Budget (envelopes, net worth), Reading (shelves, timers), Focus (Pomodoro, trees), Journal (mood logs, prompts), Meals (barcode plans).


- Marketplace: Create items (e.g., "Zen Lantern: +10% meditation XP") with AI assets (mock ML Kit), sell/trade for Gems.


- ?9 Auto-Complete: Completes all tasks, awards rewards.


- Ads: Rewarded for Gems/Hourly Premium. Premium removes ads, unlocks ALI, boosts rewards.


- Logic:


- Rewards: xp = difficulty streakMultiplier categoryBoost * classBoost. Gems: Random().nextDouble() < 0.05 ? gems += 1-3.


- Marketplace: if (gems >= price) { deductGems; addItem }. Trade: Firestore transaction swaps items.


- Auto-Complete: if (payment == ?9) { tasks.forEach(complete); stats += rewards }.


- Premium: if (isPremium) { disableAds; unlockALI; boostXP(1.5) }.


- Themes: Remote Config assigns (e.g., habits: Diwali, meditation: Zen).


Deliverable:


- Complete Flutter project: lib/ (screens, widgets, models, services, providers), assets/ (OpenGameArt sprites, Freesound MP3s), pubspec.yaml, main.dart.


- Firebase/AdMob/Billing setup guide ("Add google-services.json/plist, initialize in main.dart").


- Unit tests (XP calc, auto-complete).


- Optimized: 60fps, <100ms loads, mid-range devices. Accessible (voiceover, high contrast). Extensible (new categories).


Feature Selection: The AI builder decides which features to prioritize/exclude (e.g., include Quizlet?s AI decks, exclude Babbel?s live classes for offline focus) to optimize UX, performance, and engagement, balancing complexity and simplicity.


---


### Psychological Hooks (What, Why, When, How, Mechanics, Logic)


What: Behavioral psychology for installs, engagement, monetization, tailored to categories (e.g., Pomodoro dopamine, mood correlation insights).


Why: Hooks users via dopamine (rewards, confetti), FOMO (limited themed items, e.g., Diwali lamps), social proof (leaderboards with global names), loss aversion (ad disruptions), personalization (ALI, cultural themes). Resonates globally while appealing to India?s microtransaction culture (?9).


When:


- Install: App store teaser (hero vs. "Chaos Asura," "Join 5M Legends!").


- Engagement: Task completion (code sparkle anim), streaks, daily quests.


- Monetization: Post-3 tasks (?9 prompt), post-ad ("Skip for ?99!"), marketplace (limited items).


How: Firebase Remote Config A/B tests slogans (e.g., "Slay Distractions!" vs. "Be a Legend!"). Coded animations (e.g., XP burst via AnimatedBuilder). Nudges (e.g., sleep: "Bedtime quest for better dreams?").


Mechanics:


- Install: Scarcity ("First 1K get 100 Gems!"), social proof ("Amit from Delhi hit Lv. 50!").


- Engagement: Variable loot (5% gem chance), streaks (2x XP Day 7), notifications ("Saga breaks in 1h!").


- Monetization: Blurred ALI ("Upgrade for wisdom!"), urgency ("?9 ends in 60s!"), scarcity ("3 Zen Lanterns left!").


Logic:


- Analytics: Firestore tracks tasksCompleted, adViews, purchases.


- Upsell: if (tasks >= 3) showDialog("?9 complete all?"). if (adViews >= 2) prompt("Ad-free ?99!").


- Psych: Themes (e.g., Brazilian Carnival for fitness, German Oktoberfest for meals) drive cultural connection.


---


### App Structure (What, Why, When, How, Mechanics, Logic)


1. Splash Screen:


- What: Pixel-art hero forging a culturally themed weapon (e.g., Indian trishul), "HabitQuest: Forge Your Legend," progress bar ("Summoning destiny...").


- Why: Sets epic tone, hooks via global imagery.


- When: Launch (2-3s, Firebase auth check).


- How: Coded animation (CustomPainter: weapon glow, particles). Fade to onboarding/dashboard. Text shifts (morning: "Rise, Hero!").


- Mechanics: Loads users/{userId} (Firestore/Hive). Sound: Freesound tabla.


- Logic: if (user == null) auth; else sync; route. Psych: "Welcome, [Name]!" hooks retention.


2. Onboarding Carousel:


- What: 8 slides (gamification, 13 categories, ALI, marketplace, ?9). Avatar creator (classes: Warrior, Guru, Linguist).


- Why: Educates, builds ownership.


- When: First login.


- How: swipeable_page_route, coded confetti (ParticleSystem). Save to Firestore/Storage.


- Mechanics: Slides: List<Map>{title, icon, text}. Classes: Guru (+20% meditation XP). Sprites: OpenGameArt LPC.


- Logic: Save {avatar: {class: "guru"}}. Route dashboard. Psych: "Choose your path" feels epic.


3. Authentication:


- What: Email/password + Google ("Enter Realm"). Reset email ("Quest key sent!").


- Why: Secure, low-friction (Google popular globally).


- When: Pre-onboarding/logout.


- How: Firebase Auth. Errors: "Portal glitch?retry?".


- Mechanics: Verification email. OAuth token.


- Logic: Save {userId: {stats: {hp:100}}}. Backoff retries.


4. Main Dashboard:


- What: BottomNav: 13 category tabs (To-Do, Habits, Sleep, Mental, Flashcards, Fitness, Meditation, Language, Budget, Reading, Focus, Journal, Meals), Character, Marketplace, Achievements, Social. Quest pop-up (e.g., "Pomodoro Sprint: 100 XP"). ?9 button.


- Why: Hub for all productivity, daily engagement.


- When: Post-auth, sync.


- How: Hero anims (task to character). StreamBuilder tasks. Pop-up: Coded timer anim.


- Mechanics: IndexedStack tabs. Quest: Random category-based (e.g., Duolingo league).


- Logic: if (lastQuest != today) generate. Sync Hive. Psych: Timer urgency.


---


### Core Features (What, Why, When, How, Mechanics, Logic)


1. Task Management (Todoist/TickTick/Google Tasks):


- What: Habits (repeatable, counters; Loop: strength formula), Dailies (streaks, checklists; Habitify: analytics), To-Dos (subtasks, priorities, Kanban; Todoist). Difficulty: Easy (10 XP/?5 Gold), Medium (50/?15), Hard (100/?30 + 5% gem). Tags, reminders. ?9 auto-complete.


- Why: Core productivity gamified; Kanban from Todoist, streaks from Streaks.


- When: Midnight reset (intl). Reminders (flutter_local_notifications). ?9 post-3 tasks.


- How: ListView TaskCard (checkbox, swipe). Completion: Haptic, coded slash anim (AnimatedBuilder). Premium pauses HP loss. Gmail sync (Google Tasks).


- Mechanics: xp = difficulty streak categoryBoost. Loot: Random().nextDouble() < 0.05 ? gems += 1-3. Auto: tasks.forEach(complete).


- Logic: Save {id, type, priority, strength}. Free: 10 tasks; premium unlimited. ?9: Verify payment, update stats. Psych: Streaks, ?9 steal hook.


2. Gamification (Habitica/Life Up):


- What: Avatar (OpenGameArt sprites, global themes: e.g., samurai for focus). Stats: HP (-10 miss), XP (level 100*level), Mana, Gold, Gems. Attributes: Strength (fitness), Intellect (quizzes), Wisdom (mental), Agility (language). Classes: Lv.10 (e.g., Linguist: +20% language XP). Skills tree (e.g., "Pomodoro Boost").


- Why: Epic progression; Life Up attributes.


- When: XP level-up. HP=0 respawn (50% gold loss).


- How: fl_chart radars. Coded aura anim (CustomPainter). StreamBuilder stats.


- Mechanics: xp += reward * classMult. Attributes: +2/category task. Skills: {effect: "pomoBoost"}.


- Logic: {stats, class}. Premium gear (+50%). Psych: Growth visuals.


3. Rewards & Marketplace (Habitica/Life Up):


- What: Gold (Easy ?5). Self-rewards ("Movie: ?50"). Items (potions ?10, cosmetics 5 Gems). Marketplace: Create items (mock ML Kit assets, e.g., "Zen Lantern: +10% meditation XP"), sell/trade Gems.


- Why: Personalization; user creativity.


- When: 100 Gold unlock. Ads: ?50 Coins/10 Gems. Create post-Lv.5.


- How: GridView. Billing (100 Gems=?100). Form: PNG upload, ability {xpBoost:1.1}. Trade modal.


- Mechanics: if (gems >= price) addItem. Trade: Swap {item1, item2}. Assets: AI mock (Indian trishul for budget).


- Logic: {inventory, marketplace/items}. Premium exclusives. Psych: Scarcity ("3 lanterns left!").


4. Achievements & Journal (Life Up/Daylio/Reflectly):


- What: Badges ("100 tasks: 50 XP"). Journal: Mood emojis, notes (+Wisdom), AI prompts (Reflectly). Charts (fl_chart: trends, correlations).


- Why: Milestones; reflection from Daylio.


- When: Milestones. 8 PM prompt.


- How: Grid badges (coded fireworks). Modal journal. Premium PDF.


- Mechanics: if (tasks >=100) badge. {mood, note}.


- Logic: {achievements, journal}. Psych: Shareable cards.


5. Social (Habitica/Strava/Goodreads):


- What: Parties (quests, chat). Leaderboards (global/friends). Challenges (Duolingo leagues).


- Why: Community; Strava competition.


- When: Lv.5 parties. Weekly refresh.


- How: StreamBuilder chat. Share_plus. Coded boss bar.


- Mechanics: if (partyComplete) +500 XP. Query order by level.


- Logic: {parties, leaderboards}. Premium boosts.


6. AI Agent (ALI - Headspace/Wysa):


- What: Workouts (Surya Namaskar timers), plans (subtasks), suggestions (e.g., "Low mood? Journal"), answers (Wikihow). Voice (speech_to_text). Category-specific (e.g., Pomodoro coaching).


- Why: Personalization; Wysa coaching.


- When: Bubble summon. Auto-load (e.g., "Sleep quest?").


- How: Chat ListView. Offline ML Kit. Premium API mock.


- Mechanics: {type: "pomo", duration:25min}. Suggest: if (mood<3) prompt().


- Logic: Free tease; premium dynamic. Psych: "Last quest rocked!"


7. Category Tabs (All Productivity):


- What:


- To-Do: Subtasks, Kanban, Gmail sync.


- Habits: Streaks, strength formula, Apple Health.


- Sleep: Smart alarms, snoring, lucid tools.


- Mental: Meditations, CBT, SOS.


- Flashcards: AI decks, spaced repetition.


- Fitness: Heart Points, GPS, macros.


- Meditation: Tracks, breathing.


- Language: Leagues, stories.


- Budget: Envelopes, net worth.


- Reading: Shelves, timers.


- Focus: Pomodoro, trees.


- Journal: Mood logs, correlations.


- Meals: Barcode plans, grocery lists.


- Why: Holistic productivity; covers all apps.


- When: Tab switch. Context nudges (e.g., bedtime sleep).


- How: Modular widgets (e.g., PomodoroTimer). Sync (Google Fit). Themes: Diwali habits, Zen meditation, Thanksgiving meals.


- Mechanics: Category XP (+Intellect quizzes).


- Logic: {categoryData}.


---


### Ads/Premium (What, Why, When, How, Mechanics, Logic)


- What: AdMob: App Open (launch), Interstitial (post-task), Rewarded (?50 Coins/10 Gems/Hourly), Banner (dashboard).


- Why: Monetize free; rewarded incentivizes.


- When: Caps (1/hour Open).


- How: google_mobile_ads. onAdComplete: addReward().


- Mechanics: Rewarded: coins += 50.


- Logic: Premium disable. Psych: Ad frustration pushes ?99.


- What: Hourly (?9: ad-free, ALI mini, +20% XP, 10 Gems), Day (?49: +quest), Weekly (?149: +raid boost), Monthly (?399: +50 Gems, PDF), Yearly (?2,999: +100 Gems/month), Lifetime (?4,999: +500 Gems). All: Ad-free, unlimited, ALI, exclusives.


- Why: India-friendly tiers.


- When: Post-task/ad/marketplace.


- How: in_app_purchase. Modals with timers.


- Mechanics: {tier, expiry}.


- Logic: Verify Functions. Psych: Anchoring (?9,999 to ?4,999).


---


### Technical (What, Why, When, How, Mechanics, Logic)


- Packages: riverpod, firebase_*, google_sign_in, google_mobile_ads, in_app_purchase, flutter_local_notifications, fl_chart, hive, intl, share_plus, speech_to_text, flutter_svg, pdf.


- Why: Standard, India-optimized.


- When: Init main.dart.


- How: Firebase.initializeApp(). Hive offline.


- Mechanics: Providers taskProvider). Anim: CustomPainter.


- Logic: Lazy loads. Tests: XP, auto-complete.


Folder: lib/models/TaskModel, screens/CategoriesScreen, etc.


Firebase: Rules {users/{id}: allow if uid==id; marketplace: read all, write auth}.


Sample Code:


- main.dart: Init services.


- TaskCard: Checkbox, coded anim.


- MarketplaceCreator: Form for {asset, ability}.


Extensibility: Collections newCategories). Psych: Tease future.


Memory: Integrates your Solo Leveling World/*LifeQuest* interests (gamified productivity, AI like DevX/Xenz, ?9 microtransactions).


Final Notes: Production-ready, 60fps. Free assets (OpenGameArt: global sprites; Freesound: tabla/zen chimes). Coded anims. Global themes hook all users. ALI and "Forge Your Legend" make HabitQuest irresistible.### Prompt for AI App Builder: Implement Auto Renewal System in "HabitQuest" Flutter App


Objective:


- What: Enhance the "HabitQuest" app with an Auto Renewal System that automatically manages task lifecycles, rewards, and punishments. When a task's due time expires, the system checks completion status: awards rewards (e.g., XP, Gold, Gems) if completed, or applies punishments (e.g., HP deduction, streak reset) if not. After resolution, it auto-generates a new productive task from the same or related category, maintaining momentum. Users have an option to manually create custom tasks, where they define rewards (primarily XP, with optional Gold/Gems tied to difficulty). This system integrates with all productivity categories (To-Do, Habits, Sleep, Mental Health, Flashcards, Fitness, Meditation, Language, Budget, Reading, Focus, Journal, Meals), ensuring seamless RPG progression.


- Why: To boost user engagement by automating task flow, reducing manual input, and creating a dopamine loop (rewards for completion, loss aversion via punishments). It prevents abandonment of unfinished tasks, encourages habit formation (like Habitify's streaks), and adds FOMO (auto-generated tasks keep the "quest" alive). Custom task creation empowers users (personalization from Todoist), while limiting rewards to XP (with ties to difficulty) balances economy, preventing inflation in Gold/Gems. Aligns with psychological hooks: urgency (time expiration), mastery (auto-progression), and autonomy (custom options).


- When: The system triggers on task due time expiration (e.g., midnight for dailies, user-set for To-Dos), checked via background jobs (Flutter's flutter_local_notifications + Workmanager for Android/iOS). Auto-generation happens immediately after resolution. Custom creation is available anytime via a UI button in the tasks screen.


- How: Implemented in Flutter using Firestore for storage (real-time updates via StreamBuilders), Workmanager for background checks (periodic task expiration scans), and flutter_local_notifications for reminders/prompts. Rewards/punishments update user stats atomically via Firestore transactions. Auto-generation uses category-specific templates (e.g., ML Kit or predefined pools for new tasks). Custom tasks via a modal form with XP calculation based on difficulty.


- Mechanics:


- Expiration Check: Poll or listen for due times; if incomplete, deduct HP (e.g., -10), reset streak; if complete, add XP/Gold/Gems.


- Auto-Generation: Pull from a template pool (e.g., "Next Yoga Session" after fitness task), randomize for variety, tie to attributes (e.g., +Strength).


- Custom Creation: User form sets title, category, difficulty (auto-calculates XP: Easy=10, Hard=100); optional due time/reminders.


- Integration: Ties to ALI (suggests tasks), marketplace (buy boosters for auto-tasks), and themes (e.g., Diwali-themed auto-habits).


- Logic: Use Firestore queries to find expired tasks where('due_date', isLessThan: now)); transaction: if (!completed) { stats.hp -= 10; streak = 0; } else { stats.xp += reward; }. Then, generate new task: randomTemplate(category). Custom: xp = difficultyMultiplier * 10; validate to prevent overpowered rewards.


Deliverable:


- Integrate this system into the existing "HabitQuest" Flutter project structure lib/services/auto_renewal_service.dart, etc.). Provide code snippets for background checks, reward/punishment logic, auto-generation algorithms, and custom task form UI. Ensure compatibility with premium tiers (e.g., premium users get milder punishments or bonus auto-tasks). Test with unit tests for expiration logic.


---


### Core System Structure (What, Why, When, How, Mechanics, Logic)


1. Task Expiration Checker:


- What: A background service that scans for expired tasks and resolves them with rewards or punishments.


- Why: Automates accountability, mimicking real-life consequences/rewards to build habits (e.g., Sleep Cycle's phase tracking); prevents task backlog.


- When: Triggers periodically (every hour via Workmanager) or on app open/resume; specifically at due time + grace period (e.g., 5min).


- How: Use Workmanager plugin for background tasks: Workmanager().registerPeriodicTask('expirationCheck', 'checkExpiredTasks'). In code, query Firestore for expired tasks.


- Mechanics: For each expired task: If completed, add rewards (XP + attribute boost); if not, apply punishment (HP deduct, streak reset, notification "Quest failed?try harder!").


- Logic: Query: tasks.where('due_date', isLessThan: DateTime.now()).where('completed', isEqualTo: false). Transaction: Update task completed = false (mark as failed), then user stats.hp -= penalty; stats.streak = 0. Psych: Loss aversion hooks users to complete next time.


2. Reward/Punishment Application:


- What: Post-expiration logic to credit rewards (XP, Gold, Gems, attribute +) or debits (HP -, streak reset, mana drain).


- Why: Reinforces behavior (dopamine for rewards, aversion for punishments); ties to RPG (e.g., HP=0 respawn loses Gold).


- When: Immediately after expiration check, before auto-generation.


- How: Firestore transaction to atomically update task and user stats: Firestore.instance.runTransaction((transaction) { ... }).


- Mechanics: Rewards: xp += difficulty * multiplier; attributes[strength] += 2. Punishments: hp -= 10; if (hp <= 0) { gold /= 2; hp = 100; }. Premium: Milder penalties (e.g., -5 HP).


- Logic: If completed: Boost stats; else: Debit. Notification: flutter_local_notifications.show("Reward Earned: +10 XP!" or "Punishment: -10 HP"). Psych: Variable rewards (5% gem bonus on complete) add excitement.


3. Auto-Task Generation:


- What: Automatically creates a new task in the same/related category after resolution.


- Why: Maintains momentum (like Duolingo's daily goals); reduces decision fatigue, encouraging continuous productivity.


- When: Right after reward/punishment application for an expired task.


- How: Use predefined templates (JSON in assets or Firestore collection task_templates); randomize and add to user's tasks subcollection.


- Mechanics: Template pool: e.g., for "fitness": ["Run 5km", "HIIT Session"]. Assign difficulty based on user level (e.g., Hard for Lv.10+). Set due_date (e.g., next day).


- Logic: newTask = randomTemplate(expiredTask.category); tasks.add(newTask);. If user prefers custom, prompt via notification. Psych: FOMO ("New quest awaits!") hooks return.


4. Custom Task Creation Option:


- What: UI button/form for users to manually create tasks, defining XP rewards based on difficulty.


- Why: Autonomy (Todoist-style customization); allows personal goals while controlling economy (XP primary, Gold/Gems optional via premium).


- When: Available anytime in tasks screen (e.g., "+" button); overrides auto-generation if user opts in.


- How: ModalBottomSheet with TextFields (title, category, difficulty, optional due_date/reminders). Auto-calculate XP: Easy=10, Medium=50, Hard=100.


- Mechanics: Save to tasks subcollection; optional subtasks/history. Tie to attributes (e.g., user selects "Boost Strength").


- Logic: xpReward = difficultyMap[difficulty]; tasks.add({title, ..., xpReward}). Validate: No negative XP, category in enum. Premium: Allow Gold/Gems rewards. Psych: Endowment effect (ownership of custom tasks) boosts engagement.


---


### Technical Integration (What, Why, When, How, Mechanics, Logic)


- What: Background service AutoRenewalService) with Workmanager for checks, Firestore for storage, notifications for alerts.


- Why: Ensures offline-capable automation (Hive syncs expired tasks).


- When: Initialize on app start; periodic every 15min.


- How: Packages: workmanager, cloud_firestore, flutter_local_notifications. Code: Workmanager().initialize(callbackDispatcher);.


- Mechanics: Callback: Query expired tasks, resolve, generate new.


- Logic: Handle edge cases (e.g., offline: Queue in Hive, sync on connect). Unit tests: Mock expiration, verify stats updates.


### UI/UX Enhancements (What, Why, When, How, Mechanics, Logic)


- What: Dashboard shows "Auto-Renewed Quests" section; toggle for "Enable Auto-Renewal" in settings.


- Why: User control; visibility builds trust.


- When: Onboarding intro; settings access anytime.


- How: Switch in SettingsScreen; ListView for renewed tasks.


- Mechanics: Theme-based icons (e.g., Diwali lamp for auto-habits).


- Logic: If disabled, fall back to manual; premium unlocks advanced auto (e.g., ALI-suggested tasks).


### Premium Tie-Ins (What, Why, When, How, Mechanics, Logic)


- What: Premium users get bonus auto-tasks (e.g., +20% XP), milder punishments, or skip renewals.


- Why: Monetization hook; encourages upgrades.


- When: Check subscription_plan during resolution.


- How: In transaction: if (premium) { penalty /= 2; }.


- Mechanics: Lifetime: Unlimited custom rewards.


- Logic: Free: Basic renewals; premium: Enhanced (e.g., gem bonuses).


Output the full updated Flutter project code with this system integrated, ready for flutter run post-Firebase setup. Ensure psychological hooks: Notifications tease "New quest generated?level up now!" for retention.### Payment System Structure for "HabitQuest" App


The payment system in "HabitQuest" uses Google Play Billing (via the in_app_purchase Flutter package) for automatic, instant delivery of purchased items (e.g., premium tiers, Gems) upon successful real-money transactions. It grants access client-side for immediacy (using local storage like Hive), without sole dependence on Firebase?though Firebase can optionally sync/verify for durability. This ensures users get items instantly (e.g., ad-free mode activated right after purchase confirmation), even offline, with background sync to Firebase for server-side consistency (e.g., cross-device support). The system handles one-time purchases (e.g., Lifetime Premium) and subscriptions (e.g., Monthly) with auto-renewal.


#### Payment System Root Components


```


??? Payment Initialization (Service: PaymentService.dart)


? ??? Merchant Account Setup (Google Play Console)


? ? ??? Merchant ID: string (e.g., "merchant_id_from_play_console")


? ? ??? Products/SKUs: array<map> (e.g., [{ id: "hourly_premium", type: "subscription", price: "?9" }])


? ??? In-App Purchase Listener (in_app_purchase package)


? ? ??? Purchase Stream: stream<PurchaseDetails> (listens for updates from Google Play)


? ? ??? Verification: boolean (client-side completePurchase; optional server-side via Firebase Functions)


? ??? Local Storage (Hive for instant grant)


? ? ??? Box: "userPurchases" (e.g., { premium_tier: "monthly", expiry: 2025-10-20T21:00:00Z })


? ? ??? Sync Queue: array<map> (pending syncs to Firebase if offline)


??? Product Catalog (Firestore or Local JSON)


? ??? <product_id> (document or map, e.g., hourly_premium)


? ? ??? name: string (e.g., "Hourly Premium")


? ? ??? type: string (enum: "subscription", "one_time")


? ? ??? price: string (e.g., "?9")


? ? ??? benefits: array<string> (e.g., ["ad_free", "ali_access", "xp_boost_20%"])


? ? ??? duration: int (e.g., 3600) // Seconds for hourly


??? Purchase History (Firestore Subcollection: users/{user_id}/purchases)


? ??? <purchase_id> (document, from Google Play purchaseToken)


? ? ??? product_id: string (e.g., "monthly_premium")


? ? ??? purchase_token: string (e.g., "google_play_token_abc123")


? ? ??? status: string (enum: "completed", "pending", "failed")


? ? ??? amount: string (e.g., "?399")


? ? ??? purchased_at: timestamp (e.g., 2025-09-20T21:00:00Z)


? ? ??? expiry: timestamp (optional for subscriptions)


? ? ??? granted_items: array<string> (e.g., ["ad_free", "gems_50"])


??? Verification Endpoint (Firebase Functions)


? ??? Function: verifyPurchase (Cloud Function)


? ? ??? Input: map (e.g., { purchaseToken: "abc123", productId: "monthly" })


? ? ??? Output: boolean (verified) + updated user stats


??? Auto-Renewal Handler (Workmanager Task)


? ??? Task: "checkSubscriptions" (periodic, e.g., daily)


? ? ??? Checks: array<subscription> (query active subs, renew/expire)


? ? ??? Actions: map (e.g., { renew: "extend_expiry", expire: "downgrade_role" })


```


---


### Detailed Explanation of Structure


#### 1. Payment Initialization (PaymentService.dart)


- What: Central service to initialize IAP, define products, and listen for purchases.


- Why: Ensures automatic setup on app start; handles Google Play connection without Firebase dependency for initial purchase flow.


- When: On app launch (in main.dart or splash screen init).


- How: Use in_app_purchase package: InAppPurchase.instance.isAvailable() checks store availability; queryProductDetails() fetches SKUs from Play Console.


- Mechanics:


- Merchant Account: Setup in Play Console (merchant ID for real-money transactions).


- Products/SKUs: Defined in Play Console (e.g., "hourly_premium" as subscription); fetched dynamically.


- Listener: purchaseStream.listen((details) { if (details.status == PurchaseStatus.purchased) grantItem(details); }).


- Logic: If store unavailable (offline), queue in Hive; on connect, process. Instant grant: Update Hive box, then sync to Firestore. Psych: Instant feedback (e.g., "Premium unlocked!") boosts satisfaction.


#### 2. In-App Purchase Listener


- What: Stream that monitors purchase events from Google Play.


- Why: Enables automatic, instant delivery without waiting for Firebase; client-side confirmation for speed.


- When: Always active after init; triggers on buy button tap (e.g., buyConsumable(product)).


- How: InAppPurchase.instance.buyNonConsumable(purchaseParam: PurchaseParam(productDetails: product));.


- Mechanics:


- Purchase Stream: Handles statuses (pending, purchased, error, restored).


- Verification: Client-side completePurchase() for instant access; optional Firebase Function for server-side (send token via HTTP).


- Logic: On purchased: Grant via Hive (e.g., userPurchases.put('premium_tier', 'monthly')); UI update (e.g., remove ads). If error, refund/notify. For subscriptions, restore on app start restorePurchases()).


#### 3. Local Storage (Hive)


- What: Temporary/instant storage for purchased items.


- Why: Allows offline/instant granting without Firebase dependency; syncs later for durability.


- When: On purchase confirmation; sync on online.


- How: Hive.box('userPurchases').put(key, value);.


- Mechanics:


- Box: Stores premium state, expiry, granted items.


- Sync Queue: If offline, queue updates; on connect, batch to Firestore.


- Logic: Read from Hive for UI (fast); write to Firestore for persistence. Psych: No delay in unlocking features.


#### 4. Product Catalog


- What: List of available IAP products.


- Why: Defines what users can buy; fetched from Play Console for accuracy.


- When: On shop load or purchase flow.


- How: Local JSON fallback; dynamic from InAppPurchase.queryProductDetails().


- Mechanics: Enum for types; benefits array for granting (e.g., loop to apply "xp_boost").


- Logic: Query Firestore for static details if needed; match with Play SKUs.


#### 5. Purchase History (Firestore Subcollection)


- What: Logs all purchases for auditing/sync.


- Why: Provides backup; optional for non-dependency (Hive primary for instant).


- When: Post-purchase sync (online).


- How: users.doc(userId).collection('purchases').add(purchaseData).


- Mechanics: Token for verification; status for refunds.


- Logic: Query: where('status', 'completed').orderBy('purchased_at'). Use for analytics (e.g., total spent).


#### 6. Verification Endpoint (Firebase Functions)


- What: Optional server-side verification of purchase tokens.


- Why: Adds security against tampering; not sole dependency (client grants first).


- When: Post-client grant, in background.


- How: HTTP callable function: functions.https.onCall(verifyPurchase).


- Mechanics: Input: Token/Product; call Google Play API to verify; output: Confirmed, update Firestore stats.


- Logic: If invalid, revoke (e.g., downgrade premium). Use googleapis library in Node.js Function.


#### 7. Auto-Renewal Handler (Workmanager)


- What: Background task for subscription checks/renewals.


- Why: Handles auto-renew without user intervention; integrates with task auto-renewal.


- When: Periodic (daily); on app open.


- How: Workmanager.registerPeriodicTask('renewalCheck', 'checkSubs').


- Mechanics: Query active subs; if expired, downgrade; if renewed (via Google callback), extend.


- Logic: Mock renewal in dev; production: Listen to Google Pub/Sub for real-time renewals.


---


### Integration in Flutter (What, Why, When, How, Mechanics, Logic)


- What: PaymentService class managing all.


- Why: Centralized for automatic handling.


- When: App lifecycle (init, buy, restore).


- How: Add in_app_purchase: ^3.2.0 to pubspec.yaml; initialize in provider.


- Mechanics: Restore on login: InAppPurchase.restorePurchases().


- Logic: Offline: Hive grant; online: Verify + sync. Test: Mock purchases in Play Console.


This structure ensures fully automatic payments with instant delivery, compliant with Google Play policies. For full code, integrate with previous prompts. <grok:render card_id="3d6557" card_type="citation_card" type="render_inline_citation">


<argument name="citation_id">5</argument>


</grok:render><grok:render card_id="2e9eaa" card_type="citation_card" type="render_inline_citation">


<argument name="citation_id">2</argument>


</grok:render><grok:render card_id="65f46b" card_type="citation_card" type="render_inline_citation">


<argument name="citation_id">7</argument>


</grok:render>### Prompt for AI App Builder: Implement All Types of Ads in "HabitQuest" Flutter App


Objective:


- What: Integrate all four types of AdMob ads?App Open Ads (full-screen on launch), Interstitial Ads (full-screen between actions), Rewarded Ads (watch for rewards like Gems or Hourly Premium), and Banner Ads (persistent bottom bars)?into the "HabitQuest" app. This system makes ads non-intrusive yet monetization-effective, with automatic handling for loading, display, and rewards. Ads are shown only to free users, instantly removed for premium subscribers. The implementation ensures psychological hooks (e.g., frustration from interruptions pushes upgrades) and ties into the RPG mechanics (e.g., rewarded ads grant in-game loot).


- Why: To monetize the free tier while encouraging premium upgrades (e.g., ad-free experience). App Open sets initial revenue, Interstitial capitalizes on pauses, Rewarded incentivizes engagement (dopamine from "free" Gems), and Banner provides steady impressions. Aligns with Google's AdMob policies, boosts retention by tying ads to game progression, and uses frustration (ads mid-quest) for loss aversion hooks. Non-dependency on Firebase for ad loading (client-side via AdMob SDK) ensures instant display even offline.


- When: App Open: On app launch/resume (after 5s skippable). Interstitial: Natural breaks (post-task completion, tab switch, level-up; 1 per session). Rewarded: User-initiated (e.g., shop prompt "Watch for 10 Gems?"). Banner: Persistent on dashboard/tasks screens (collapsible to minimize annoyance). Ads disabled instantly on premium purchase/expiry check.


- How: Use the google_mobile_ads Flutter package for AdMob integration. Initialize in main.dart, load ads in services (e.g., AdService.dart), and display via widgets (e.g., BannerAdWidget). Tie to user state (Hive for local premium check, Firestore sync). Rewards processed client-side (update Hive stats) with optional Firebase verification. Handle test IDs for development, live IDs for production. Ensure GDPR consent (ad_consent field from database).


- Mechanics:


- App Open: Loads on init, shows splash-like; skippable after 5s.


- Interstitial: Preloads, triggers on events; non-skippable but short.


- Rewarded: User watches full ad; callback grants rewards (e.g., gems += 10).


- Banner: Adaptive size (bottom anchored); auto-refreshes every 60s.


- Premium Check: if (Hive.box('userPurchases').get('premium_tier') != 'none') hideAllAds;.


- Offline Handling: Queue impressions in Hive; sync analytics on connect.


- Logic: Use AdMob's MobileAds.instance.initialize(); load with test IDs ca-app-pub-3940256099942544~3347511713). On load success, show; on callback (e.g., onUserEarnedReward: grantGems()). Frequency caps: 1 App Open/hour, 1 Interstitial/session. Psych: Rewarded teases "Boost your quest?watch now!" for voluntary engagement.


Deliverable:


- Update the "HabitQuest" Flutter project with AdMob integration: Add google_mobile_ads: ^5.1.0 to pubspec.yaml; create AdService.dart for loading/display; widgets for each ad type (e.g., AppOpenAdManager). Provide code snippets for initialization, event triggers, and reward handling. Ensure ads respect ad_consent (non-personalized if false). Test with AdMob test IDs; include A/B testing via Firebase Remote Config for ad frequency. Make system fully automatic: Ads load/preload in background, rewards grant instantly on callback, without manual Firebase checks for core flow.


---


### Core Ad Types Structure (What, Why, When, How, Mechanics, Logic)


1. App Open Ads:


- What: Full-screen ad shown on app launch/resume.


- Why: High-impression entry point; monetizes cold starts without disrupting core gameplay.


- When: App foreground (after splash, if not premium).


- How: AppOpenAd.load(adUnitId: testId, request: AdRequest()); show on WidgetsBinding.instance.addPostFrameCallback.


- Mechanics: Skippable after 5s; preload on init.


- Logic: if (!isPremium && lastAdShown > 1 hour ago) showAd; update last_ad_shown in Hive. Psych: Brief interruption builds desire for ad-free premium.


2. Interstitial Ads:


- What: Full-screen ad between app actions.


- Why: Capitalizes on natural pauses; frustration pushes upgrades (e.g., ad mid-level-up).


- When: Post-task, tab switch, level-up (cap 1/session).


- How: InterstitialAd.load(adUnitId: testId); ad.show();.


- Mechanics: Preload 1-2 ads; auto-dismiss after close.


- Logic: if (!isPremium && sessionAds < 1) loadAndShow; sessionAds++ in Hive. Psych: Timing creates "just one more task" urge post-ad.


3. Rewarded Ads:


- What: Video ad users watch for in-game rewards.


- Why: Voluntary; ties to RPG (e.g., "Watch for 10 Gems!"), boosting engagement without annoyance.


- When: Shop/marketplace prompt, streak saver, or low HP boost.


- How: RewardedAd.load(adUnitId: testId); ad.show(onUserEarnedReward: (ad, reward) { grantReward(reward.amount); });.


- Mechanics: Callback grants instantly (update Hive stats, e.g., gems += 10).


- Logic: if (!isPremium) showPrompt; onEarn: stats.gems += amount; sync to Firestore. Psych: Variable rewards (random bonus Gems) add excitement.


4. Banner Ads:


- What: Small, persistent ad at screen bottom.


- Why: Steady revenue without interrupting flow; collapsible for UX.


- When: On dashboard/tasks screens (hide in quests/premium).


- How: BannerAd(size: AdSize.banner, adUnitId: testId); AdWidget(ad: bannerAd); in Stack/Positioned.


- Mechanics: Auto-load/refresh every 60s; adaptive to screen size.


- Logic: if (!isPremium) loadBanner; dispose on screen exit. Psych: Subtle presence reminds of premium ad-free benefits.


---


### Technical Integration (What, Why, When, How, Mechanics, Logic)


- What: AdService class managing all ad types.


- Why: Centralized control; automatic loading based on premium status.


- When: Init in main.dart: await MobileAds.instance.initialize();.


- How: Test IDs: Banner ca-app-pub-3940256099942544/6300978111, etc. Consent: ConsentInformation.instance.requestConsentInfoUpdate().


- Mechanics: Premium check from Hive/Firestore; disable: ad.dispose().


- Logic: Offline: No ads (AdMob requires network); impressions logged in Hive, sync later. Unit tests: Mock loads/callbacks.


### Premium & Monetization Tie-Ins (What, Why, When, How, Mechanics, Logic)


- What: Ads auto-disable on premium grant (from in_app_purchase callback).


- Why: Instant value post-purchase; hooks upgrades.


- When: On purchase complete/restore.


- How: Hive.box('userPurchases').put('isPremium', true); AdService.disableAll();.


- Mechanics: Check isPremium before any ad load/show.


- Logic: If expired (Workmanager check), re-enable ads. Psych: "Ad-free activated!" notification reinforces buy.


Output the full updated Flutter project code with AdMob integrated, ready for flutter run post-AdMob setup. Ensure psychological hooks: Post-ad nudges like "Upgrade to skip ads forever!" for conversions.### Instant Grant System for Purchases in "HabitQuest" App


To address your requirement, I'll outline a comprehensive structure for an "Instant Grant System" in the "HabitQuest" Flutter app. This system ensures that after any Google In-App Purchase (IAP) completion?whether for premium tiers (e.g., Hourly, Monthly, Lifetime) or items (e.g., Gems packs, custom boosters)?all associated features and items are granted instantly, in both online and offline scenarios, without sole dependence on Firebase. Instead, it prioritizes local storage (Hive) for immediate application, with optional background sync to Firebase for persistence and cross-device support. This makes the system robust, user-friendly, and psychologically rewarding (instant gratification boosts dopamine and retention).


The structure is designed for Flutter integration, using in_app_purchase for IAP and Hive for local caching. It aligns with the app's RPG mechanics (e.g., premium unlocks ad-free mode, extra XP boosts), ensuring no delays in granting (e.g., ads disable immediately post-purchase confirmation).


#### Instant Grant System Root Components


```


??? Purchase Listener (Service: PurchaseService.dart)


? ??? IAP Initialization (in_app_purchase package)


? ? ??? Store Connection: boolean (isAvailable check)


? ? ??? Product Catalog: array<map> (e.g., [{ id: "hourly_premium", type: "subscription", benefits: ["ad_free", "ali_full", "xp_boost_20%"] }])


? ??? Purchase Stream: stream<PurchaseDetails> (listens for Google Play events: pending, purchased, error, restored)


? ? ??? Status Handler: map (e.g., { purchased: "grantInstantly", restored: "restoreFromLocal" })


? ??? Verification: boolean (client-side completePurchase; optional server-side mock for offline)


??? Local Grant Storage (Hive Boxes)


? ??? Box: "purchases" (e.g., { premium_tier: "monthly", expiry: 2025-10-20T21:00:00Z, granted_features: ["ad_free", "unlimited_tasks"] })


? ??? Box: "items" (e.g., { gems_pack_100: { quantity: 100, granted_at: 2025-09-20T21:00:00Z } })


? ??? Offline Queue: array<map> (e.g., [{ action: "sync_purchase", data: { product_id: "gems_pack" } }])


??? Feature/Application Logic (Providers/Services)


? ??? Premium Checker: function (isPremium(): bool from Hive)


? ? ??? Feature Gates: map (e.g., { ad_free: "hideAds()", ali_full: "unlockALI()" })


? ??? Item Granter: function (grantItem(productId): void updates stats/inventory in Hive)


? ??? Expiry Handler (Workmanager Task)


? ? ??? Task: "check_expiry" (periodic, e.g., hourly)


? ? ??? Actions: map (e.g., { expired: "revokeFeatures", active: "keepGranted" })


??? Optional Firebase Sync (Subcollection: users/{user_id}/purchases)


? ??? <purchase_id> (document, from purchaseToken)


? ? ??? product_id: string (e.g., "monthly_premium")


? ? ??? status: string (enum: "active", "expired")


? ? ??? granted_at: timestamp (e.g., 2025-09-20T21:00:00Z)


? ? ??? expiry: timestamp (optional for subscriptions)


? ? ??? benefits: array<string> (e.g., ["ad_free", "gems_100"])


```


---


### Detailed Explanation of Structure


#### 1. Purchase Listener (PurchaseService.dart)


- What: Core service that listens to Google IAP events and triggers instant grants.


- Why: Ensures automatic, real-time response to purchases without waiting for Firebase; handles all IAP types (subscriptions, consumables like Gems).


- When: Always active after app init; triggers on buy/restore events.


- How: InAppPurchase.instance.purchaseStream.listen((details) { if (details.status == PurchaseStatus.purchased) grantFromLocal(details); });.


- Mechanics:


- Store Connection: Check isAvailable(); if false (offline), queue in Hive.


- Product Catalog: Fetched from Play Console; maps benefits (e.g., premium unlocks "unlimited_tasks").


- Status Handler: On "purchased," call completePurchase() and grant via Hive.


- Logic: If offline, store pending in Hive queue; on online, process and sync to Firebase (optional for backup). Psych: Instant toast "Premium unlocked!" reinforces buy.


#### 2. Local Grant Storage (Hive)


- What: Persistent local storage for granted features/items.


- Why: Enables instant, offline grants (no network dependency); Firebase is only for optional sync (e.g., cross-device).


- When: On purchase confirmation; read on app start/UI refresh.


- How: Hive.initFlutter(); Hive.openBox('purchases'); box.put('premium_tier', 'monthly');.


- Mechanics:


- "purchases" Box: Stores tier/expiry; auto-calculates active status (e.g., if expiry > now).


- "items" Box: Adds quantities (e.g., gems += 100); consumables like Gems update stats.


- Offline Queue: If Firebase sync fails, queue and retry on connect.


- Logic: Grant: box.put(key, value); applyFeatures(); (e.g., disable ads via AdService). Expiry: Check expiry < DateTime.now() to revoke. Psych: Offline grants maintain flow, building trust.


#### 3. Feature/Application Logic (Providers/Services)


- What: Applies grants to app features (e.g., unlock ALI, add Gems).


- Why: Instant application post-purchase; ties to RPG (e.g., premium boosts XP multiplier).


- When: Immediately after Hive update; checked on every screen build (Riverpod provider).


- How: Riverpod notifier: ref.watch(premiumProvider): if (isPremium) unlockAll();.


- Mechanics:


- Premium Checker: bool isPremium = Hive.box('purchases').get('premium_tier') != 'none' && expiry > now;.


- Feature Gates: Loop benefits (e.g., "ad_free" calls AdService.disable()).


- Item Granter: stats.gems += quantity; inventory.add(item);.


- Logic: Revoke on expiry: if (!isPremium) enableAds(); removeBoosts();. For subscriptions, Workmanager checks daily. Psych: Seamless transition (e.g., "Features unlocked!" animation) hooks satisfaction.


#### 4. Optional Firebase Sync


- What: Backup subcollection for purchases.


- Why: Persistence/cross-device (e.g., restore on new phone); not required for instant grants.


- When: Background after local grant (online only).


- How: users.doc(userId).collection('purchases').add(data);.


- Mechanics: Stores token for verification; benefits for restore.


- Logic: On app start, if Hive empty, pull from Firebase; else, use Hive. If conflict, prioritize local. Psych: No user impact if offline.


#### 5. Expiry Handler (Workmanager)


- What: Background task for subscription expiry/renewal checks.


- Why: Automatic revocation (e.g., end ad-free after hourly expiry) without constant polling.


- When: Periodic (hourly/daily); on app open.


- How: Workmanager.registerPeriodicTask('expiryCheck', 'checkPurchases');.


- Mechanics: Scan Hive for expiries; revoke features (e.g., enable ads).


- Logic: if (expiry < DateTime.now()) { box.put('premium_tier', 'none'); applyRevoke(); }. For auto-renew (Google handles), listen for updates via in_app_purchase stream.


---


### Implementation in Flutter (What, Why, When, How, Mechanics, Logic)


- What: PurchaseService class with methods like grantPremium(tier), grantItem(productId).


- Why: Modular for automatic grants; offline-first.


- When: On purchase stream callback.


- How: Add in_app_purchase, hive_flutter, workmanager to pubspec.yaml.


- Mechanics: Init Hive in main.dart; stream listener in provider.


- Logic: Mock in tests; production: Real Play Billing. Handle restores: restorePurchases() on login, grant from history.


This structure ensures fully automatic, instant grants for all purchases, online/offline, without Firebase dependency for core flow. For code, integrate with previous prompts.### Prompt for AI App Builder: Implement Fully Automated Local Systems in "HabitQuest" Flutter App


Objective:


- What: Redesign the "HabitQuest" app's core systems?task renewal (auto-expiration, completion checks, and new task generation), reward giving (XP, Gold, Gems, attribute boosts), achievement giving (milestone unlocks), all record-keeping (task history, stats, journal logs, purchase history, ad tracking), and everything else (e.g., streak calculations, level-ups, ALI suggestions, marketplace transactions, premium feature grants, ad displays)?to be fully automated and independent of any cloud database (e.g., no Firebase dependency for core logic). All operations rely solely on the app itself using local storage (Hive or SQflite), device capabilities (e.g., timers, notifications), and background processing, ensuring offline-first functionality with instant, automatic execution. The app remains a gamified productivity RPG covering all categories (To-Do, Habits, Sleep, etc.), but shifts to a self-contained model for privacy, speed, and no-network reliability.


- Why: To eliminate cloud dependencies, reducing costs, latency, and privacy risks (no data sent to servers); enables true offline automation (e.g., task renewal runs on-device). This boosts user trust (data stays local), improves performance (instant updates without sync waits), and aligns with psychological hooks (seamless dopamine loops from auto-rewards without delays). In regions with poor connectivity (e.g., India), it ensures uninterrupted quests, preventing frustration. Local automation handles everything from expiration checks to achievement unlocks, making the app "solely app-dependent" as required.


- When: All systems trigger automatically based on device events: Task renewal on due time (via alarms/timers); rewards/achievements on completion/expiration (real-time checks); records updated instantly on actions (e.g., task finish); premium grants on IAP callback (local Hive update); ad displays on screen loads (AdMob local load). Background tasks run periodically (e.g., daily streak reset at midnight).


- How: Use Flutter packages like hive_flutter (local NoSQL storage for stats, tasks, history), workmanager (background automation for checks/renewals), flutter_local_notifications (alerts for expirations/rewards), alarm_manager_plus (precise timers for task due dates), and in_app_purchase (local IAP grants). Remove all Firestore references; replace with Hive boxes (e.g., 'tasksBox', 'statsBox'). Automation via device schedulers (e.g., Workmanager for daily renewals) and event listeners (e.g., Riverpod watchers for real-time updates). For records, use Hive's key-value or list storage with auto-backups to device files.


- Mechanics:


- Task Renewal: Device timer checks due dates; if expired, auto-resolve (complete/incomplete), apply rewards/punishments, generate new task from local templates.


- Reward Giving: On completion/expiration, instantly update local stats (e.g., xp += 10 in Hive); variable loot (random local calc).


- Achievement Giving: Milestone checks (e.g., tasksCompleted >= 100) trigger unlocks, add rewards to stats.


- Record-Keeping: All history (tasks, purchases, ads) in Hive lists/maps; auto-prune old records (e.g., keep 30-day history).


- Other Systems: ALI suggestions via local ML (Flutter ML Kit); marketplace as local simulated trades (or P2P if networked, but local inventory); ads via AdMob local loads; IAP grants update Hive instantly.


- Offline Automation: Everything runs on-device; no sync needed, but optional export/import for backups.


- Logic: Use timers/notifications for time-based events (e.g., alarm for due_date); event-driven updates (e.g., on task check: if completed, xp += reward; else hp -= 10; generateNewTask(category)). Randomization (Dart's Random()) for loot/auto-tasks. Validation: Local checks (e.g., if premium, skip punishments). Psych: Instant local feedback (e.g., confetti anim on reward) creates seamless loops.


Deliverable:


- Update the "HabitQuest" Flutter project to remove all cloud dependencies (e.g., no Firebase imports); replace with local Hive/SQflite for all data. Provide full code for automated systems (e.g., AutoRenewalService.dart for task/achievement logic, LocalRecordKeeper.dart for history). Ensure app runs fully offline with instant grants (e.g., premium from IAP updates Hive, disables ads locally). Include unit tests for automation (e.g., mock timers for expiration). Make extensible for future local features (e.g., device backups).


---


### Core Systems Structure (What, Why, When, How, Mechanics, Logic)


1. Task Renewal System:


- What: Automatic expiration check, resolution, and new task generation, all local.


- Why: Keeps quests flowing without user input; builds habits via auto-accountability.


- When: On due_date (set alarm via alarm_manager_plus); or periodic Workmanager scan (hourly).


- How: Hive box 'tasksBox' stores tasks; Workmanager task scans expired (due_date < DateTime.now()).


- Mechanics: If completed, grant reward; else punishment; generate new from local JSON templates (e.g., fitness: ["Run 5km"]).


- Logic: for (task in tasksBox.values) if (expired && !completed) { hp -= 10; streak = 0; } else { xp += 10; } addNewTask(randomTemplate(task.category));. Psych: Notification "New quest generated!" hooks engagement.


2. Reward Giving System:


- What: Instant local crediting of XP, Gold, Gems on completion/achievement.


- Why: Immediate gratification reinforces behavior; no cloud delay.


- When: Real-time on task complete (button tap) or auto-renewal.


- How: Riverpod notifier watches 'statsBox'; update on event.


- Mechanics: statsBox.put('xp', xp + reward); attributesBox.put('strength', strength + 2);.


- Logic: Calc: reward = difficulty * multiplier; if (Random().nextDouble() < 0.05) gems += 1;. Psych: Coded confetti anim on grant.


3. Achievement Giving System:


- What: Auto-unlock badges/milestones with rewards, stored locally.


- Why: Motivates progression; local for offline unlocks.


- When: On stat changes (e.g., tasksCompleted++ >= 100).


- How: Hive 'achievementsBox'; listener on stats updates.


- Mechanics: if (milestoneMet) achievementsBox.add({name: "Slayer", reward: 50}); grantReward(50);.


- Logic: Check in transaction-like Hive batch: Mock with futures. Psych: Toast "Achievement unlocked!" with sound.


4. Record-Keeping System:


- What: Local logging of all history (tasks, purchases, ads, journal).


- Why: Full app self-sufficiency; enables local analytics (e.g., mood trends for ALI).


- When: On every action (e.g., task complete, ad shown).


- How: Hive 'historyBox' as list; prune old (e.g., >30 days delete).


- Mechanics: historyBox.add({type: "task_complete", details: {taskId: id, timestamp: now}});.


- Logic: Query: Filter list by date/type client-side. Psych: Local charts (fl_chart) show progress without cloud.


5. Other Automated Systems:


- What: ALI (local ML suggestions), Marketplace (local inventory simulation), Ads (AdMob local loads, disabled via Hive premium check), IAP Grants (in_app_purchase callback updates Hive instantly).


- Why: Complete local automation; offline play.


- When: On events (e.g., ALI on dashboard load; ads on screen init).


- How: ML Kit for ALI; Hive for inventory trades (simulated P2P if Bluetooth, but local default).


- Mechanics: IAP: onPurchased: hive.put('premium', true); disableAdsLocal();.


- Logic: Premium check: hive.get('premium') ? unlock : lock;. Psych: Instant "Unlocked!" builds loyalty.


---


### Technical Integration (What, Why, When, How, Mechanics, Logic)


- What: Local services (e.g., LocalAutoService.dart) for all automation.


- Why: Self-contained app; no network calls for core functions.


- When: App init: Load Hive; background: Workmanager for timers.


- How: Packages: hive_flutter, workmanager, alarm_manager_plus, flutter_local_notifications.


- Mechanics: Init: Hive.initFlutter(); openBox('tasksBox'); Workmanager.initialize();.


- Logic: Offline: All works; backups: Export Hive to file (share_plus). Tests: Mock timers for renewal.


### Premium & Monetization Tie-Ins (What, Why, When, How, Mechanics, Logic)


- What: Local Hive grants for IAP (e.g., premium unlocks unlimited tasks instantly).


- Why: No cloud delay; offline upgrades.


- When: On IAP callback.


- How: hive.put('subscription_plan', 'monthly'); applyGrants();.


- Mechanics: Expiry: Local timer checks/revokes.


- Logic: Restore: On start, check Hive; if expired, downgrade. Psych: "Features unlocked offline!" encourages buys.


Output the full updated Flutter project code with local automation, ready for flutter run. Ensure psychological hooks: Local notifications for auto-events (e.g., "Reward granted?keep questing!").### Prompt for AI App Builder: Implement Hybrid Dual Storage System in "HabitQuest" Flutter App


Objective:


- What: Redesign the "HabitQuest" app to implement a hybrid dual storage system where every piece of data (user profiles, tasks, stats, achievements, journal entries, inventory, purchase history, ad tracking, marketplace items, parties, challenges, and all other app records like streaks, rewards, ALI interactions, and themes) is stored in both Firebase Firestore (cloud) and locally (using Hive or SQflite). However, the app must be mainly dependent on local storage and the app itself for all operations?meaning local data is the primary source for reads/writes, automation (e.g., task renewal, rewards), and offline functionality. Firebase serves only as a secondary backup for sync, cross-device persistence, and optional online features (e.g., social parties). This ensures the app functions fully autonomously on-device, with automatic, seamless sync to Firebase when online.


- Why: To combine the reliability of local storage (instant access, offline-first, no latency/network dependency, privacy) with Firebase's benefits (backup, multi-device sync, scalability for social features). Main dependency on local/app makes the app resilient (e.g., poor connectivity in India), faster (local reads <1ms vs. Firebase 100ms+), and self-contained, aligning with user expectations for a productivity RPG (uninterrupted quests). Psychologically, instant local ops create smooth dopamine loops (e.g., immediate rewards), while sync provides peace of mind without compromising core flow.


- When: Local storage is used for all real-time ops (e.g., task creation/completion, reward granting, achievement unlocks); Firebase sync triggers on app open/resume, background (Workmanager), or key events (e.g., purchase complete). Dual write: Every local change queues for Firebase sync when online. Reads: Always local first; fallback to Firebase only on first install or data corruption.


- How: Use Hive_flutter for local NoSQL (fast, lightweight boxes for structured data like tasks/stats); flutter_local_notifications/Workmanager for local automation (e.g., task expiration checks). For dual ops: Write to Hive instantly, then queue for Firebase (cloud_firestore batch writes). Reads: Hive.get() primary; if missing/corrupt, pull from Firebase and cache locally. Offline: Queue changes in Hive 'syncQueue' box; process on connect. Remove full Firebase dependency for core logic?app runs 100% local if Firebase unavailable.


- Mechanics:


- Dual Write: On create/update (e.g., new task): Hive.put() instant; add to syncQueue for Firebase.set() when online.


- Dual Read: Hive.get() first; if null, Firebase.get() and Hive.put() for cache.


- Sync Queue: Hive list of ops (e.g., {action: "set", path: "users/{uid}/tasks/{id}", data: {...}}); process FIFO on connect.


- Automation Local: Task renewal/rewards via device timers (alarm_manager_plus); no cloud triggers.


- Conflict Resolution: Timestamp-based (local wins if newer); or merge (e.g., add XP from both).


- Data Categories: All (tasks, stats, purchases)?e.g., tasks in Hive 'tasksBox' (key: taskId, value: Map), mirrored in Firestore subcollection.


- Logic: Primary flow: Local ops only (e.g., completeTask: Hive.update(stats), checkAchievement: local calc). Sync: Background Workmanager scans queue, batches to Firebase (e.g., if queue.length > 0 && isOnline, firestore.batch().set(...)). Error: Retry queue on fail. Purge old queue (e.g., >7 days). Psych: Local-first ensures "instant" feel (e.g., reward confetti without sync wait).


Deliverable:


- Update "HabitQuest" Flutter project: Add hybrid services (e.g., HybridStorageService.dart for dual read/write); replace all direct Firestore calls with hybrid wrappers (e.g., hybridSet(path, data): Hive.put + queueForFirebase). Provide code for sync queue processing, local automation (e.g., Workmanager for renewal), and offline simulation. Ensure app boots/runs fully local (mock Firebase offline). Include unit tests for dual sync/conflicts. Make extensible for future data (e.g., new categories auto-hybrid).


---


### Core Storage Structure (What, Why, When, How, Mechanics, Logic)


1. User Profiles/Stats:


- What: Dual store user data (email, avatar, stats, attributes, subscription).


- Why: Core identity; local for instant dashboard loads.


- When: On signup/login (local create, queue sync); update on changes (e.g., level-up).


- How: Hive 'usersBox' (key: 'profile', value: Map); Firestore users/{uid}.


- Mechanics: Write: Hive.put('profile', data); queue {action: 'set', path: 'users/{uid}', data}.


- Logic: Read: Hive.get('profile') ?? firebaseGetAndCache(). Psych: Instant stat updates hook progression.


2. Tasks/Subcollections:


- What: Local box for tasks; mirrored in Firestore subcollection.


- Why: Hierarchical but local-first for queries (Hive lists).


- When: On add/complete/renew (local instant, sync queue).


- How: Hive 'tasksBox' (key: taskId, value: Map); Firestore users/{uid}/tasks/{id}.


- Mechanics: Renewal: Local timer scans 'tasksBox', resolves, generates new (add to box, queue).


- Logic: Query: Hive.values.where((task) => task['category'] == 'fitness'); sync batch.


3. Rewards/Achievements:


- What: Local calc/grant; store in 'statsBox'/'achievementsBox'.


- Why: Instant dopamine; no cloud for unlocks.


- When: On completion/milestone (local check).


- How: Hive update; queue for Firestore.


- Mechanics: if (completed) statsBox.put('xp', xp + reward); achievementsBox.add(unlock);.


- Logic: Local if (tasksCompleted >= 100) grant; psych: Immediate anim.


4. Records/History:


- What: Local lists for all logs (tasks, purchases, ads).


- Why: Offline analytics (e.g., mood trends).


- When: On every action.


- How: Hive 'historyBox' (append Map).


- Mechanics: Prune: If length > 1000, delete old.


- Logic: Filter local list for charts; queue sync.


5. Purchases/Premium:


- What: Local grant on IAP callback; store in 'purchasesBox'.


- Why: Instant offline unlocks (e.g., ad-free).


- When: On purchase/restore.


- How: in_app_purchase callback: Hive.put('premium', true); applyFeatures().


- Mechanics: Expiry: Local timer checks/revokes.


- Logic: No Firebase for grant; optional sync for backup.


6. Other Systems (ALI, Marketplace, Ads):


- What: Local ML for ALI; simulated marketplace/inventory in Hive; AdMob local loads.


- Why: Full autonomy.


- When: On events (e.g., ALI on load).


- How: Hive for data; device capabilities for automation.


- Mechanics: Marketplace: Local 'inventoryBox'; trades simulated (or Bluetooth P2P).


- Logic: Ads: Check local 'premium' before load.


---


### Technical Integration (What, Why, When, How, Mechanics, Logic)


- What: HybridStorageService with localPrimary wrappers.


- Why: Abstracts dual ops; main local focus.


- When: All data access via service.


- How: Packages: hive_flutter, workmanager, connectivity_plus (for sync trigger).


- Mechanics: Init: Hive.openBox('tasksBox'); Workmanager for sync/automation.


- Logic: isOnline: connectivity.check(); if yes, processQueue (batch Firebase writes). Errors: Retry queue. Tests: Mock connectivity.


Output updated Flutter project code with hybrid storage, ready for flutter run. Ensure psychological hooks: Local notifications for auto-events (e.g., "Task renewed locally?quest on!").### Prompt for AI App Builder: Implement Constant Background Execution for "HabitX" Flutter App


Objective:


- What: Enhance the "HabitX" Flutter app to run continuously in the background, ensuring all in-memory systems?task renewal (auto-expiration checks, completion resolution, new task generation), reward giving (XP/Gold/Gems/attribute boosts), achievement giving (milestone unlocks), record-keeping (temporary logs), buying system (IAP flags), ad management (AdMob displays), ALI suggestions, marketplace (in-memory trades), and all other automated features (e.g., streaks, level-ups, auto-complete with ?9, global theme generation)?operate seamlessly even when the app is minimized or the device is locked. This redesign maintains the app's fully in-memory, code-only nature (no external assets or persistent storage), with all visuals (procedural images), sounds (synthesized audio), and BGM (generated tones) running in the background. The system must handle background execution across Android/iOS, keeping the RPG quest flow alive for productivity tracking.


- Why: To provide uninterrupted habit tracking and gamification (e.g., tasks renew/reward in real-time even when users switch apps), enhancing user engagement by maintaining session continuity (e.g., streaks persist in memory until app close). This aligns with psychological hooks like urgency (FOMO: "Quest expires soon!"), immersion (BGM plays softly), and habit reinforcement (auto-notifications prompt returns). Constant background execution ensures the app feels "alive" offline, boosting retention without network/local storage dependency, and leverages device capabilities for a fully app-driven experience.


- When: Background execution starts on app minimize/lock and persists until app close/restart (data reset). Task renewal checks run every minute; rewards/achievements trigger on computed events; notifications/alerts fire on key actions (e.g., task due, reward earned); BGM loops softly; procedural visuals update periodically (e.g., avatar evolves every 5 minutes). All systems remain active as long as the device is on.


- How: Use Flutter's background execution capabilities with workmanager (for periodic tasks), isolates (for heavy computation like image/sound generation), and flutter_local_notifications (for alerts from background). Implement a persistent in-memory state manager (e.g., Riverpod with a background notifier) to maintain data (e.g., List<Task> tasks, Map<String, dynamic> stats) across app states. Generate background BGM via code-synthesized audio (e.g., sine wave loops with dart:math), visuals via Canvas updates in isolates, and handle IAP/ad callbacks in background threads. No external assets/storage?everything (images, sounds, logic) is code-derived and kept in RAM.


- Mechanics:


- Background State: Maintain in-memory data (e.g., tasks, stats) in a singleton or isolate, updated by background tasks.


- Task Renewal: Timer in Workmanager isolate checks _tasks for expired due times, resolves (rewards/punishments), generates new tasks via code templates.


- Reward/Achievement Giving: Compute in background on events (e.g., task complete flag), update stats/achievements, trigger notifications.


- BGM/Sounds: Generate continuous audio in isolate (e.g., modulate frequency for RPG mood), play via audioplayers with code waves.


- Notifications: Send alerts (e.g., "Task due!") from background to re-engage users.


- IAP/Ads: Handle callbacks in background, set memory flags (e.g., _isPremium = true), load ads via AdMob isolates.


- No Persistence: Data resets on app close/restart; background keeps session alive until then.


- Logic: Use Workmanager to schedule periodic tasks (e.g., every 60s check _tasks); isolates for parallel audio/image gen (avoid UI thread block). Background notifier updates UI on resume. Timer-based events (e.g., if due < now) trigger logic; notifications use platform channels. Psych: Soft BGM and "Quest updated!" alerts create immersive pull-back.


Deliverable:


Generate the full Flutter project code for "HabitX" with constant background execution, ready for flutter run. Ensure all systems (task renewal, rewards, etc.) run in-memory/code-only, with no external assets/storage. Include psychological hooks (e.g., background chime on reward) and seamless transition on app resume.### Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App


Objective:


- What: Redesign and build "HabitX," a Flutter app that serves as a gamified habit tracker and productivity RPG, blending features from Habitica (quest-based tasks, social parties, avatar progression) and Life Up (attribute-driven growth, self-rewards, achievement tracking), expanded to all productive categories (To-Do: subtasks/priorities/Kanban; Habits: streaks/strength; Sleep: alarms/snoring; Mental: meditations/CBT; Flashcards: spaced repetition/AI decks; Fitness: Heart Points/GPS/macros; Meditation: tracks/breathing; Language: leagues/stories; Budget: envelopes/net worth; Reading: shelves/timers; Focus: Pomodoro/trees; Journal: mood logs/prompts; Meals: barcode plans/grocery lists). Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI AI for coaching. Include marketplace for custom items (AI-generated assets/abilities, sell/trade), ?9 auto-complete all tasks, all four AdMob ad types, Google IAP for premium tiers/items (instant grants). The redesign mandates using only non-copyrightable assets from the internet (e.g., public domain/CC0 images, sounds, BGM from sites like OpenGameArt.org, Freesound.org, FreeMusicArchive.org), fetched and implemented dynamically in the project. All data (user profiles, tasks, stats, achievements, journal, inventory, purchase history, ad tracking, marketplace items, parties, challenges, and everything else) stored hybridly in RAM (in-memory for instant access), local (Hive/SQflite for device persistence), and cloud (Firebase Firestore for backup/sync). Systems fully automatic: Instant item grants on Google IAP buys, auto ads at perfect timings, task renewal with rewards/punishments, marketplace trades with instant exchanges/prices, notifications at ideal moments, reward giving (including rewarded ads), and all management/features (e.g., level-ups, ALI suggestions, streaks).


- Why: To ensure legal safety and variety with non-copyrightable assets (dynamic fetch prevents static bundles), while hybrid storage balances speed (RAM for instant ops), reliability (local for offline), and sync (cloud for multi-device). Automatic everything reduces user friction, boosts engagement via dopamine (instant rewards/grants), and leverages psychological hooks (urgency from auto-renewals, FOMO from timed ads/notifications). Dependency on Google Billing for buys ensures secure, platform-native payments with instant app-level grants, without sole reliance on cloud/local for core delivery.


- When: Assets fetched once on install/first launch (stored locally post-fetch); data in RAM during runtime (instant reads/writes), persisted locally on changes/exit, synced to cloud on online/background. IAP grants trigger instantly on billing callback (RAM flag set, features unlock); ads auto-show on start (App Open) and timings (e.g., Interstitial post-task, Rewarded on shop prompt, Banner persistent). Task renewal on due expiration (background timers); rewards/punishments instant on check; trades instant on confirmation; notifications at events (e.g., task due 5min before, reward on complete).


- How: Built in Flutter/Dart; fetch assets via HTTP (e.g., dio package) from non-copyrightable sources (search/query for CC0/public domain images/sounds/BGM, download to app's documents dir for reuse). Hybrid storage: RAM (Riverpod notifiers/lists for real-time), local (Hive boxes for persistence across sessions), cloud (Firestore batch sync in background). Google IAP (in_app_purchase): Callback sets RAM flag, instantly unlocks (e.g., disable ads, add Gems to RAM/inventory), then persists local/cloud. Automation via Workmanager (background renewal/checks), alarm_manager_plus (precise timers), flutter_local_notifications (timed alerts). Ads via google_mobile_ads: Auto-load/show at timings (e.g., App Open on init, Interstitial on event triggers). Marketplace trades: Instant RAM swap/exchange, persist local/cloud. All instant: No waits for sync (RAM primary), automatic (event/timers drive everything).


- Mechanics:


- Asset Fetch/Implement: On launch, query/search non-copyrightable sites (e.g., OpenGameArt CC0 sprites, Freesound public domain chimes), download to local dir, load via FileImage/AssetAudioPlayer for images/sounds/BGM; fallback to code-generated if fetch fails.


- Hybrid Data Store: Write: RAM update instant, then local Hive.put(), queue for cloud Firestore.set() when online. Read: RAM first (if null, local get() and cache to RAM; if null, cloud get() and cache to local/RAM).


- IAP Instant Grants: On billing callback, set RAM flags (e.g., _isPremium = true), unlock features (e.g., ad disable, Gems += 100), persist local/cloud in background.


- Auto Ads: App Open on start (preload, show after splash); Interstitial on pauses (post-task/level); Rewarded on prompts (watch complete: instant RAM reward); Banner auto-refresh (bottom, collapsible).


- Task Renewal/Rewards/Punishments: Background timers scan RAM tasks; on expire, auto-resolve (if complete: RAM xp += reward; else hp -= penalty), generate new task to RAM list, notify at timing (e.g., 5min before due).


- Marketplace Trades: Instant RAM swap (item from buyer to seller or price transfer), update inventories, notify both parties.


- Notifications/Management: Auto at timings (e.g., task due alert, reward chime); all systems event/timer-driven (e.g., level-up on xp threshold: auto-unlock skill in RAM).


- Rewarded Ads: Watch complete callback: Instant RAM grant (e.g., gems += 10), no cloud wait.


- Logic: Primary ops on RAM (e.g., task complete: tasks.update(completed: true); stats['xp'] += calc(); checkAchievementThresholds()); persist local in background thread, sync cloud via Workmanager if online. IAP: Callback verifies locally (mock server check if needed), grants to RAM instantly. Ads: Timing logic (e.g., if sessionTime > 5min && !premium, show Interstitial). Trades: Atomic RAM swap (e.g., buyer.inventory.add(seller.item); seller.gems += price). Notifications: Schedule via flutter_local_notifications (e.g., at due - 5min: "Quest ending soon!"). Psych: Instant/automatic everything creates seamless flow, with timed alerts building anticipation/urgency.


Deliverable:


Generate the full Flutter project code for redesigned "HabitX," ready for flutter run post-setup, with hybrid storage, asset fetch from non-copyrightable internet sources, instant IAP grants depending on Google Billing/app/local/cloud, automatic ads at perfect timings, task renewal with rewards/punishments, instant marketplace trades, timed notifications, and fully automatic management/systems/features. Ensure everything instant/automatic, with main dependency on local/app for ops.### Prompt for AI App Builder: Build Fully Automated "HabitX" Flutter App


Objective:


- What: Build "HabitX," a Flutter app that is a gamified habit tracker and productivity RPG, blending features from Habitica (quest-based tasks, social parties, avatar progression) and Life Up (attribute-driven growth, self-rewards, achievement tracking), expanded to all productive categories (To-Do: subtasks/priorities/Kanban; Habits: streaks/strength; Sleep: alarms/snoring; Mental: meditations/CBT; Flashcards: spaced repetition/AI decks; Fitness: Heart Points/GPS/macros; Meditation: tracks/breathing; Language: leagues/stories; Budget: envelopes/net worth; Reading: shelves/timers; Focus: Pomodoro/trees; Journal: mood logs/prompts; Meals: barcode plans/grocery lists). Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI AI for coaching. Include marketplace for custom items (AI-generated assets/abilities, sell/trade), ?9 auto-complete all tasks, all four AdMob ad types, Google IAP for premium tiers/items (instant grants). Make everything fully automatic: task renewal (expiration checks, resolution, new generation), reward/punishment giving, achievement unlocks, record-keeping, buying system (IAP grants), ad displays (at perfect timings), marketplace trades (instant exchanges/prices), notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features (e.g., auto ads on start, BGM loops, theme switches). No manual user intervention for any process?app self-manages all logic.


- Why: To create a seamless, hands-free experience where the app "runs itself," boosting engagement through constant progression (dopamine from auto-rewards) and reducing friction (no user prompts for renewals/trades). Full automation aligns with psychological hooks (urgency from timed notifications, FOMO from auto-expirations, satisfaction from instant grants), making the app addictive and efficient. Automation ensures reliability in poor connectivity, with instant ops for all features (e.g., trade completes automatically on accept).


- When: All automation triggers on events/timers: Task renewal every minute (check expirations, auto-resolve complete/incomplete, generate new); rewards/punishments instant on resolution; achievements on threshold met; records auto-logged on actions; buying grants on IAP callback; ads auto-shown on start (App Open) and timings (Interstitial post-task, Rewarded on low resources, Banner persistent); trades instant on confirmation; notifications at perfect moments (e.g., 5min before due, on reward); ALI auto-suggests on load; level-ups on XP threshold. App constantly runs in background for ongoing automation.


- How: Built in Flutter/Dart with no external assets?generate everything (images: CustomPainter procedural pixel-art; sound effects/sounds/BGM: code-synthesized waves/tones with dart:math/audioplayers; animations: AnimatedBuilder/Tween curves) purely through coding. Use in-memory (Riverpod lists/maps for real-time data), local (Hive/SQflite for persistence across sessions), and cloud (Firebase Firestore for optional sync/backup), but main dependency on local/app for all ops (cloud only secondary). Google IAP (in_app_purchase): Callback auto-grants items/features instantly (update memory/local, sync cloud background). Automation via Workmanager (background renewal/checks), alarm_manager_plus (timers), flutter_local_notifications (timed alerts). Ads via google_mobile_ads: Auto-load/show at timings without user trigger. Marketplace trades: Auto-exchange items/prices on accept (update memory/inventories). All instant: No delays, automatic resolution for every system.


- Mechanics:


- Automation Core: Timers/Streams for time-based (e.g., renewal: periodic scan tasks, auto-resolve, generate new from code templates); event listeners for actions (e.g., complete: auto-reward, check achievement).


- IAP Grants: Callback auto-sets flags, unlocks features (e.g., ad-free, Gems += 100) in memory/local, sync cloud.


- Ads: Auto on start/timings (e.g., App Open preload/show after splash; Interstitial on pauses; Rewarded prompt low Gems, auto-grant on watch; Banner refresh 60s).


- Task Renewal/Rewards/Punishments: Background timer scans, auto-resolves (complete: XP+; incomplete: HP-), generates new, notifies at timing.


- Marketplace Trades: On accept, auto-swap items or transfer price in memory/inventories, notify both.


- Notifications/Management: Auto at moments (e.g., due alert, reward chime); all systems self-managing (e.g., level-up auto-unlocks skill).


- No External Assets: Code-gen images (Canvas draw for avatars/themes), sounds (sine waves for chimes/BGM).


- Logic: Primary in-memory ops (e.g., task complete: tasks.update(completed: true); stats['xp'] += calc(); checkThresholds()); persist local background, sync cloud if online. IAP: Callback verifies locally, grants memory/local instantly. Ads: Timing if (!premium && sessionTime > threshold) show. Trades: Atomic memory swap (buyer.inventory.add(item); seller.gems += price). Notifications: Schedule at calc times (e.g., due - 5min). Psych: Auto everything creates "living" app feel, with timed alerts building anticipation.


Deliverable:


Generate the full Flutter project code for "HabitX," ready for flutter run post-setup, with full automation in all systems, code-gen for assets, hybrid storage (memory/local main, cloud secondary), instant IAP grants depending on Google Billing/app/local/cloud, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, and automatic management/features. Ensure everything instant/automatic, main dependency on local/app.### Prompt for AI App Builder: Build Fully Automated "HabitX" Flutter App


Objective:


- What: Develop "HabitX," a cross-platform Flutter app that gamifies all productivity categories (To-Do, Habits, Sleep, Mental Health, Flashcards/Quizzes, Fitness, Meditation, Language Learning, Budgeting, Reading, Focus, Journaling, Meal Planning) into an RPG adventure. Integrate features from top 2025 Play Store apps: Todoist (subtasks, priorities, Kanban boards), TickTick (Pomodoro, calendar sync), Google Tasks (Gmail integration), Habitify (streak analytics, Apple Health sync), Loop Habit Tracker (habit strength formula), Streaks (custom frequencies), Sleep Cycle (smart alarms, sleep phases), Sleep as Android (sonar tracking, lucid dreaming), Headspace (guided meditations, SOS tools), Calm (sleep stories, breathing), Daylio (mood correlations, emoji logs), Quizlet (AI flashcard decks, practice tests), Anki (spaced repetition), Knowt (Quizlet imports), Google Fit (Heart Points, WHO goals), Strava (GPS routes, challenges), MyFitnessPal (macro tracking, barcode scanner), Insight Timer (100k+ meditation tracks), Duolingo (leagues, AI stories), Memrise (native videos), Babbel (live classes), YNAB (zero-based budgeting), PocketGuard (bill negotiation), Mint (net worth dashboards), Goodreads (community shelves, challenges), StoryGraph (mood-based book recs), Bookly (reading timers), Focus To-Do (task-Pomodoro hybrid), Forest (gamified trees), Focus Booster (session reports), Reflectly (AI journal prompts), MoodKit (CBT activities), Mealime (auto grocery lists), Eat This Much (AI meal plans). Users are heroes completing category-specific quests, earning XP, HP, Mana, Gold, and Gems, leveling avatars, and unlocking skills. ALI (AI assistant) offers personalized coaching. A marketplace enables creating/selling/trading custom items (AI-generated assets, custom abilities). A ?9 feature auto-completes all tasks, granting rewards. Global themes (e.g., Diwali for habits, Japanese Zen for meditation, American Thanksgiving for meals) enhance cultural appeal. Make everything fully automatic: task renewal (expiration checks, resolution, new generation), reward/punishment giving, achievement unlocks, record-keeping, buying system (IAP grants), ad displays (at perfect timings), marketplace trades (instant exchanges/prices), notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features (e.g., auto ads on start, BGM loops, theme switches)?no manual user intervention for any process, with all operations self-managed by the app.


- Why: To create a seamless, hands-free experience where "HabitX" operates autonomously, enhancing engagement through constant progression (dopamine from auto-rewards), reducing friction (no user prompts for renewals/trades), and ensuring reliability in poor connectivity (e.g., India). Full automation leverages psychological hooks: urgency (timed notifications, auto-expirations), FOMO (limited themed items), satisfaction (instant grants), and immersion (auto-generated BGM/visuals), making the app addictive and efficient. INR pricing (e.g., ?9) targets India?s microtransaction market, while global themes broaden appeal. Automation ensures instant ops for all features (e.g., trades complete automatically on accept), boosting retention without manual effort.


- When: All automation triggers on events/timers: Task renewal every minute (check expirations, auto-resolve complete/incomplete, generate new); rewards/punishments instant on resolution; achievements on threshold met; records auto-logged on actions; buying grants on IAP callback; ads auto-shown on start (App Open) and timings (Interstitial post-task, Rewarded on low resources, Banner persistent); trades instant on confirmation; notifications at perfect moments (e.g., 5min before due, on reward); ALI auto-suggests on load; level-ups on XP threshold. App constantly runs in background for ongoing automation, with data reset on close/restart for fresh sessions.


- How: Built in Flutter/Dart with assets from non-copyrightable internet sources (e.g., OpenGameArt.org for pixel-art sprites like "Liberated Pixel Cup" heroes/gear, Freesound.org for sounds like tabla chimes/meditation tones), fetched dynamically via HTTP (dio) and stored locally (app documents dir for reuse). Generate animations (e.g., XP bursts, gem sparkles) via Coded AnimatedBuilder, CustomPainter, or TweenAnimationBuilder?no Lottie/JSON. Hybrid storage: RAM (Riverpod lists/maps for real-time data), local (Hive/SQflite for persistence across sessions), cloud (Firebase Firestore for optional sync/backup), with main dependency on local/app for all ops (cloud secondary). Google IAP (in_app_purchase): Callback auto-grants items/features instantly (update memory/local, sync cloud background). Automation via Workmanager (background renewal/checks), alarm_manager_plus (timers), flutter_local_notifications (timed alerts). Ads via google_mobile_ads: Auto-load/show at timings without user trigger. Marketplace trades: Auto-exchange items/prices on accept (update memory/inventories). All instant: No delays, automatic resolution for every system.


- Mechanics:


- Automation Core: Timers/Streams for time-based (e.g., renewal: periodic scan tasks, auto-resolve, generate new from code templates); event listeners for actions (e.g., complete: auto-reward, check achievement).


- IAP Grants: Callback auto-sets flags, unlocks features (e.g., ad-free, Gems += 100) in memory/local, sync cloud.


- Ads: Auto on start/timings (e.g., App Open preload/show after splash; Interstitial on pauses; Rewarded prompt low Gems, auto-grant on watch; Banner refresh 60s).


- Task Renewal/Rewards/Punishments: Background timer scans RAM tasks; on expire, auto-resolves (complete: XP+; incomplete: HP-), generates new, notifies at timing.


- Marketplace Trades: On accept, auto-swap items or transfer price in memory/inventories, notify both.


- Notifications/Management: Auto at moments (e.g., due alert, reward chime); all systems self-managing (e.g., level-up auto-unlocks skill).


- Assets: Fetch non-copyrightable (e.g., OpenGameArt CC0 sprites, Freesound public domain sounds) on install, load via FileImage/AssetAudioPlayer; fallback to code-gen if unavailable.


- Logic:


- Primary in-memory ops (e.g., task complete: tasks.update(completed: true); stats['xp'] += calc(); checkThresholds()); persist local background, sync cloud if online.


- IAP: Callback verifies locally, grants memory/local instantly.


- Ads: Timing if (!premium && sessionTime > threshold) show.


- Trades: Atomic memory swap (buyer.inventory.add(item); seller.gems += price).


- Notifications: Schedule at calc times (e.g., due - 5min).


- Psych: Auto everything creates "living" app feel, with timed alerts building anticipation.


Deliverable:


Generate the full Flutter project code for "HabitX," ready for flutter run post-setup, with full automation in all systems, assets from non-copyrightable internet sources, hybrid storage (memory/local main, cloud secondary), instant IAP grants depending on Google Billing/app/local/cloud, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, and automatic management/features. Ensure everything instant/automatic, main dependency on local/app.


Psychological Hooks (What, Why, When, How, Mechanics, Logic):


- What: Behavioral psychology for installs, engagement, monetization, tailored to categories (e.g., Pomodoro dopamine, mood correlation insights).


- Why: Hooks users via dopamine (rewards, confetti), FOMO (limited themed items), social proof (leaderboards), loss aversion (ad interruptions), personalization (ALI, cultural themes). INR ?9 targets India?s microtransaction culture.


- When:


- Install: App store teaser (hero vs. "Chaos Asura," "Join 5M Legends!").


- Engagement: Task completion (coded sparkle anim), streaks, daily quests.


- Monetization: Post-3 tasks (?9 prompt), post-ad ("Skip for ?99!"), marketplace (limited items).


- How: Remote Config A/B tests slogans (e.g., "Slay Distractions!" vs. "Be a Legend!"). Coded animations (e.g., XP burst). Nudges (e.g., sleep: "Bedtime quest?").


- Mechanics:


- Install: Scarcity ("First 1K get 100 Gems!"), social proof ("Amit from Delhi hit Lv. 50!").


- Engagement: Variable loot (5% gem chance), streaks (2x XP Day 7), notifications ("Saga breaks in 1h!").


- Monetization: Blurred ALI ("Upgrade for wisdom!"), urgency ("?9 ends in 60s!"), scarcity ("3 Zen Lanterns left!").


- Logic:


- Analytics: Firestore tracks tasksCompleted, adViews, purchases.


- Upsell: if (tasks >= 3) showDialog("?9 complete all?"). if (adViews >= 2) prompt("Ad-free ?99!").


- Psych: Themes (e.g., Brazilian Carnival for fitness, German Oktoberfest for meals) drive cultural connection.


App Structure (What, Why, When, How, Mechanics, Logic):


1. Splash Screen:


- What: Pixel-art hero forging a culturally themed weapon (e.g., Indian trishul), "HabitX: Forge Your Legend," progress bar ("Summoning destiny...").


- Why: Sets epic tone, hooks via global imagery.


- When: Launch (2-3s, auth check).


- How: Coded animation (CustomPainter: weapon glow, particles). Fade to onboarding/dashboard.


- Mechanics: Loads users/{userId}. Sound: Freesound tabla.


- Logic: if (user == null) auth; else sync; route.


2. Onboarding Carousel:


- What: 8 slides (gamification, 13 categories, ALI, marketplace, ?9). Avatar creator (classes: Warrior, Guru, Linguist).


- Why: Educates, builds ownership.


- When: First login.


- How: swipeable_page_route, coded confetti. Save to memory/local/cloud.


- Mechanics: Slides: List<Map>{title, icon, text}. Classes: Guru (+20% meditation XP).


- Logic: Save {avatar: {class: "guru"}}. Route dashboard.


3. Authentication:


- What: Email/password + Google ("Enter Realm"). Reset email ("Quest key sent!").


- Why: Secure, low-friction.


- When: Pre-onboarding/logout.


- How: Firebase Auth. Errors: "Portal glitch?retry?".


- Mechanics: Verification email. OAuth token.


- Logic: Save {userId: {stats: {hp:100}}}.


4. Main Dashboard:


- What: BottomNav: 13 category tabs, Character, Marketplace, Achievements, Social. Quest pop-up (e.g., "Pomodoro Sprint: 100 XP"). ?9 button.


- Why: Hub for productivity, daily engagement.


- When: Post-auth, sync.


- How: Hero anims. Pop-up: Coded timer anim.


- Mechanics: IndexedStack tabs. Quest: Random category-based.


- Logic: if (lastQuest != today) generate.


Core Features (What, Why, When, How, Mechanics, Logic):


1. Task Management:


- What: Habits (streaks, strength), Dailies (checklists), To-Dos (subtasks, Kanban). ?9 auto-complete.


- Why: Core gamified productivity.


- When: Midnight reset. Reminders. ?9 post-3 tasks.


- How: ListView TaskCard. Auto: Payment verify.


- Mechanics: xp = difficulty * streak. Auto: tasks.forEach(complete).


- Logic: Save {id, type, priority}.


2. Gamification:


- What: Avatar, Stats, Attributes, Classes, Skills.


- Why: Epic progression.


- When: XP level-up. HP=0 respawn.


- How: fl_chart radars. Coded aura anim.


- Mechanics: xp += reward * classMult.


- Logic: {stats, class}.


3. Rewards & Marketplace:


- What: Gold, self-rewards, items. Create/sell/trade.


- Why: Personalization.


- When: 100 Gold unlock. Create post-Lv.5.


- How: GridView. Form: AI asset.


- Mechanics: if (gems >= price) addItem.


- Logic: {inventory, marketplace}.


4. Achievements & Journal:


- What: Badges, journal (mood, notes), charts.


- Why: Milestones, reflection.


- When: Milestones. 8 PM prompt.


- How: Grid badges. Modal journal.


- Mechanics: if (tasks >=100) badge.


- Logic: {achievements, journal}.


5. Social:


- What: Parties, leaderboards, challenges.


- Why: Community.


- When: Lv.5 parties. Weekly refresh.


- How: StreamBuilder chat. Share_plus.


- Mechanics: if (partyComplete) +500 XP.


- Logic: {parties, leaderboards}.


6. AI Agent (ALI):


- What: Workouts, plans, suggestions, answers, voice.


- Why: Personalization.


- When: Bubble summon. Auto-load.


- How: Chat ListView. Offline ML.


- Mechanics: {type: "pomo"}.


- Logic: Free tease; premium dynamic.


7. Category Tabs:


- What: All 13 categories with features.


- Why: Holistic productivity.


- When: Tab switch.


- How: Modular widgets. Themes: Diwali, Zen.


- Mechanics: Category XP.


- Logic: {categoryData}.


Ads/Premium:


- What: AdMob: App Open, Interstitial, Rewarded, Banner. Premium: ?9 Hourly, ?49 Day, ?149 Weekly, ?399 Monthly, ?2,999 Yearly, ?4,999 Lifetime.


- Why: Monetize, incentivize.


- When: Caps (1/hour Open). Post-task/ad.


- How: google_mobile_ads. in_app_purchase.


- Mechanics: Rewarded: coins += 50.


- Logic: Premium disable.


Technical:


- Packages: riverpod, firebase_*, google_sign_in, google_mobile_ads, in_app_purchase, flutter_local_notifications, fl_chart, hive, intl, share_plus, speech_to_text, dio.


- Why: Standard, India-optimized.


- When: Init main.dart.


- How: Firebase.initializeApp(). Hive offline.


- Mechanics: Providers. Anim: CustomPainter.


- Logic: Lazy loads.


Deliverable: Fully automated "HabitX" code, ready for flutter run.Below is a redesigned prompt for building the "HabitX" Flutter app, incorporating your instructions on premium features. I've decided on the premium/free split based on optimal monetization, user retention, and psychological hooks: Free tier offers core gamification and basic features to hook users (e.g., limited tasks, teaser AI), while premium unlocks advanced personalization, unlimited access, and powerful tools like Agent Mode for ALI (handling inside-app work like task reminders and outside work like device integrations for calendar sync or location-based quests). This creates FOMO (teased premium perks) and value perception (premium feels "essential" for full RPG immersion). Free: Basic questing, limited categories; Premium: Unlimited, AI enhancements, Agent Mode. I prioritized features like task automation and marketplace in free (to build habit), but gated advanced ones (e.g., outside ALI, unlimited subtasks) in premium.


### Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App


Objective:


- What: Redesign and build "HabitX," a Flutter app that is a gamified habit tracker and productivity RPG, blending features from Habitica and Life Up, expanded to all productive categories. Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI AI for coaching. Include marketplace for custom items, ?9 auto-complete all tasks, all AdMob ad types, Google IAP for premium. Make everything fully automatic: task renewal/rewards/punishments, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Use non-copyrightable internet assets (fetch from OpenGameArt.org/Freesound.org), hybrid storage (RAM/local main, cloud secondary), code-gen for animations/sounds. Premium/free split: Free: Basic quests (limited tasks/categories, teaser ALI, ad-supported); Premium: Unlimited tasks/categories, full ALI (advanced suggestions), Agent Mode (ALI handles inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders), milder punishments, exclusive items/themes, no ads, bonus XP multipliers, PDF exports, alliance boosts in social. I (builder) decide remaining splits: e.g., free: Basic social (leaderboards), premium: Parties/challenges; free: Basic marketplace (buy), premium: Create/sell/trade; free: Core categories, premium: Advanced (e.g., GPS fitness, live language).


- Why: To balance accessibility (free hooks users with core RPG) and monetization (premium unlocks "power-ups" like Agent Mode for real-world integration, creating perceived value). Agent Mode premium-only builds exclusivity (FOMO: "Unlock ALI's full power!"). Automation ensures seamless experience; non-copyrightable assets for legality; hybrid storage for speed/reliability.


- When: Automation on events/timers: Task renewal every minute; rewards instant on completion; achievements on thresholds; notifications at timings (e.g., 5min due); ads on start/timings; trades instant on accept; ALI auto on load; Agent Mode outside work via permissions (e.g., location auto-reminders).


- How: Flutter/Dart; fetch assets HTTP (dio), store local. Code animations (AnimatedBuilder), sounds (dart:math waves). Hybrid: RAM (Riverpod), local (Hive), cloud (Firestore secondary sync). IAP (in_app_purchase): Instant grants to RAM/local. Automation: Workmanager/timers for renewal/rewards; notifications for timings. Agent Mode: Inside (app tasks auto); outside (permissions for calendar/location, e.g., geofence quests).


- Mechanics:


- Premium/Free Split: Free: Limited (10 tasks, basic ALI teasers, ads); Premium: Unlimited, full ALI/Agent Mode, no ads, bonuses.


- Agent Mode: Premium-only; inside: Auto-task/resolution; outside: Device integrations (calendar reminders, location-based quests).


- Automation: Timers for renewal (resolve, reward/punish, generate); events for grants/trades.


- Logic: Primary local ops (task complete: update RAM/local, sync cloud); IAP callback grants instant (set premium flag, unlock Agent Mode). Ads/timings if (!premium). Trades: Instant RAM swap. Notifications scheduled. Psych: Auto-rewards create flow; premium teases in free.


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with automation, premium/free split, Agent Mode.### Prompt for AI App Builder: Redesign "HabitX" Flutter App with No External Asset Dependencies


Objective:


- What: Redesign and build "HabitX," a cross-platform Flutter app that gamifies all productivity categories (To-Do, Habits, Sleep, Mental Health, Flashcards/Quizzes, Fitness, Meditation, Language Learning, Budgeting, Reading, Focus, Journaling, Meal Planning) into an RPG adventure, integrating features from top 2025 Play Store apps (Todoist, TickTick, Google Tasks, Habitify, Loop Habit Tracker, Streaks, Sleep Cycle, Sleep as Android, Headspace, Calm, Daylio, Quizlet, Anki, Knowt, Google Fit, Strava, MyFitnessPal, Insight Timer, Duolingo, Memrise, Babbel, YNAB, PocketGuard, Mint, Goodreads, StoryGraph, Bookly, Focus To-Do, Forest, Focus Booster, Reflectly, MoodKit, Mealime, Eat This Much). Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI (AI assistant) for coaching. Include a marketplace for custom items (AI-generated assets/abilities), a ?9 auto-complete feature, all AdMob ad types, and Google IAP for premium tiers. Make everything fully automatic: task renewal/rewards/punishments, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Remove all dependencies on external assets (e.g., no OpenGameArt.org sprites, Freesound.org sounds); instead, generate all visuals (avatars, themes, animations), sound effects, and BGM purely through coding within the app. Build on the prior prompt?s structure, maintaining the premium/free split (Free: Basic quests, limited ALI; Premium: Unlimited, full ALI with Agent Mode for inside/outside work), hybrid storage (RAM/local main, cloud secondary), and instant/automatic operations.


- Why: Eliminating external assets ensures legal safety, reduces app size, and enables dynamic, personalized content (e.g., avatars evolve with level). Full automation enhances user experience by self-managing all processes, leveraging psychological hooks (dopamine from auto-rewards, FOMO from premium Agent Mode). Hybrid storage balances speed (RAM), persistence (local), and sync (cloud), with local/app as the primary dependency. This redesign aligns with the prior prompt?s goals while removing asset fetch overhead, focusing on code-only creativity for immersion.


- When: All automation triggers on events/timers: Task renewal every minute; rewards/punishments instant on resolution; achievements on thresholds; notifications at timings (e.g., 5min before due); ads auto-shown on start/timings; trades instant on accept; ALI auto-suggests on load; Agent Mode outside work via permissions (e.g., location reminders). Code-gen assets update dynamically (e.g., avatar redraw on level-up).


- How: Built in Flutter/Dart with no external asset dependencies?generate images via CustomPainter (procedural pixel-art: drawRect/Circle for avatars, Gradient shaders for themes like Diwali glow), animations via AnimatedBuilder/Tween (e.g., XP burst), and sounds/BGM via dart:math/audioplayers (sine wave synthesis for chimes/tunes). Hybrid storage: RAM (Riverpod lists/maps for real-time), local (Hive/SQflite for persistence), cloud (Firebase Firestore secondary sync). Google IAP (in_app_purchase): Callback auto-grants to RAM/local. Automation via Workmanager (background tasks), alarm_manager_plus (timers), flutter_local_notifications (timed alerts). Ads via google_mobile_ads: Auto-load/show. ALI Agent Mode: Inside (auto-task integration), outside (device permissions for calendar/location).


- Mechanics:


- Code-Generated Assets: Avatars (random shapes/colors), themes (shader gradients), animations (particle effects), sounds (wave modulation), BGM (looping tones)?all runtime-generated.


- Automation Core: Timers/Streams for renewal (resolve, reward/punish, generate); events for grants/trades.


- IAP Grants: Callback auto-sets flags, unlocks features (e.g., Agent Mode) in RAM/local.


- Ads: Auto on start/timings (App Open, Interstitial, Rewarded, Banner).


- Task Renewal/Rewards/Punishments: Background timer scans, auto-resolves, notifies.


- Marketplace Trades: Instant RAM swap, notify.


- ALI/Agent Mode: Free: Limited suggestions; Premium: Full in-app automation, outside device integrations.


- Logic:


- Primary local ops (task complete: update RAM/local, sync cloud); IAP grants instant (set premium flag).


- Ads/timings if (!premium). Trades: Atomic swap. Notifications scheduled.


- Psych: Auto-rewards flow; premium teases in free.


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with full automation, code-gen assets, premium/free split (Agent Mode premium), hybrid storage.


Psychological Hooks:


- What: Dopamine (auto-rewards), FOMO (premium Agent Mode), personalization (dynamic visuals).


- Why: Hooks installs, engagement, monetization.


- When: Install teaser, task completion, premium prompts.


- How: Coded anims, timed alerts.


- Mechanics: Scarcity, streaks, upsell nudges.


- Logic: Analytics tracks engagement.


App Structure:


1. Splash Screen: Coded hero forging weapon, progress bar.


2. Onboarding: Coded slides, avatar creator.


3. Authentication: Firebase Auth.


4. Dashboard: Coded tabs, quest pop-up.


Core Features:


1. Task Management: Habits, Dailies, To-Dos, ?9 auto.


2. Gamification: Avatar, stats, classes.


3. Marketplace: Create/trade items.


4. Achievements/Journal: Badges, mood logs.


5. Social: Leaderboards, parties.


6. ALI: Free teasers; Premium Agent Mode (inside/outside).


7. Categories: All 13, coded themes.


Ads/Premium:


- Ads: Auto AdMob types.


- Premium: ?9 Hourly, ?49 Day, ?149 Weekly, ?399 Monthly, ?2,999 Yearly, ?4,999 Lifetime (Agent Mode, no ads, bonuses).


Technical:


- Packages: riverpod, firebase_*, google_mobile_ads, in_app_purchase, flutter_local_notifications, hive, intl, workmanager, alarm_manager_plus, dio.


- How: Firebase.initializeApp(), Hive offline, code-gen assets.


Note: Fully automated, code-only, premium-focused AI.Below is a new prompt for redesigning and building the "HabitX" Flutter app, incorporating customization options in every feature section. The prompt ensures that each productivity category (and other app sections like marketplace, ALI, social, etc.) includes "Custom" capabilities, allowing users to personalize elements according to the section's theme (e.g., custom sounds in meditation/ASMR-like relaxation subsections, custom subtasks in To-Do, custom quest templates in marketplace). This adds depth, user ownership, and engagement, with premium unlocking advanced customizations.


### Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App with Customization in Every Section


Objective:


- What: Redesign and build "HabitX," a Flutter app that gamifies productivity across all categories (To-Do, Habits, Sleep, Mental Health, Flashcards/Quizzes, Fitness, Meditation, Language Learning, Budgeting, Reading, Focus, Journaling, Meal Planning), integrating features from top 2025 Play Store apps as previously detailed. Add "Custom" options in each feature section, allowing users to personalize according to the section's context: e.g., in To-Do (custom subtasks/priorities/Kanban layouts), Habits (custom streak multipliers/frequencies/strength formulas), Sleep (custom alarm tones/snoring detection thresholds/lucid dreaming prompts), Mental (custom meditation scripts/CBT exercises/SOS tool triggers), Flashcards (custom AI deck generation/spaced repetition algorithms/import templates), Fitness (custom Heart Points goals/GPS routes/macro trackers), Meditation (custom tracks/breathing patterns, including ASMR-like custom sounds for relaxation), Language (custom leagues/stories/native video playlists), Budget (custom envelopes/net worth dashboards/bill negotiation templates), Reading (custom shelves/challenges/mood-based rec timers), Focus (custom Pomodoro durations/tree designs/session reports), Journal (custom mood emojis/logs/prompts/correlation stats), Meals (custom barcode plans/grocery lists/AI meal variations). Extend to other sections: Marketplace (custom item assets/abilities), ALI (custom coaching prompts/personality modes), Social (custom party themes/challenge rules), Achievements (custom badge designs/reward tiers), Dashboard (custom UI layouts/themes). Users create, edit, save, and share customs, with premium unlocking unlimited/advanced customs (e.g., AI-assisted custom sound mixing in meditation/ASMR).


- Why: Customization empowers users, fostering ownership and long-term engagement (endowment effect), while section-specific options enhance relevance (e.g., custom ASMR sounds in meditation for relaxation). This differentiates "HabitX" from competitors, boosting retention through personalization (e.g., custom Pomodoro in Focus feels "mine"). Premium gating creates monetization (FOMO for advanced customs), aligning with psychological hooks (dopamine from creating/sharing). Full automation ensures customs integrate seamlessly (e.g., auto-apply custom rules in task renewal).


- When: Customization available in each section's UI (e.g., "+" button for custom subtasks in To-Do, sound mixer in meditation on load); auto-applied on task creation/execution (e.g., custom alarm at bedtime in Sleep); saved instantly to hybrid storage; shared via social/marketplace on user trigger; premium limits checked on access (e.g., free: 3 customs/section, premium: unlimited).


- How: Built in Flutter/Dart; use CustomPainter for procedural custom visuals (e.g., draw custom badge shapes), dart:math/audioplayers for custom sound gen/mixing (e.g., wave modulation for ASMR tones), Riverpod for reactive custom state. Hybrid storage: RAM for instant previews, local (Hive) for persistence, cloud (Firestore) for sharing/sync. UI: Modal forms for customs (e.g., sliders for Pomodoro durations, audio recorder for custom meditation tracks). Automation: Customs auto-apply (e.g., custom streak formula in habit resolution); ALI auto-suggests customs (e.g., "Customize this quest?").


- Mechanics:


- Section-Specific Customs: To-Do (custom Kanban columns/subtask templates), Habits (custom frequency rules/strength calcs), Sleep (custom phase detection/alarm melodies), Mental (custom script builders/CBT flows), Flashcards (custom deck layouts/repetition intervals), Fitness (custom goal trackers/macro formulas), Meditation (custom breathing cycles/ASMR sound mixer from code waves/user recordings), Language (custom lesson plans/story generators), Budget (custom envelope categories/dashboard widgets), Reading (custom shelf designs/challenge rules), Focus (custom timer themes/tree growth patterns), Journal (custom emoji sets/prompt templates), Meals (custom recipe variations/grocery filters). Marketplace (custom item designs/ability formulas), ALI (custom response styles/mode toggles), Social (custom group themes/challenge variants), Achievements (custom badge icons/reward distributions), Dashboard (custom layout widgets/theme colors).


- Automation Integration: Customs auto-apply in systems (e.g., custom punishment rules in task renewal, custom reward multipliers in giving).


- Premium/Free Split: Free: Basic customs (limited count/simple options); Premium: Unlimited/advanced (e.g., AI-assisted custom sound gen in meditation, outside integrations in Agent Mode).


- Logic: On custom create: Validate (e.g., sound length <60s), save to RAM/local/cloud, auto-apply to relevant ops (e.g., if custom streak, use in renewal calc). Sharing: Export custom as JSON/code snippet for marketplace/social. Psych: Customization builds endowment ("My unique ASMR sound!"), premium teases ("Unlock advanced mixing!").


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with customization in every section, full automation, hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management. Build on prior prompts, ensuring everything instant/automatic.### Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App with Customization in Every Feature Section


Objective:


- What: Redesign and build "HabitX," a Flutter app that gamifies productivity across all categories (To-Do, Habits, Sleep, Mental Health, Flashcards/Quizzes, Fitness, Meditation, Language Learning, Budgeting, Reading, Focus, Journaling, Meal Planning) into an RPG adventure, integrating features from top 2025 Play Store apps as previously detailed. Add "Custom" options in each feature section, allowing users to personalize elements according to the section's theme and functionality: e.g., in To-Do (custom subtasks/priorities/Kanban layouts/templates), Habits (custom streak multipliers/frequencies/strength formulas/reminders), Sleep (custom alarm tones/snoring detection thresholds/lucid dreaming prompts/phase trackers), Mental (custom meditation scripts/CBT exercises/SOS tool triggers/mood correlation visuals), Flashcards (custom AI deck generation/spaced repetition algorithms/import templates/practice modes), Fitness (custom Heart Points goals/GPS routes/macro trackers/workout plans), Meditation (custom tracks/breathing patterns/ASMR-like custom sounds/mixing for relaxation/timers), Language (custom leagues/stories/native video playlists/lesson sequences), Budget (custom envelopes/net worth dashboards/bill negotiation templates/category rules), Reading (custom shelves/challenges/mood-based rec timers/reading goals), Focus (custom Pomodoro durations/tree designs/session reports/theme sounds), Journal (custom mood emojis/logs/prompts/correlation stats/entry templates), Meals (custom barcode plans/grocery lists/AI meal variations/recipe filters). Extend to other sections: Marketplace (custom item assets/abilities/designs/pricing rules), ALI (custom coaching prompts/personality modes/suggestion algorithms), Social (custom party themes/challenge rules/group layouts), Achievements (custom badge designs/reward tiers/unlock conditions), Dashboard (custom UI layouts/themes/widget arrangements). Users create, edit, save, and share customs, with premium unlocking unlimited/advanced customs (e.g., AI-assisted custom sound mixing in meditation/ASMR subsections, custom outside integrations in Agent Mode). Make everything fully automatic: task renewal (expiration checks, resolution, new generation), reward/punishment giving, achievement unlocks, record-keeping, buying system (IAP grants), ad displays (at perfect timings), marketplace trades (instant exchanges/prices), notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features. Use a hybrid asset system: both code-generated (procedural images/sounds/animations/BGM) and external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), combining them dynamically. Hybrid storage: RAM/local main, cloud secondary.


- Why: Customization in each section empowers users, fostering ownership and long-term engagement (endowment effect from "my custom Pomodoro timer" or "personal ASMR sound mix"), while section-specific options enhance relevance and utility (e.g., custom ASMR sounds in meditation for personalized relaxation). This differentiates "HabitX" from competitors, boosting retention through tailored experiences. Premium gating creates monetization (FOMO for advanced customs like AI-mixed sounds), aligning with psychological hooks (dopamine from creating/sharing, satisfaction from auto-applied customs). Full automation ensures customs integrate seamlessly (e.g., auto-apply custom rules in task renewal), reducing friction. Hybrid assets provide originality (code-gen) and variety (external), with non-copyrightable sources for legality. Hybrid storage balances speed/reliability, with local/app as primary for instant ops.


- When: Customization available in each section's UI (e.g., "+" button for custom subtasks in To-Do, sound mixer in meditation on load); auto-applied on task creation/execution (e.g., custom alarm at bedtime in Sleep); saved instantly to hybrid storage; shared via social/marketplace on user trigger; premium limits checked on access (free: 3 customs/section, premium: unlimited). All automation triggers on events/timers: Task renewal every minute; rewards/punishments instant on resolution; achievements on thresholds; records auto-logged on actions; buying grants on IAP callback; ads auto-shown on start/timings; trades instant on accept; notifications at perfect moments (e.g., 5min before due, on reward); ALI auto-suggests on load; Agent Mode outside work via permissions (e.g., location reminders). Code-gen assets update dynamically (e.g., avatar redraw on level-up); external fetches on install/session start (cache local).


- How: Built in Flutter/Dart; fetch external assets HTTP (dio from OpenGameArt CC0 sprites/Freesound public domain sounds), store local. Code-gen: Images (CustomPainter procedural pixel-art, e.g., drawRect for avatars), animations (AnimatedBuilder/Tween), sounds/BGM (dart:math sine waves, modulate fetched clips with audioplayers). Hybrid storage: RAM (Riverpod lists/maps for real-time), local (Hive/SQflite for persistence), cloud (Firestore secondary sync). Google IAP (in_app_purchase): Callback auto-grants items/features instantly (update memory/local, sync cloud background). Automation via Workmanager (background renewal/checks), alarm_manager_plus (timers), flutter_local_notifications (timed alerts). UI for customs: Modal forms (e.g., sliders for Pomodoro durations, audio recorder/mixer for custom meditation/ASMR sounds from code waves/user inputs). Customs auto-apply (e.g., custom streak formula in habit resolution); ALI auto-suggests customs (e.g., "Customize this quest?"). Premium/free: Free basic customs (limited/simple); Premium unlimited/advanced (e.g., AI-assisted custom sound gen in meditation, outside integrations in Agent Mode).


- Mechanics:


- Section-Specific Customs: To-Do (custom Kanban columns/subtask templates), Habits (custom frequency rules/strength calcs), Sleep (custom phase detection/alarm melodies), Mental (custom script builders/CBT flows), Flashcards (custom deck layouts/repetition intervals), Fitness (custom goal trackers/macro formulas), Meditation (custom breathing cycles/ASMR sound mixer from code waves/user recordings), Language (custom lesson plans/story generators), Budget (custom envelope categories/dashboard widgets), Reading (custom shelf designs/challenge rules), Focus (custom timer themes/tree growth patterns), Journal (custom emoji sets/prompt templates), Meals (custom recipe variations/grocery filters). Marketplace (custom item designs/ability formulas), ALI (custom response styles/mode toggles), Social (custom group themes/challenge variants), Achievements (custom badge icons/reward distributions), Dashboard (custom layout widgets/theme colors).


- Automation Integration: Customs auto-apply in systems (e.g., custom punishment rules in task renewal, custom reward multipliers in giving).


- Hybrid Assets: Code-gen overlays (e.g., shader gradients on fetched sprites for Diwali glow); audio modulation (e.g., pitch-shift external chime for reward).


- Logic: On custom create: Validate (e.g., sound length <60s), save to RAM/local/cloud, auto-apply to relevant ops (e.g., if custom streak, use in renewal calc). Sharing: Export custom as JSON/code snippet for marketplace/social. Psych: Customization builds endowment ("My unique ASMR sound!"), premium teases ("Unlock advanced mixing!").


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with customization in every section, full automation, hybrid assets (code-gen + external fetch), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management. Build on prior prompts, ensuring everything instant/automatic.### Prompt for AI App Builder: Implement Fully Automated Reward System in "HabitX" Flutter App


Objective:


- What: Enhance the "HabitX" Flutter app with a fully automated reward system that automatically decides and grants rewards based on task difficulty levels at the time of task completion or renewal. For Easy tasks, award Common level items, basic rewards, and low XP. For Medium tasks, award Rare, Ultra Rare, or Uncommon items with moderate XP. For Hard tasks, award Legendary items plus some XP. For Very Hard tasks, award Mythical items with high XP. The app will automatically decide the quantity of items, Gold, and XP to give, as well as what specific rewards are granted, using randomized algorithms to add variety and excitement. This system integrates with the app's RPG mechanics, marketplace (rewards can be traded), ALI (suggests reward usage), and premium tiers (premium users get better odds for rare rewards). Build on prior prompts, ensuring the entire app remains fully automatic, with no user input required for reward decisions or grants.


- Why: To create dynamic, unpredictable rewards that motivate users through variable reinforcement (dopamine from "lucky" high-tier drops), encouraging harder tasks for better loot. Level-based automation adds progression depth (e.g., Easy for beginners, Mythical for experts), balancing economy (prevent inflation with rarity tiers) and hooking retention (FOMO for Legendary/Mythical items). Premium bias creates value (e.g., "Upgrade for legendary drops!"). Aligns with psychological hooks: anticipation (random decisions), mastery (harder tasks = better rewards), and personalization (rewards tie to categories, e.g., fitness item for fitness task).


- When: Rewards are automatically decided and granted at task completion (manual or auto via ?9/renewal), expiration resolution (punishments if incomplete, but partial rewards if near-complete), level-ups (bonus based on recent task difficulties), or marketplace trades (rewards as currency). Decisions happen instantly on event trigger, with randomization seeded by task details (e.g., category, user level).


- How: Implemented in Flutter/Dart using dart:math for randomization; Riverpod notifiers for reactive stats updates. Define reward tiers in code (e.g., Common: low-value items like "Basic Potion"; Mythical: high-value like "Dragon Sword"). Automation via event listeners (e.g., onTaskComplete: calcReward(difficulty)); quantities/XP based on formulas (e.g., Easy XP = 10-20 random). Tie to hybrid storage: Update RAM instantly, persist local, sync cloud. Premium check: if premium, increase rare drop chance (e.g., +20%).


- Mechanics:


- Difficulty Tiers: Easy (Common items: e.g., "Wooden Sword", 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon: e.g., "Silver Armor", 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary: e.g., "Golden Helm", 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical: e.g., "Phoenix Feather", 4-5 items, 50-100 Gold, 200-500 XP).


- Automatic Decision: App uses random algos: e.g., for Medium, roll dice (Random().nextInt(100)): 0-40 Rare, 41-70 Ultra Rare, 71-100 Uncommon; quantities = base + random(1-3); XP = difficultyBase * userLevelMultiplier. Items from code-defined pool (category-specific, e.g., fitness: "Dumbbell" for Easy).


- Integration: Rewards auto-added to inventory (marketplace tradable); punishments if incomplete (e.g., HP - for Easy, item loss for Hard); ALI auto-suggests reward use (e.g., "Equip your new sword!").


- Logic: On completion: difficulty = task.difficulty; roll = Random().nextDouble(); if (difficulty == 'easy') { items = getCommonItems(roll); xp = 10 + Random().nextInt(11); gold = 5 + Random().nextInt(6); } else if (difficulty == 'medium') { type = roll < 0.4 ? 'rare' : (roll < 0.7 ? 'ultra_rare' : 'uncommon'); items = getMediumItems(type); xp = 50 + Random().nextInt(51); gold = 15 + Random().nextInt(16); } else if (difficulty == 'hard') { items = getLegendaryItems(); xp = 100 + Random().nextInt(101); gold = 30 + Random().nextInt(21); } else if (difficulty == 'very_hard') { items = getMythicalItems(); xp = 200 + Random().nextInt(301); gold = 50 + Random().nextInt(51); }; if (premium) { xp *= 1.2; addBonusItem(roll); }; updateStats(xp, gold, items); notify("Reward Granted!"). Psych: Variable rarity creates excitement; premium bonuses encourage upgrades.


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with automated reward system based on difficulty, full app integration, automation, hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management. Build on prior prompts, ensuring everything instant/automatic.### Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App with Fully Automated Reward System


Objective:


- What: Redesign and build "HabitX," a Flutter app that is a gamified habit tracker and productivity RPG, blending features from Habitica and Life Up, expanded to all productive categories. Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI AI for coaching. Include marketplace for custom items, ?9 auto-complete all tasks, all AdMob ad types, Google IAP for premium tiers/items (instant grants). Make everything fully automatic: task renewal (expiration checks, resolution, new generation), reward/punishment giving, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Add a fully automated reward system that automatically decides and grants rewards at task completion or renewal based on difficulty levels: Easy tasks give Common level items, basic rewards, and low XP; Medium tasks give Rare, Ultra Rare, or Uncommon items with moderate XP; Hard tasks give Legendary items plus some XP; Very Hard tasks give Mythical items with high XP. The app will automatically decide the quantity of items, Gold, and XP to give, as well as what specific rewards are granted, using randomized algorithms to add variety. This system integrates with the app's RPG mechanics, marketplace (rewards tradable), ALI (suggests reward usage), and premium tiers (better odds for rare rewards in premium). Build on prior prompts, ensuring the entire app remains fully automatic, with no user input for reward decisions or grants.


- Why: To create dynamic, unpredictable rewards that motivate users through variable reinforcement (dopamine from "lucky" high-tier drops), encouraging harder tasks for better loot. Level-based automation adds progression depth (e.g., Easy for beginners, Mythical for experts), balancing economy (prevent inflation with rarity tiers) and hooking retention (FOMO for Legendary/Mythical items). Premium bias creates value (e.g., "Upgrade for legendary drops!"). Hybrid storage/automation from prior prompts ensures seamless integration without delays. Psychological hooks: anticipation (random decisions), mastery (harder tasks = better rewards), and personalization (rewards tie to categories, e.g., fitness item for fitness task).


- When: Rewards are automatically decided and granted at task completion (manual or auto via ?9/renewal), expiration resolution (punishments if incomplete, but partial rewards if near-complete), level-ups (bonus based on recent task difficulties), or marketplace trades (rewards as currency). Decisions happen instantly on event trigger, with randomization seeded by task details (e.g., category, user level). All app systems remain automatic as per prior prompts (e.g., task renewal every minute, notifications at 5min due).


- How: Built in Flutter/Dart; use dart:math for randomization in reward decisions. Define reward tiers in code (e.g., Common: low-value items like "Basic Potion"; Mythical: high-value like "Dragon Sword"). Automation via event listeners (e.g., onTaskComplete: calcReward(difficulty)); quantities/XP based on formulas (e.g., Easy XP = 10-20 random). Tie to hybrid storage: Update RAM instantly, persist local, sync cloud. Premium check: if premium, increase rare drop chance (e.g., +20%). Integrate with ALI (auto-suggests "Equip your new Legendary item!"), marketplace (auto-add rewards to tradable inventory), and themes (rewards match cultural context, e.g., Diwali-themed Common item).


- Mechanics:


- Difficulty Tiers: Easy (Common items: e.g., "Wooden Sword" or "Basic Herb", 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon: e.g., "Silver Armor" or "Enchanted Ring", 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary: e.g., "Golden Helm" or "Fire Sword", 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical: e.g., "Phoenix Feather" or "Dragon Scale", 4-5 items, 50-100 Gold, 200-500 XP).


- Automatic Decision: App uses random algorithms: e.g., for Medium, roll dice (Random().nextInt(100)): 0-40 Rare, 41-70 Ultra Rare, 71-100 Uncommon; quantities = base + random(1-3); XP = difficultyBase * userLevelMultiplier; Gold = XP / 2 + random(5-10). Items from code-defined category-specific pools (e.g., fitness: "Dumbbell" for Easy, "Mythical Treadmill" for Very Hard). Premium: Modulate roll for higher rarity (e.g., +20 to roll value).


- Integration: Rewards auto-added to inventory (marketplace tradable); punishments if incomplete (e.g., HP - for Easy, item loss for Hard); ALI auto-suggests reward use; themes influence item style (e.g., Diwali glow for Common in habits).


- Logic: On completion/renewal: difficulty = task.difficulty; roll = Random().nextDouble(); if (difficulty == 'easy') { items = getCommonItems(roll, task.category); xp = 10 + Random().nextInt(11); gold = 5 + Random().nextInt(6); } else if (difficulty == 'medium') { type = roll < 0.4 ? 'rare' : (roll < 0.7 ? 'ultra_rare' : 'uncommon'); items = getMediumItems(type, task.category); xp = 50 + Random().nextInt(51); gold = 15 + Random().nextInt(16); } else if (difficulty == 'hard') { items = getLegendaryItems(task.category); xp = 100 + Random().nextInt(101); gold = 30 + Random().nextInt(21); } else if (difficulty == 'very_hard') { items = getMythicalItems(task.category); xp = 200 + Random().nextInt(301); gold = 50 + Random().nextInt(51); }; if (premium) { xp *= 1.2; addBonusItem(roll, difficulty); }; updateStats(xp, gold, items); notify("Reward Granted: " + items.join(', ')); syncToStorage(). Psych: Variable rarity creates excitement; premium bonuses encourage upgrades; auto-decisions add surprise.


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with fully automated reward system based on difficulty, full app integration, automation, hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management. Build on prior prompts, ensuring everything instant/automatic.Since you?ve asked about Dart randomization algorithms in the context of the "HabitX" app, I'll provide a focused explanation and integrate it into a revised prompt. Dart offers robust randomization capabilities through the dart:math library, specifically the Random class, which can be used to implement the fully automated reward system you described (e.g., deciding XP, Gold, and item rarities for Easy, Medium, Hard, and Very Hard tasks). Below, I?ll outline how these algorithms can be applied, then update the prompt to incorporate this logic explicitly.


### Dart Randomization Algorithms for "HabitX"


- Random Class Basics: The Random class generates pseudo-random numbers. You can instantiate it with Random() for a general seed or Random(seed) for reproducible results (useful for testing). Methods like nextInt(max) (0 to max-1), nextDouble() (0.0 to 1.0), and nextBool() are key for reward decisions.


- Reward System Implementation:


- Difficulty-Based Tiers: Use nextInt(100) to roll a percentage-based chance for item rarity (e.g., Medium task: 0-40 Rare, 41-70 Ultra Rare, 71-100 Uncommon).


- Quantity Variation: nextInt(range) adds randomness to item/Gold counts (e.g., 1-2 items for Easy = 1 + nextInt(2)).


- XP/Gold Calculation: Base value + nextInt(spread) (e.g., Easy XP = 10 + nextInt(11) for 10-20 range).


- Premium Bonus: Modify roll or multiply rewards (e.g., xp *= 1.2 if premium) using nextDouble() checks.


- Category-Specific Pools: Seed randomization with category hashes (e.g., Random(task.category.hashCode)) to ensure relevant items (e.g., fitness task yields "Dumbbell").


- Seeding for Consistency: Use a timestamp (e.g., DateTime.now().millisecondsSinceEpoch) as a seed for daily reward variety, resetting predictability.


This approach ensures randomness is fair, scalable, and tied to app context, enhancing the RPG feel.


### Updated Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App with Fully Automated Reward System Using Dart Randomization


Objective:


- What: Redesign and build "HabitX," a Flutter app that gamifies productivity across all categories, integrating features from top 2025 Play Store apps as previously detailed. Include a marketplace for custom items, ?9 auto-complete, AdMob ad types, Google IAP for premium tiers. Make everything fully automatic: task renewal, reward/punishment giving, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Add a fully automated reward system using Dart randomization algorithms (via dart:math Random class) to decide and grant rewards at task completion or renewal based on difficulty: Easy tasks give Common items (e.g., "Wooden Sword"), 1-2 items, 5-10 Gold, 10-20 XP; Medium tasks give Rare/Ultra Rare/Uncommon items (e.g., "Silver Armor"), 2-3 items, 15-30 Gold, 50-100 XP; Hard tasks give Legendary items (e.g., "Golden Helm"), 3-4 items, 30-50 Gold, 100-200 XP; Very Hard tasks give Mythical items (e.g., "Phoenix Feather"), 4-5 items, 50-100 Gold, 200-500 XP. The app automatically decides quantities, Gold, XP, and specific rewards using randomized algorithms, with category-specific item pools and premium bonuses (e.g., +20% rare drop chance). Integrate with RPG mechanics, marketplace (rewards tradable), ALI (suggests usage), and hybrid assets (Rive animations, code-gen, external non-copyrightable assets). Hybrid storage: RAM/local main, cloud secondary. The current date and time is 01:19 PM IST on Saturday, September 27, 2025, influencing time-based reward seeds.


- Why: Dart randomization adds unpredictable, engaging rewards (dopamine from variable drops), encouraging harder tasks for better loot. Automation ensures seamless integration; premium bias creates value (FOMO for Mythical items). Hybrid assets enhance immersion; psychological hooks (anticipation, mastery) drive retention.


- When: Rewards decided/granted instantly on task completion/renewal, level-ups, or trades. Automation triggers: Task renewal every minute; notifications at 5min due; ads on start/timings. Rive animations (e.g., reward fireworks) play on grant.


- How: Flutter/Dart; use Random() with seeds (e.g., DateTime.now().millisecondsSinceEpoch for daily variety) for reward calc. Define tiers: Easy (roll 0-40 Common), Medium (roll 0-40 Rare, 41-70 Ultra Rare, 71-100 Uncommon), Hard (Legendary), Very Hard (Mythical). Formulas: xp = base + Random().nextInt(spread); items = getPool(roll, category); if (premium) adjust(roll). Rive: rive package; assets: dio fetch (OpenGameArt/Freesound), code-gen (CustomPainter). Storage: RAM (Riverpod), local (Hive), cloud (Firestore). Automation: Workmanager/timers.


- Mechanics:


- Randomization: Easy: items = 1 + Random().nextInt(2), xp = 10 + Random().nextInt(11), gold = 5 + Random().nextInt(6); Medium: type = Random().nextInt(100) logic, xp = 50 + Random().nextInt(51); etc. Premium: +20 to roll.


- Integration: Rewards auto-add to inventory; ALI suggests; Rive animations trigger.


- Logic: On completion: difficulty = task.difficulty; roll = Random().nextInt(100); calcRewards(roll, difficulty); if (premium) boostRewards(); updateStats(); playRive(). Psych: Randomness excites; premium teases.


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with automated reward system using Dart randomization, full automation, hybrid assets, customization, hybrid storage, as of 01:19 PM IST, September 27, 2025.Since you?ve asked about "Flutter Game Reward Systems" in the context of "HabitX," I'll provide an overview of how to design and implement a robust, gamified reward system using Flutter, tailored to your app's RPG productivity framework. I'll then update the prompt to incorporate these principles, building on the Dart randomization algorithms and prior specifications (e.g., hybrid assets, full automation, premium/free split). This will ensure a seamless, engaging experience that leverages Flutter's capabilities for game-like mechanics.


### Flutter Game Reward Systems for "HabitX"


Flutter is well-suited for game reward systems due to its reactive framework (e.g., Riverpod for state management), animation support (Rive, CustomPainter), and cross-platform performance. Here?s how to design a reward system for "HabitX":


- Core Components:


- Reward Tiers: Define rarity levels (Common, Rare, Ultra Rare, Legendary, Mythical) tied to task difficulty (Easy, Medium, Hard, Very Hard). Use Flutter widgets (e.g., AnimatedContainer) to visually represent rewards.


- Randomization: Leverage dart:math.Random for dynamic drops (e.g., nextInt(100) for rarity rolls, nextDouble() for quantity variation). Seed with user/task context for relevance.


- Progression: Track XP, Gold, Gems, and items in a provider, updating UI instantly (e.g., fl_chart for stats).


- Visual Feedback: Use Rive animations (e.g., fireworks for Legendary drops) or code-gen effects (CustomPainter particles) to enhance reward reveals.


- Economy Balance: Limit high-tier drops (e.g., Mythical <1% chance) to maintain value, adjustable via premium multipliers.


- Implementation:


- State Management: Use Riverpod to manage rewardState (XP, Gold, items), reacting to task completion events.


- Reward Calculation: Define a RewardCalculator class with methods like calculateReward(difficulty, isPremium) using randomization:


- Easy: 10-20 XP, 5-10 Gold, 1-2 Common items.


- Medium: 50-100 XP, 15-30 Gold, 2-3 Rare/Ultra Rare/Uncommon items.


- Hard: 100-200 XP, 30-50 Gold, 3-4 Legendary items.


- Very Hard: 200-500 XP, 50-100 Gold, 4-5 Mythical items.


- Automation: Trigger via StreamSubscription on task state changes, auto-updating inventory and triggering Rive animations.


- Integration: Link to marketplace (trade rewards), ALI (suggest usage), and premium (boost odds).


- Best Practices:


- Performance: Use isolates for heavy randomization to avoid UI lag.


- User Engagement: Add surprise (random drops), mastery (higher tiers), and social proof (leaderboard boosts from rewards).


- Monetization: Premium users get rarity boosts (e.g., +20% Mythical chance), incentivizing IAP.


This system aligns with "HabitX"?s RPG theme, ensuring rewards feel earned and exciting.


### Updated Prompt for AI App Builder: Redesign and Build "HabitX" Flutter App with Fully Automated Flutter Game Reward System


Objective:


- What: Redesign and build "HabitX," a Flutter app that gamifies productivity across all categories, integrating features from top 2025 Play Store apps as previously detailed. Include a marketplace for custom items, ?9 auto-complete, AdMob ad types, Google IAP for premium tiers. Make everything fully automatic: task renewal, reward/punishment giving, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Implement a fully automated Flutter game reward system using Dart randomization algorithms (via dart:math.Random) to decide and grant rewards at task completion or renewal based on difficulty: Easy tasks give Common items (e.g., "Wooden Sword"), 1-2 items, 5-10 Gold, 10-20 XP; Medium tasks give Rare/Ultra Rare/Uncommon items (e.g., "Silver Armor"), 2-3 items, 15-30 Gold, 50-100 XP; Hard tasks give Legendary items (e.g., "Golden Helm"), 3-4 items, 30-50 Gold, 100-200 XP; Very Hard tasks give Mythical items (e.g., "Phoenix Feather"), 4-5 items, 50-100 Gold, 200-500 XP. The app automatically decides quantities, Gold, XP, and specific rewards using randomized algorithms, with category-specific item pools and premium bonuses (e.g., +20% rare drop chance). Integrate with Rive animations (e.g., reward fireworks), code-generated assets (CustomPainter), and external non-copyrightable assets (OpenGameArt/Freesound). Hybrid storage: RAM/local main, cloud secondary. The current date and time is 01:35 PM IST on Saturday, September 27, 2025, influencing time-based reward seeds.


- Why: A Flutter game reward system enhances engagement with unpredictable, tiered rewards (dopamine from drops), encouraging harder tasks for better loot. Automation ensures seamless integration; premium bias creates value (FOMO for Mythical items). Hybrid assets (Rive for polish, code-gen for customization, external for variety) ensure legal safety and immersion. Psychological hooks: anticipation (random drops), mastery (tier progression), personalization (category-specific rewards).


- When: Rewards decided/granted instantly on task completion/renewal, level-ups, or trades. Automation triggers: Task renewal every minute; notifications at 5min due; ads on start/timings. Rive animations play on reward grant.


- How: Flutter/Dart; use Random() with seeds (e.g., DateTime.now().millisecondsSinceEpoch for daily variety) in a RewardCalculator class. Define tiers: Easy (roll 0-40 Common), Medium (0-40 Rare, 41-70 Ultra Rare, 71-100 Uncommon), Hard (Legendary), Very Hard (Mythical). Formulas: xp = base + Random().nextInt(spread); items = getPool(roll, category); if (premium) adjust(roll). Rive: rive package; assets: dio fetch (OpenGameArt/Freesound), code-gen (CustomPainter). State: Riverpod notifiers; storage: RAM (Riverpod), local (Hive), cloud (Firestore). Automation: Workmanager/timers, flutter_local_notifications.


- Mechanics:


- Randomization: Easy: items = 1 + Random().nextInt(2), xp = 10 + Random().nextInt(11), gold = 5 + Random().nextInt(6); Medium: type = Random().nextInt(100) logic, xp = 50 + Random().nextInt(51); etc. Premium: +20 to roll.


- Integration: Rewards auto-add to inventory; ALI suggests; Rive animations trigger.


- Logic: On completion: difficulty = task.difficulty; roll = Random().nextInt(100); calcRewards(roll, difficulty); if (premium) boostRewards(); updateStats(); playRive(). Psych: Randomness excites; premium teases.


Deliverable: Full Flutter project code for "HabitX," ready for flutter run, with automated Flutter game reward system using Dart randomization, full automation, hybrid assets, customization, hybrid storage, as of 01:35 PM IST, September 27, 2025.


Hybrid Assets Auto-Implementation Command


Command:


UseHybridAssetsMode: AutoDownloadAndImplement


Instruction:


Qodo must:


1. Generate assets in code (CustomPainter, AnimatedBuilder, TweenAnimationBuilder) for UI, particles, animations, effects.


2. Automatically fetch external assets (pixel sprites, backgrounds, UI icons, sounds, fonts) from free, non-copyrighted sources (OpenGameArt.org, Freesound.org).


3. Directly implement these assets inside the Flutter project (screens, widgets, animations) without asking for user download, file placement, or asset manager.


4. Update pubspec.yaml automatically with asset paths.


5. Ensure no placeholders remain. If an external asset fails to load, Qodo must fallback to code-generated assets.


Logic:


On build, Qodo decides best asset source:


if (external asset available) ? auto-download & embed in app.


else ? auto-generate coded version.


Assets must appear in-app at runtime with zero manual intervention.


Example: Hero sprites ? downloaded from OpenGameArt and shown in avatar selection screen. XP burst effect ? code-generated in Flutter.


You are Qodo AI inside Kilo Code.


App name: HabitX (a productivity app).


Your task: Build the complete HabitX project with all required assets directly downloaded and implemented in the project without using placeholders, asset managers, separate asset scripts, or JSON references. Every asset must be directly included in the source files or project folders by you.


Rules for asset handling:


1. Use web sources and Figma community resources to download productivity-themed assets (icons, illustrations, UI kits, design elements, motivational art).


- Example sites: Flaticon, Icons8, Figma Community, Dribbble, LottieFiles, Unsplash.


- Only pick royalty-free productivity-oriented assets that fit HabitX.


- Store them directly in /assets inside the HabitX project.


2. Apply the following asset logic:


- Code-generated assets (gradients, vector shapes, patterns, dynamic effects, CSS/Tailwind utilities, animations):


Generate directly in code and implement inline in React Native/Flutter widgets.


- External assets (from Figma or web):


Import and use in UI components that need realistic designs like icons, banners, illustrations, onboarding screens.


- Mixed usage:


If a screen requires both, combine them. Example: a dashboard screen can use a gradient background (code-generated) plus external icons for habits/tasks.


3. Each file must automatically choose the correct asset type:


- UI screens ? mix both if needed.


- Buttons, loaders, backgrounds ? code-generated.


- Onboarding, motivational illustrations ? external assets.


- App logo, icons ? external assets (prefer Figma).


4. For every implemented asset, follow these mechanics:


- Download it from source.


- Place in /assets directory (with correct naming, e.g., onboarding_welcome.png).


- Import into the relevant file immediately.


- No unused or placeholder assets.


- If multiple variants exist, choose the most consistent modern productivity style.


5. Design guidelines to enforce:


- Minimalist, clean productivity UI.


- Motivational but professional (soft gradients, inspiring illustrations, modern flat icons).


- Consistency across all screens.


Output:


- Final HabitX project with all screens, logic, and assets correctly placed.


- Assets directly downloaded and implemented, no asset placeholders.


- Every file has the correct type of asset (code-generated, external, or mixed) automatically applied.You are Qodo AI inside Kilo Code.


App name: HabitX (a productivity app).


Your task: Build the complete HabitX project with all features and assets directly downloaded and implemented (no placeholders, no asset manager, no extra scripts). Every asset must be inside the project folders and imported in code immediately.


Feature-to-asset mapping:


1. App Logo & Branding ? External assets (Figma, Flaticon). Store in /assets/logo/.


2. Onboarding Screens ? Mixed: gradients & animations (code-generated), illustrations (external).


3. Dashboard ? Mixed: background = code-generated, habit icons & motivational quotes = external.


4. Habit Creation / Input ? Code-generated: buttons, forms, progress circles. Minimal external icons only if required.


5. Habit Categories ? External icons (yoga, book, laptop, fitness).


6. Progress Tracker / Streak ? Mixed: charts, animations (code), badges/streak flames (external).


7. Notifications ? Code-generated alerts, external bell icon if needed.


8. Calendar View ? Code-generated calendar grid, optional small external icons.


9. User Profile ? Mixed: avatar illustration (external), gradient banner (code).


10. Settings ? Code-generated toggles, sliders, switches. Minimal icons if necessary.


Rules for assets:


- External sources: Figma Community, Flaticon, Icons8, Unsplash, Dribbble, LottieFiles.


- Code-generated: gradients, charts, animations, UI widgets.


- Store external assets in /assets with logical naming (onboarding_intro.png, streak_badge.svg).


- Import and implement immediately into the correct files.


- Apply design consistency: clean productivity style, minimalist, modern, motivational.


Output:


Final HabitX app with all assets directly downloaded and integrated as per feature mapping. Every file should intelligently use code-generated, external, or both types of assets depending on its role. Below is a hyper-detailed prompt for building "HabitX," a Flutter app that gamifies productivity across all categories, integrating features from top Play Store apps (researched 2025) like Todoist, TickTick, Google Tasks, Habitify, Loop Habit Tracker, Streaks, Sleep Cycle, Sleep as Android, Headspace, Calm, Daylio, Quizlet, Anki, Knowt, Google Fit, Strava, MyFitnessPal, Insight Timer, Duolingo, Memrise, Babbel, YNAB, PocketGuard, Mint, Goodreads, StoryGraph, Bookly, Focus To-Do, Forest, Focus Booster, Reflectly, MoodKit, Mealime, and Eat This Much. The app transforms tasks into an RPG adventure, using Indian Rupees (INR) for monetization and global cultural themes (e.g., Diwali for India, Zen for Japan) assigned to productivity categories for resonance. Users create, sell, and trade custom marketplace items with AI-generated assets and abilities, and a ₹9 feature auto-completes all tasks. All animations are coded in Flutter (no Lottie/Rive dependencies in this redesign, but incorporate Rive animations for dynamic visuals alongside Lottie for effects like confetti). Assets are hybrid: code-generated (procedural images/sounds/animations/BGM) and external non-copyrightable (fetched from OpenGameArt.org/Freesound.org/LottieFiles.com). The prompt details **what** features to include (all from chat: gamification, ALI with Agent Mode, customization in every section, automated reward system with Dart randomization, marketplace trades, ads, IAP, notifications, background execution, etc.), **why** they’re included (psychological and functional rationale), **when** they trigger, **how** they’re implemented, **mechanics** behind each feature, and **logic** for their operation. The AI builder decides which features to prioritize or exclude for optimal UX, ensuring a production-ready, psychologically addictive app that hooks global users with full automation.


---


### Prompt for AI App Builder: Build "HabitX" Flutter App


**Objective**:  
- **What**: Develop "HabitX," a cross-platform Flutter app that gamifies all productivity categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync/frequencies; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language: leagues/AI stories/native videos/live classes; Budget: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meals: auto grocery lists/AI plans/barcode scanner/recipe variations) into an RPG adventure. Users are heroes completing category-specific quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI (AI assistant) for coaching (free: teasers; premium: full with Agent Mode for inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders). Include marketplace for custom items (AI-generated assets/abilities/sell/trade with instant exchanges/prices), ₹9 auto-complete all tasks (instant rewards), all four AdMob ad types (App Open/Interstitial/Rewarded/Banner with auto displays at perfect timings), Google IAP for premium tiers/items (instant grants depending on Google Billing/app/local/cloud). Add "Custom" options in each feature section for personalization (e.g., custom subtasks/Kanban layouts in To-Do, custom streak formulas/frequencies in Habits, custom alarm tones/snoring thresholds in Sleep, custom meditation scripts/ASMR sounds mixing in Mental/Meditation, custom deck algorithms in Flashcards, custom goals/macros in Fitness, custom breathing cycles in Meditation, custom lesson plans in Language, custom envelopes/dashboards in Budget, custom shelves/timers in Reading, custom Pomodoro durations/tree designs in Focus, custom mood prompts in Journal, custom meal variations/grocery filters in Meals; extend to Marketplace (custom item designs/pricing), ALI (custom prompts/modes), Social (custom themes/rules), Achievements (custom badges/rewards), Dashboard (custom layouts)). Make everything fully automatic: task renewal (expiration checks/resolution/new generation with rewards/punishments), achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features. Use hybrid assets: code-generated (CustomPainter for images, dart:math for sounds/BGM), external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), Lottie animations (for effects like confetti), and Rive animations (for interactive visuals like avatar leveling). Hybrid storage: RAM/local main (Hive/SQflite), cloud secondary (Firestore). The app will automatically decide reward quantities/Gold/XP/specific items using Dart randomization algorithms based on difficulty (Easy: Common items/1-2 items/5-10 Gold/10-20 XP; Medium: Rare/Ultra Rare/Uncommon/2-3 items/15-30 Gold/50-100 XP; Hard: Legendary/3-4 items/30-50 Gold/100-200 XP; Very Hard: Mythical/4-5 items/50-100 Gold/200-500 XP). Constant background execution for ongoing automation (Workmanager/isolates).
- **Why**: To create an all-in-one, addictive app that covers every productivity category with RPG immersion, ensuring full automation for hands-free experience (dopamine from auto-rewards, FOMO from premium customs/Agent Mode, personalization from section-specific customs like ASMR sound mixing). Hybrid assets/Lottie/Rive provide polish/originality/variety without copyright issues. Premium/free split drives monetization (free hooks with basics, premium unlocks advanced like unlimited customs/Agent Mode). Random rewards add excitement; automation reduces friction; global themes broaden appeal. As of September 29, 2025, time-based features (e.g., daily quests) use current date for relevance.
- **When**: All automation on events/timers: Task renewal every minute (check/resolve/generate); rewards/punishments instant on completion/expiration; achievements on thresholds; records auto-logged; buying grants on IAP callback; ads auto on start/timings; trades instant on accept; notifications at moments (e.g., 5min due, on reward); ALI auto on load; Agent Mode outside via permissions (e.g., location reminders); customs apply instant on creation. Assets fetch on install; code-gen on runtime; Lottie/Rive on events (e.g., confetti on reward, leveling in Rive).
- **How**: Flutter/Dart; fetch external assets HTTP (dio from OpenGameArt/Freesound, cache local). Code-gen: CustomPainter (images), dart:math/audioplayers (sounds). Lottie: lottie package (JSON effects); Rive: rive package (interactive .riv files). Hybrid storage: RAM (Riverpod), local (Hive), cloud (Firestore secondary). Google IAP (in_app_purchase): Callback auto-grants (update memory/local, sync cloud). Automation: Workmanager/timers, flutter_local_notifications. UI for customs: Modals (e.g., sound mixer for ASMR, Rive editor for badges). Reward randomization: Random() with seeds (e.g., difficulty roll for rarity/type, nextInt for quantity/XP/Gold); premium boosts roll. Background: Constant execution via Workmanager/isolates for renewal/rewards/notifications.
- **Mechanics**:  
  - **Customization**: Section-specific (e.g., custom ASMR sounds in Meditation via mixer/code waves; custom Kanban in To-Do); auto-apply in automation (e.g., custom rules in renewal).
  - **Reward System**: Automatic decisions: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon via roll, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools (e.g., fitness Mythical: "Epic Dumbbell").
  - **Automation**: Timers for renewal (resolve, reward/punish, generate); events for grants/trades.
  - **IAP Grants**: Callback unlocks (e.g., premium customs/Agent Mode).
  - **Ads**: Auto App Open/Interstitial/Rewarded/Banner.
  - **Marketplace Trades**: Instant swap/price transfer.
  - **Notifications**: Scheduled at timings.
  - **ALI/Agent Mode**: Free teasers; Premium full in-app/outside automation.
  - **Hybrid Assets**: Code-gen overlays, external fetched, Lottie effects, Rive interactives.
- **Logic**: Primary local ops (task complete: update RAM/local, sync cloud); reward calc: difficulty = task.difficulty; roll = Random().nextInt(100); if (premium) roll += 20; type = getRarity(roll, difficulty); items = getItems(type, task.category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Randomness excites; premium teases.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with all features, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management. Build on prior prompts, ensuring everything instant/automatic.### Prompt for AI App Builder: Build Fully Automated "HabitX" Flutter App with Hybrid Assets and Customization in Every Section


**Objective**:  
- **What**: Build "HabitX," a Flutter app that gamifies productivity across all categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync/frequencies; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language: leagues/AI stories/native videos/live classes; Budget: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meals: auto grocery lists/AI plans/barcode scanner/recipe variations) into an RPG adventure. Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI (AI assistant) for coaching (free: teasers; premium: full with Agent Mode for inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders). Include marketplace for custom items (AI-generated assets/abilities/sell/trade with instant exchanges/prices), ₹9 auto-complete all tasks (instant rewards), all four AdMob ad types (App Open/Interstitial/Rewarded/Banner with auto displays at perfect timings), Google IAP for premium tiers/items (instant grants). Add "Custom" options in each feature section for personalization (e.g., custom subtasks/Kanban layouts/templates in To-Do, custom streak multipliers/frequencies/strength formulas/reminders in Habits, custom phase detection/alarm melodies in Sleep, custom script builders/CBT flows in Mental, custom deck layouts/repetition intervals in Flashcards, custom goal trackers/macro formulas in Fitness, custom breathing cycles/ASMR sound mixer from code waves/user recordings in Meditation, custom lesson plans/story generators in Language, custom envelope categories/dashboard widgets in Budget, custom shelf designs/challenge rules in Reading, custom timer themes/tree growth patterns in Focus, custom emoji sets/prompt templates in Journal, custom recipe variations/grocery filters in Meals; extend to Marketplace (custom item designs/pricing), ALI (custom response styles/mode toggles), Social (custom group themes/challenge variants), Achievements (custom badge icons/reward distributions), Dashboard (custom layout widgets/theme colors)). Make everything fully automatic: task renewal (expiration checks/resolution/new generation with rewards/punishments), achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features. Use a hybrid asset system: both code-generated (CustomPainter for images, dart:math for sounds/BGM) and external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), combining them dynamically. Incorporate Lottie animations (for effects like confetti) and Rive animations (for interactive visuals like avatar leveling). Hybrid storage: RAM/local main (Hive/SQflite), cloud secondary (Firestore). The app will automatically decide reward quantities/Gold/XP/specific items using Dart randomization algorithms based on difficulty (Easy: Common items/1-2 items/5-10 Gold/10-20 XP; Medium: Rare/Ultra Rare/Uncommon/2-3 items/15-30 Gold/50-100 XP; Hard: Legendary/3-4 items/30-50 Gold/100-200 XP; Very Hard: Mythical/4-5 items/50-100 Gold/200-500 XP). Constant background execution for ongoing automation (Workmanager/isolates). As of September 29, 2025, time-based features use current date for relevance.
- **Why**: To create a comprehensive, addictive app that covers every productivity category with RPG immersion, ensuring full automation for hands-free experience (dopamine from auto-rewards, FOMO from premium customs/Agent Mode, personalization from section-specific customs like ASMR sound mixing). Hybrid assets/Lottie/Rive provide polish/originality/variety without copyright issues. Premium/free split drives monetization (free hooks with basics, premium unlocks advanced like unlimited customs/Agent Mode). Random rewards add excitement; automation reduces friction; global themes broaden appeal. Hybrid storage balances speed/reliability, with local/app as primary for instant ops.
- **When**: All automation on events/timers: Task renewal every minute (check/resolve/generate); rewards/punishments instant on resolution; achievements on thresholds; records auto-logged; buying grants on IAP callback; ads auto on start/timings; trades instant on accept; notifications at moments (e.g., 5min due, on reward); ALI auto on load; Agent Mode outside via permissions (e.g., location reminders). Customs apply instant on creation; code-gen assets update dynamically (e.g., avatar redraw on level-up); external fetches on install/session start (cache local); Lottie/Rive on events (e.g., confetti on reward, leveling in Rive).
- **How**: Flutter/Dart; fetch external assets HTTP (dio from OpenGameArt/Freesound, cache in app dir). Code-gen: CustomPainter (images), dart:math/audioplayers (sounds). Lottie: lottie package (JSON effects); Rive: rive package (interactive .riv files). Hybrid storage: RAM (Riverpod lists/maps for real-time), local (Hive/SQflite for persistence), cloud (Firestore secondary sync). Google IAP (in_app_purchase): Callback auto-grants (update memory/local, sync cloud). Automation: Workmanager/timers, flutter_local_notifications. UI for customs: Modals (e.g., sliders for Pomodoro durations, audio recorder/mixer for custom meditation/ASMR sounds from code waves/user inputs). Reward randomization: Random() with seeds (e.g., difficulty roll for rarity/type, nextInt for quantity/XP/Gold); premium boosts roll. Background: Constant execution via Workmanager/isolates for renewal/rewards/notifications.
- **Mechanics**:  
  - **Section-Specific Customs**: To-Do (custom Kanban columns/subtask templates), Habits (custom frequency rules/strength calcs), Sleep (custom phase detection/alarm melodies), Mental (custom script builders/CBT flows), Flashcards (custom deck layouts/repetition intervals), Fitness (custom goal trackers/macro formulas), Meditation (custom breathing cycles/ASMR sound mixer from code waves/user recordings), Language (custom lesson plans/story generators), Budget (custom envelope categories/dashboard widgets), Reading (custom shelf designs/challenge rules), Focus (custom timer themes/tree growth patterns), Journal (custom emoji sets/prompt templates), Meals (custom recipe variations/grocery filters). Marketplace (custom item designs/pricing), ALI (custom response styles/mode toggles), Social (custom group themes/challenge variants), Achievements (custom badge icons/reward distributions), Dashboard (custom layout widgets/theme colors).
  - **Automation Integration**: Customs auto-apply in systems (e.g., custom punishment rules in task renewal, custom reward multipliers in giving).
  - **Hybrid Assets**: Code-gen overlays (e.g., shader gradients on fetched sprites for Diwali glow); audio modulation (e.g., pitch-shift external chime for reward). Lottie (confetti effects), Rive (interactive avatar/quest animations).
  - **Reward System**: Automatic decisions: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon via roll, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools (e.g., fitness Mythical: "Epic Dumbbell").
- **Logic**: On custom create: Validate (e.g., sound length <60s), save to RAM/local/cloud, auto-apply to ops (e.g., if custom streak, use in renewal calc). Reward calc: difficulty = task.difficulty; roll = Random().nextDouble(); if (premium) roll += 0.2; type = getRarity(roll, difficulty); items = getItems(type, task.category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Randomness excites; premium teases.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with all features, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management. Build on prior prompts, ensuring everything instant/automatic as of September 29, 2025.Since you've mentioned "Gamified Productivity Tools" in the context of "HabitX," I'll provide an overview of how to design and implement these tools within the app, enhancing its RPG framework with proven gamification techniques. I'll then update the prompt to integrate these tools hyper-detailedly, building on all previous features (e.g., customization, automated reward system with Dart randomization, hybrid assets, ALI with Agent Mode, etc.) and aligning with the current date and time (09:58 AM IST, September 29, 2025). This will ensure "HabitX" leverages gamification to boost productivity, engagement, and monetization.


### Gamified Productivity Tools for "HabitX"


Gamified productivity tools transform mundane tasks into engaging challenges by incorporating game mechanics like points, levels, rewards, and social competition. For "HabitX," these tools are designed to enhance user motivation and habit formation across all categories (To-Do, Habits, Sleep, etc.):


- **Core Gamification Elements**:
  - **Points (XP/Gold/Gems)**: Earned based on task difficulty, tracked via a provider, visualized with fl_chart or Rive animations.
  - **Levels and Progression**: Level up avatars with XP thresholds, unlocking skills/classes (e.g., Focus Samurai +20% Pomodoro XP), using Rive for leveling effects.
  - **Rewards and Rarity**: Automated system with Dart randomization (Common to Mythical items), tied to task difficulty, enhancing anticipation.
  - **Quests and Challenges**: Daily/weekly quests (e.g., "Complete 5 To-Dos for 50 XP") with timers, auto-generated via ALI, featuring Lottie confetti on completion.
  - **Badges and Achievements**: Customizable badges (e.g., "Streak Master" for 7 days), auto-unlocked, shared socially.
  - **Social Features**: Leaderboards (global/friends), parties (collaborative quests), custom themes, boosting competition and community.
  - **Feedback Loops**: Instant Rive/Lottie animations, sound effects (e.g., task_complete_chime.mp3), and ALI feedback for positive reinforcement.


- **Productivity Integration**:
  - **To-Do**: Kanban boards with quest-like subtasks, XP for completion.
  - **Habits**: Streaks with strength formula, daily challenges.
  - **Sleep**: Sleep phase quests, custom alarm rewards.
  - **Mental/Meditation**: Meditation streaks, ASMR sound mixing for focus.
  - **Flashcards/Language**: Spaced repetition leagues, story-based XP.
  - **Fitness**: GPS challenge maps, macro-tracking points.
  - **Budget/Meals**: Savings/envelope goals, recipe completion rewards.
  - **Focus/Journal**: Pomodoro trees, mood-logging achievements.


- **Implementation in Flutter**:
  - **State Management**: Riverpod for real-time XP/quest updates.
  - **Automation**: Workmanager for background quest generation, timers for streaks.
  - **UI/UX**: Rive for interactive elements (e.g., avatar growth), Lottie for effects, CustomPainter for themes.
  - **Monetization**: Premium unlocks advanced tools (e.g., unlimited quests, Agent Mode integrations).


These tools turn "HabitX" into a productivity powerhouse, leveraging gamification to sustain user interest.


### Updated Prompt for AI App Builder: Build Fully Automated "HabitX" Flutter App with Gamified Productivity Tools


**Objective**:  
- **What**: Build "HabitX," a Flutter app that gamifies productivity across all categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync/frequencies; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language: leagues/AI stories/native videos/live classes; Budget: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meals: auto grocery lists/AI plans/barcode scanner/recipe variations) into an RPG adventure with advanced gamified productivity tools. Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, unlocking skills/classes (e.g., Focus Samurai +20% Pomodoro XP), with ALI (AI assistant) for coaching (free: teasers; premium: full with Agent Mode for inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders). Include marketplace for custom items (AI-generated assets/abilities/sell/trade with instant exchanges/prices), ₹9 auto-complete all tasks (instant rewards), all four AdMob ad types (App Open/Interstitial/Rewarded/Banner with auto displays at perfect timings), Google IAP for premium tiers/items (instant grants). Add "Custom" options in each feature section (e.g., custom subtasks/Kanban layouts in To-Do, custom streak formulas/frequencies in Habits, custom phase detection/alarm melodies in Sleep, custom script builders/ASMR sound mixing in Mental/Meditation, custom deck layouts in Flashcards, custom goals/macros in Fitness, custom breathing cycles in Meditation, custom lesson plans in Language, custom envelopes/dashboards in Budget, custom shelves/timers in Reading, custom Pomodoro durations/tree designs in Focus, custom emoji sets/prompts in Journal, custom meal variations/grocery filters in Meals; extend to Marketplace (custom item designs/pricing), ALI (custom prompts/modes), Social (custom themes/rules), Achievements (custom badges/rewards), Dashboard (custom layouts)). Integrate gamified productivity tools: points (XP/Gold/Gems), levels/progression, automated reward system with Dart randomization (Easy: Common/1-2 items/5-10 Gold/10-20 XP; Medium: Rare/Ultra Rare/Uncommon/2-3 items/15-30 Gold/50-100 XP; Hard: Legendary/3-4 items/30-50 Gold/100-200 XP; Very Hard: Mythical/4-5 items/50-100 Gold/200-500 XP), quests/challenges (daily/weekly with timers), badges/achievements, social features (leaderboards/parties), and feedback loops (Rive/Lottie animations, sounds). Make everything fully automatic: task renewal (expiration checks/resolution/new generation with rewards/punishments), achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features. Use hybrid assets: code-generated (CustomPainter for images, dart:math for sounds/BGM), external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), Lottie animations (for effects like confetti), and Rive animations (for interactive visuals like avatar leveling). Hybrid storage: RAM/local main (Hive/SQflite), cloud secondary (Firestore). Constant background execution (Workmanager/isolates). As of 09:58 AM IST, September 29, 2025, time-based features use current date/time.
- **Why**: To create an all-in-one, addictive app that transforms productivity into an RPG with gamified tools, ensuring full automation for hands-free experience (dopamine from auto-rewards/quest completions, FOMO from premium customs/Agent Mode, personalization from section-specific customs like ASMR sound mixing). Gamification boosts motivation (points/levels), engagement (quests/achievements), and social connection (leaderboards/parties). Hybrid assets/Lottie/Rive provide polish/originality/variety without copyright issues. Premium/free split drives monetization (free hooks with basics, premium unlocks advanced tools like unlimited quests/Agent Mode). Random rewards add excitement; automation reduces friction; global themes broaden appeal. Hybrid storage balances speed/reliability, with local/app as primary.
- **When**: All automation on events/timers: Task renewal every minute (check/resolve/generate); rewards/punishments instant on resolution; achievements on thresholds; records auto-logged; buying grants on IAP callback; ads auto on start/timings; trades instant on accept; notifications at moments (e.g., 5min due, on reward); ALI auto on load; Agent Mode outside via permissions (e.g., location reminders); quests auto-generate daily (e.g., 10:00 AM IST); customs apply instant on creation. Code-gen assets update dynamically; external fetches on install; Lottie/Rive on events (e.g., confetti on quest complete, leveling in Rive).
- **How**: Flutter/Dart; fetch external assets HTTP (dio from OpenGameArt/Freesound, cache in app dir). Code-gen: CustomPainter (images), dart:math/audioplayers (sounds). Lottie: lottie package (JSON effects); Rive: rive package (interactive .riv files). Hybrid storage: RAM (Riverpod lists/maps), local (Hive/SQflite), cloud (Firestore secondary). Google IAP (in_app_purchase): Callback auto-grants (update memory/local, sync cloud). Automation: Workmanager/timers, flutter_local_notifications. UI for customs: Modals (e.g., sliders for Pomodoro, audio mixer for ASMR). Reward randomization: Random() with seeds (e.g., difficulty roll, nextInt for quantity/XP/Gold); premium boosts roll. Background: Constant execution via Workmanager/isolates.
- **Mechanics**:  
  - **Gamified Productivity Tools**:  
    - **Points**: XP/Gold/Gems earned per task (e.g., Easy: 10-20 XP), tracked in UI.
    - **Levels/Progression**: Level up at XP thresholds (e.g., 100*level), unlock skills via Rive animation.
    - **Quests/Challenges**: Daily (e.g., "5 To-Dos for 50 XP") or weekly (e.g., "10km run for Legendary item"), auto-generated with timers.
    - **Badges/Achievements**: Customizable (e.g., "Streak Master"), auto-unlocked, shared socially.
    - **Social Features**: Leaderboards (global/friends), parties (collaborative quests with custom themes).
    - **Feedback Loops**: Rive (e.g., avatar growth), Lottie (confetti), sounds (e.g., task_complete_chime.mp3).
  - **Section-Specific Customs**: To-Do (custom Kanban/subtasks), Habits (custom streaks), Sleep (custom alarms), Mental (custom scripts), Flashcards (custom decks), Fitness (custom goals), Meditation (custom ASMR), Language (custom lessons), Budget (custom envelopes), Reading (custom shelves), Focus (custom Pomodoro), Journal (custom prompts), Meals (custom recipes). Marketplace (custom items), ALI (custom modes), Social (custom themes), Achievements (custom badges), Dashboard (custom layouts).
  - **Automation Integration**: Customs auto-apply (e.g., custom rules in renewal); quests auto-trigger.
  - **Hybrid Assets**: Code-gen overlays, external fetched, Lottie effects, Rive interactives.
  - **Reward System**: Automatic: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools.
- **Logic**: On custom create: Validate (e.g., sound <60s), save RAM/local/cloud, auto-apply. Reward calc: difficulty = task.difficulty; roll = Random().nextDouble(); if (premium) roll += 0.2; type = getRarity(roll); items = getItems(type, category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Gamification motivates; randomness excites.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with all gamified productivity tools, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management, as of 09:58 AM IST, September 29, 2025.Below is a hyper-detailed prompt for building "HabitX," a Flutter app that gamifies productivity across all categories, integrating features from top Play Store apps (researched 2025) like Todoist, TickTick, Google Tasks, Habitify, Loop Habit Tracker, Streaks, Sleep Cycle, Sleep as Android, Headspace, Calm, Daylio, Quizlet, Anki, Knowt, Google Fit, Strava, MyFitnessPal, Insight Timer, Duolingo, Memrise, Babbel, YNAB, PocketGuard, Mint, Goodreads, StoryGraph, Bookly, Focus To-Do, Forest, Focus Booster, Reflectly, MoodKit, Mealime, and Eat This Much. The app transforms tasks into an RPG adventure, using Indian Rupees (INR) for monetization and global cultural themes (e.g., Diwali for India, Zen for Japan) assigned to productivity categories for resonance. Users create, sell, and trade custom marketplace items with AI-generated assets and abilities, and a ₹9 feature auto-completes all tasks. All animations are coded in Flutter (no Lottie/Rive dependencies in this redesign, but incorporate Rive animations for interactive visuals like avatar leveling alongside Lottie for effects like confetti). Assets are hybrid: code-generated (procedural images/sounds/animations/BGM) and external non-copyrightable (fetched from OpenGameArt.org/Freesound.org/LottieFiles.com). The prompt details **what** features to include (all from chat: gamification, ALI with Agent Mode, customization in every section, automated reward system with Dart randomization, marketplace trades, ads, IAP, notifications, background execution, etc.), **why** they’re included (psychological and functional rationale), **when** they trigger, **how** they’re implemented, **mechanics** behind each feature, and **logic** for their operation. The AI builder decides which features to prioritize or exclude for optimal UX, ensuring a production-ready, psychologically addictive app that hooks global users with full automation.


---


### Prompt for AI App Builder: Build "HabitX" Flutter App


**Objective**:  
- **What**: Develop "HabitX," a cross-platform Flutter app that gamifies all productivity categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental Health: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language Learning: leagues/AI stories/native videos/live classes; Budgeting: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meal Planning: auto grocery lists/AI plans/barcode scanner/recipe variations) into an RPG adventure. Users are heroes completing category-specific quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI (AI assistant) for coaching (free: teasers; premium: full with Agent Mode for inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders). Include marketplace for custom items (AI-generated assets/abilities/sell/trade with instant exchanges/prices), ₹9 auto-complete all tasks (instant rewards), all four AdMob ad types (App Open/Interstitial/Rewarded/Banner with auto displays at perfect timings), Google IAP for premium tiers/items (instant grants). Add "Custom" options in each feature section for personalization (e.g., custom subtasks/Kanban layouts/templates in To-Do, custom streak multipliers/frequencies/strength formulas/reminders in Habits, custom phase detection/alarm melodies in Sleep, custom script builders/CBT flows in Mental, custom deck layouts/repetition intervals in Flashcards, custom goal trackers/macro formulas in Fitness, custom breathing cycles/ASMR sound mixer from code waves/user recordings in Meditation, custom lesson plans/story generators in Language, custom envelope categories/dashboard widgets in Budget, custom shelf designs/challenge rules in Reading, custom timer themes/tree growth patterns in Focus, custom emoji sets/prompt templates in Journal, custom recipe variations/grocery filters in Meals; extend to Marketplace (custom item designs/pricing), ALI (custom response styles/mode toggles), Social (custom group themes/challenge variants), Achievements (custom badge icons/reward distributions), Dashboard (custom layout widgets/theme colors)). Make everything fully automatic: task renewal (expiration checks/resolution/new generation with rewards/punishments), achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications (at ideal moments), ALI suggestions, level-ups, streaks, and all other systems/features. Use hybrid assets: code-generated (CustomPainter for images, dart:math for sounds/BGM), external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), Lottie animations (for effects like confetti), and Rive animations (for interactive visuals like avatar leveling). Hybrid storage: RAM/local main (Hive/SQflite), cloud secondary (Firestore). The app will automatically decide reward quantities/Gold/XP/specific items using Dart randomization algorithms based on difficulty (Easy: Common/1-2 items/5-10 Gold/10-20 XP; Medium: Rare/Ultra Rare/Uncommon/2-3 items/15-30 Gold/50-100 XP; Hard: Legendary/3-4 items/30-50 Gold/100-200 XP; Very Hard: Mythical/4-5 items/50-100 Gold/200-500 XP). Constant background execution (Workmanager/isolates). As of September 29, 2025, time-based features use current date for relevance.
- **Why**: To create an all-in-one, addictive app that covers every productivity category with RPG immersion, ensuring full automation for hands-free experience (dopamine from auto-rewards/quest completions, FOMO from premium customs/Agent Mode, personalization from section-specific customs like ASMR sound mixing). Hybrid assets/Lottie/Rive provide polish/originality/variety without copyright issues. Premium/free split drives monetization (free hooks with basics, premium unlocks advanced like unlimited customs/Agent Mode). Random rewards add excitement; automation reduces friction; global themes broaden appeal. Hybrid storage balances speed/reliability, with local/app as primary for instant ops.
- **When**: All automation on events/timers: Task renewal every minute (check/resolve/generate); rewards/punishments instant on resolution; achievements on thresholds; records auto-logged; buying grants on IAP callback; ads auto on start/timings; trades instant on accept; notifications at moments (e.g., 5min due, on reward); ALI auto on load; Agent Mode outside via permissions (e.g., location reminders); quests auto-trigger daily (e.g., 10:00 AM IST); customs apply instant on creation. Code-gen assets update dynamically; external fetches on install; Lottie/Rive on events (e.g., confetti on quest complete, leveling in Rive).
- **How**: Flutter/Dart; fetch external assets HTTP (dio from OpenGameArt/Freesound, cache in app dir). Code-gen: CustomPainter (images), dart:math/audioplayers (sounds). Lottie: lottie package (JSON effects); Rive: rive package (interactive .riv files). Hybrid storage: RAM (Riverpod lists/maps for real-time), local (Hive/SQflite for persistence), cloud (Firestore secondary sync). Google IAP (in_app_purchase): Callback auto-grants (update memory/local, sync cloud). Automation: Workmanager/timers, flutter_local_notifications. UI for customs: Modals (e.g., sliders for Pomodoro durations, audio recorder/mixer for custom meditation/ASMR sounds from code waves/user inputs). Reward randomization: Random() with seeds (e.g., difficulty roll for rarity/type, nextInt for quantity/XP/Gold); premium boosts roll. Background: Constant execution via Workmanager/isolates for renewal/rewards/notifications.
- **Mechanics**:  
  - **Section-Specific Customs**: To-Do (custom Kanban/subtasks), Habits (custom streak), Sleep (custom alarms), Mental (custom scripts), Flashcards (custom decks), Fitness (custom goals), Meditation (custom ASMR), Language (custom lessons), Budget (custom envelopes), Reading (custom shelves), Focus (custom Pomodoro), Journal (custom prompts), Meals (custom recipes). Marketplace (custom items), ALI (custom modes), Social (custom themes), Achievements (custom badges), Dashboard (custom layouts).
  - **Automation Integration**: Customs auto-apply (e.g., custom rules in renewal); quests auto-trigger.
  - **Hybrid Assets**: Code-gen overlays, external fetched, Lottie effects, Rive interactives.
  - **Reward System**: Automatic: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon via roll, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools (e.g., fitness Mythical: "Epic Dumbbell").
- **Logic**: On custom create: Validate (e.g., sound length <60s), save RAM/local/cloud, auto-apply to ops (e.g., if custom streak, use in renewal calc). Reward calc: difficulty = task.difficulty; roll = Random().nextDouble(); if (premium) roll += 0.2; type = getRarity(roll, difficulty); items = getItems(type, category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Randomness excites; premium teases.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with all features, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management, as of September 29, 2025. Build on prior prompts, ensuring everything instant/automatic.


**Psychological Hooks**:  
- **What**: Dopamine (auto-rewards), FOMO (premium Agent Mode), personalization (customs).  
- **Why**: Hooks installs, engagement, monetization.  
- **When**: Install teaser, task completion, premium prompts.  
- **How**: Coded anims, timed alerts.  
- **Mechanics**: Scarcity, streaks, upsell nudges.  
- **Logic**: Analytics tracks engagement.


**App Structure**:  
1. **Splash Screen**: Coded hero forging weapon, progress bar.  
2. **Onboarding**: Coded slides, avatar creator.  
3. **Authentication**: Firebase Auth.  
4. **Dashboard**: Coded tabs, quest pop-up.


**Core Features**:  
1. **Task Management**: Habits, Dailies, To-Dos, ₹9 auto.  
2. **Gamification**: Avatar, stats, classes.  
3. **Marketplace**: Create/trade items.  
4. **Achievements/Journal**: Badges, mood logs.  
5. **Social**: Leaderboards, parties.  
6. **ALI**: Free teasers; Premium Agent Mode (inside/outside).  
7. **Categories**: All 13, coded themes.


**Ads/Premium**:  
- **Ads**: Auto AdMob types.  
- **Premium**: ₹9 Hourly, ₹49 Day, ₹149 Weekly, ₹399 Monthly, ₹2,999 Yearly, ₹4,999 Lifetime (Agent Mode, no ads, bonuses).


**Technical**:  
- **Packages**: riverpod, firebase_*, google_mobile_ads, in_app_purchase, flutter_local_notifications, hive, intl, workmanager, alarm_manager_plus, dio, lottie, rive.  
- **How**: `Firebase.initializeApp()`, Hive offline, code-gen assets.


**Note**: Fully automated, code-only, premium-focused AI.### Prompt for AI App Builder: Build "HabitX" Flutter App with Advanced Quest Design


**Objective**:  
- **What**: Build "HabitX," a Flutter app that is a gamified habit tracker and productivity RPG, blending features from Habitica (quest-based tasks, social parties, avatar progression) and Life Up (attribute-driven growth, self-rewards, achievement tracking), expanded to all productive categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language: leagues/AI stories/native videos/live classes; Budget: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meals: auto grocery lists/AI plans/barcode scanner/recipe variations). Implement advanced quest design as the core mechanic: quests are dynamic, multi-step adventures with main/side quests, skill trees, coin systems, loot drops, and daily challenges, inspired by RPG elements like Diablo (Reddit post on RPG-style app)<grok:render card_id="9c3bc1" card_type="citation_card" type="render_inline_citation">
<argument name="citation_id">2</argument>
</grok:render>, turning tasks into battles/matching games (Study Quest)<grok:render card_id="97e7e0" card_type="citation_card" type="render_inline_citation">
<argument name="citation_id">14</argument>
</grok:render>, with clear goals/XP/stats/rewards (Medium article)<grok:render card_id="a0729a" card_type="citation_card" type="render_inline_citation">
<argument name="citation_id">3</argument>
</grok:render>. Users are heroes completing category-specific quests (e.g., "Pomodoro Sprint" in Focus), earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI for coaching. Include marketplace for custom items, ₹9 auto-complete, AdMob ads, Google IAP for premium. Add "Custom" options in each section. Make everything fully automatic: task renewal, reward/punishment giving, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Use hybrid assets: code-generated, external non-copyrightable, Lottie, Rive. Hybrid storage: RAM/local main, cloud secondary. Automated reward system with Dart randomization. Constant background execution. As of September 29, 2025, time-based quests use current date.
- **Why**: Advanced quest design transforms tasks into engaging narratives (e.g., EpicWin's fantasy quests)<grok:render card_id="cd05d4" card_type="citation_card" type="render_inline_citation">
<argument name="citation_id">0</argument>
</grok:render>, boosting motivation through gamification (clear goals/progress/rewards)<grok:render card_id="128d92" card_type="citation_card" type="render_inline_citation">
<argument name="citation_id">5</argument>
</grok:render>, making productivity addictive for some users while avoiding flops by personalizing (Medium article)<grok:render card_id="415977" card_type="citation_card" type="render_inline_citation">
<argument name="citation_id">3</argument>
</grok:render>. This enhances retention (FOMO from limited quests), monetization (premium unlocks advanced quests), and psychological hooks (dopamine from loot, mastery from skill trees). Full automation/hybrid assets/storage ensure seamless, legal, performant experience.
- **When**: Quests auto-generate daily/weekly (e.g., 10:00 AM IST); renewal every minute; rewards instant on completion; achievements on thresholds; notifications at 5min due; ads on start/timings; trades instant; ALI auto on load; Agent Mode outside via permissions. Customs apply instant on creation. Lottie/Rive on events (e.g., confetti on quest complete).
- **How**: Flutter/Dart; advanced quest design: Quests as multi-step TaskModel chains with branches (main/side), skill trees as Map (unlock on levels), coin system for marketplace, loot drops via randomization. Generate quests procedurally (e.g., "Complete 3 To-Dos for 50 XP" using category templates). Automation: Workmanager/timers. UI: Modals for customs. Hybrid storage: RAM (Riverpod), local (Hive), cloud (Firestore). IAP (in_app_purchase): Instant grants. Ads: google_mobile_ads auto. ALI Agent Mode: Inside (auto-task), outside (permissions). Hybrid assets: code-gen, external fetched, Lottie effects, Rive interactives. Random rewards: Random() with seeds.
- **Mechanics**:  
  - **Advanced Quest Design**: Main quests (core tasks with multi-steps/branches), side quests (optional bonuses), skill trees (unlock/modulate based on levels, e.g., "Pomodoro Boost" +20% focus XP), coin system (Gold/Gems for trades/rewards), daily challenges (auto-generated with timers/rewards). Category-specific (e.g., Sleep: "Phase Battle" quest with lucid dreaming side path).
  - **Section-Specific Customs**: To-Do (custom Kanban/subtasks), Habits (custom streaks), Sleep (custom alarms), etc., as prior.
  - **Automation Integration**: Quests auto-apply customs (e.g., custom branches in renewal).
  - **Hybrid Assets**: Code-gen overlays, external fetched, Lottie effects, Rive interactives.
  - **Reward System**: Automatic: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools.
- **Logic**: On quest create: Generate main/side steps (e.g., for Focus: "Pomodoro One" with branch for tree growth); on complete: xp += calc(); checkSkillUnlock(level); sync. Reward calc: difficulty = quest.difficulty; roll = Random().nextDouble(); if (premium) roll += 0.2; type = getRarity(roll); items = getItems(type, category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Quest branches add choice/mastery.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with advanced quest design, all features, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management, as of September 29, 2025. Build on prior prompts, ensuring everything instant/automatic.Below is an updated prompt for building "HabitX," a Flutter app that gamifies productivity across all categories, with a focus on implementing advanced quest branching mechanics. This builds on prior features (e.g., gamification, ALI with Agent Mode, customization, automated reward system, hybrid assets) and incorporates quest branching as a core mechanic, inspired by RPGs like Diablo and EpicWin. The prompt is hyper-detailed, covering what features to include, why they matter, when they trigger, how they’re implemented, mechanics behind each, and logic for operation. The AI builder can prioritize or exclude features for optimal UX, ensuring a production-ready app that hooks users with full automation as of 10:02 AM IST, September 29, 2025.


---


### Prompt for AI App Builder: Build "HabitX" Flutter App with Quest Branching Mechanics


**Objective**:  
- **What**: Develop "HabitX," a Flutter app that gamifies productivity across all categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental Health: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language Learning: leagues/AI stories/native videos/live classes; Budgeting: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meal Planning: auto grocery lists/AI plans/barcode scanner/recipe variations) into an RPG adventure. Implement advanced quest branching mechanics as the core mechanic: quests are dynamic, multi-step adventures with main paths (core objectives), branching side quests (optional challenges), skill tree unlocks (e.g., "Focus Boost" +20% XP), and loot drops, inspired by Diablo’s quest trees and EpicWin’s narrative tasks. Users are heroes completing category-specific quests (e.g., "Pomodoro Sprint" in Focus with a side quest for tree growth), earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI (AI assistant) for coaching (free: teasers; premium: full with Agent Mode for inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders). Include marketplace for custom items (AI-generated assets/abilities/sell/trade with instant exchanges/prices), ₹9 auto-complete all tasks (instant rewards), all four AdMob ad types (App Open/Interstitial/Rewarded/Banner with auto displays at perfect timings), Google IAP for premium tiers/items (instant grants). Add "Custom" options in each feature section (e.g., custom subtasks/Kanban layouts in To-Do, custom streak formulas in Habits, custom alarm melodies in Sleep, custom meditation scripts in Mental, custom deck layouts in Flashcards, custom goals in Fitness, custom ASMR sounds in Meditation, custom lessons in Language, custom envelopes in Budget, custom shelves in Reading, custom Pomodoro themes in Focus, custom prompts in Journal, custom recipes in Meals; extend to Marketplace, ALI, Social, Achievements, Dashboard). Make everything fully automatic: task renewal, reward/punishment giving, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Use hybrid assets: code-generated (CustomPainter for images, dart:math for sounds/BGM), external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), Lottie animations (for effects like confetti), and Rive animations (for interactive visuals like avatar leveling). Hybrid storage: RAM/local main (Hive/SQflite), cloud secondary (Firestore). Automated reward system with Dart randomization (Easy: Common/1-2 items/5-10 Gold/10-20 XP; Medium: Rare/Ultra Rare/Uncommon/2-3 items/15-30 Gold/50-100 XP; Hard: Legendary/3-4 items/30-50 Gold/100-200 XP; Very Hard: Mythical/4-5 items/50-100 Gold/200-500 XP). Constant background execution (Workmanager/isolates). As of 10:02 AM IST, September 29, 2025, time-based quests use current date/time.
- **Why**: Quest branching mechanics transform tasks into engaging narratives (e.g., EpicWin’s fantasy quests), boosting motivation through choice (main/side paths), progression (skill trees), and rewards (loot drops), aligning with gamification principles (clear goals/stats). This enhances retention (FOMO from limited quests), monetization (premium unlocks advanced branches), and psychological hooks (dopamine from branch completions, mastery from skill unlocks). Full automation/hybrid assets/storage ensure seamless, legal, performant experience.
- **When**: Quests auto-generate daily/weekly (e.g., 10:00 AM IST); renewal every minute; rewards/punishments instant on resolution; achievements on thresholds; notifications at 5min due; ads on start/timings; trades instant; ALI auto on load; Agent Mode outside via permissions. Branches unlock based on progress (e.g., side quest after main step). Customs apply instant on creation. Lottie/Rive on events (e.g., confetti on branch complete).
- **How**: Flutter/Dart; advanced quest branching: Quests as TaskModel chains with nested branches (main/side), skill trees as Map (unlock on levels), loot drops via randomization. Generate quests procedurally (e.g., "Pomodoro Sprint" with "Tree Growth" side quest using category templates). Automation: Workmanager/timers. UI: Modals for customs. Hybrid storage: RAM (Riverpod), local (Hive), cloud (Firestore). IAP (in_app_purchase): Instant grants. Ads: google_mobile_ads auto. ALI Agent Mode: Inside (auto-task), outside (permissions). Hybrid assets: code-gen, external fetched, Lottie effects, Rive interactives. Random rewards: Random() with seeds.
- **Mechanics**:  
  - **Quest Branching Mechanics**:  
    - **Main Quests**: Core multi-step objectives (e.g., "Complete 3 To-Dos" with sub-steps like "Prioritize High Tasks"), auto-assigned per category, with clear XP/stage goals.
    - **Side Quests**: Optional branches (e.g., "Meditate 5 Extra Minutes" off a Meditation main quest), unlockable mid-quest, offering bonus XP/items.
    - **Skill Trees**: Unlockable abilities (e.g., "Streak Bonus" +10% XP) tied to levels, branch-specific (e.g., Focus tree enhances Pomodoro).
    - **Loot Drops**: Randomized rewards per branch completion (e.g., Medium side quest drops Ultra Rare "Focus Crystal").
    - **Daily/Weekly Challenges**: Auto-generated timed quests (e.g., "Run 5km by Friday" with branch for stretching).
  - **Section-Specific Customs**: To-Do (custom Kanban/subtasks), Habits (custom streaks), Sleep (custom alarms), etc., as prior, with custom branch templates.
  - **Automation Integration**: Branches auto-apply customs (e.g., custom side quest rules); quests auto-trigger.
  - **Hybrid Assets**: Code-gen overlays, external fetched, Lottie effects, Rive interactives.
  - **Reward System**: Automatic: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools.
- **Logic**: On quest create: Generate main steps/branches (e.g., for Focus: "Pomodoro One" with "Tree Growth" side); on complete: xp += calcBranchXP(); checkSkillUnlock(level); sync. Reward calc: difficulty = quest.difficulty; roll = Random().nextDouble(); if (premium) roll += 0.2; type = getRarity(roll); items = getItems(type, category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Branching adds choice; skill unlocks enhance mastery.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with quest branching mechanics, all features, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management, as of 10:02 AM IST, September 29, 2025. Build on prior prompts, ensuring everything instant/automatic.### Prompt for AI App Builder: Build "HabitX" Flutter App with Skill Tree Progression


**Objective**:  
- **What**: Build "HabitX," a Flutter app that gamifies productivity across all categories (To-Do: subtasks/priorities/Kanban/Gmail sync; Habits: streaks/strength formula/Apple Health sync; Sleep: smart alarms/sleep phases/sonar tracking/snoring detection/lucid dreaming; Mental Health: guided meditations/sleep stories/CBT/SOS tools/mood correlations/emoji logs/breathing; Flashcards/Quizzes: AI decks/practice tests/spaced repetition/imports; Fitness: Heart Points/WHO goals/GPS routes/challenges/macro tracking/barcode scanner; Meditation: 100k+ tracks/breathing bubble/ASMR sounds; Language Learning: leagues/AI stories/native videos/live classes; Budgeting: zero-based envelopes/bill negotiation/net worth dashboards; Reading: community shelves/challenges/mood-based recs/progress timers; Focus: task-Pomodoro hybrid/gamified trees/session reports; Journaling: AI prompts/CBT activities/correlation stats; Meal Planning: auto grocery lists/AI plans/barcode scanner/recipe variations) into an RPG adventure. Implement skill tree progression as a core mechanic: a dynamic, tiered progression system where users unlock and upgrade category-specific skills (e.g., "Focus Boost" +20% Pomodoro XP, "Sleep Mastery" +10% phase accuracy) by earning XP through quests, with branching paths (e.g., defensive skills vs. offensive boosts), prerequisites, and synergy bonuses, inspired by RPGs like Diablo and Final Fantasy. Users are heroes completing quests, earning XP/Gold/Gems, leveling avatars, and unlocking skills, with ALI (AI assistant) for coaching (free: teasers; premium: full with Agent Mode for inside-app work like auto-task integration and outside work like device permissions for calendar/location reminders). Include marketplace for custom items (AI-generated assets/abilities/sell/trade with instant exchanges/prices), ₹9 auto-complete all tasks (instant rewards), all four AdMob ad types (App Open/Interstitial/Rewarded/Banner with auto displays at perfect timings), Google IAP for premium tiers/items (instant grants). Add "Custom" options in each feature section (e.g., custom subtasks/Kanban layouts in To-Do, custom streak formulas in Habits, custom alarm melodies in Sleep, custom meditation scripts in Mental, custom deck layouts in Flashcards, custom goals in Fitness, custom ASMR sounds in Meditation, custom lessons in Language, custom envelopes in Budget, custom shelves in Reading, custom Pomodoro themes in Focus, custom prompts in Journal, custom recipes in Meals; extend to Marketplace, ALI, Social, Achievements, Dashboard). Make everything fully automatic: task renewal, reward/punishment giving, achievement unlocks, record-keeping, buying grants, ad displays, marketplace trades, notifications, ALI suggestions, level-ups, streaks. Use hybrid assets: code-generated (CustomPainter for images, dart:math for sounds/BGM), external non-copyrightable (fetched from OpenGameArt.org/Freesound.org), Lottie animations (for effects like confetti), and Rive animations (for interactive visuals like avatar leveling). Hybrid storage: RAM/local main (Hive/SQflite), cloud secondary (Firestore). Automated reward system with Dart randomization (Easy: Common/1-2 items/5-10 Gold/10-20 XP; Medium: Rare/Ultra Rare/Uncommon/2-3 items/15-30 Gold/50-100 XP; Hard: Legendary/3-4 items/30-50 Gold/100-200 XP; Very Hard: Mythical/4-5 items/50-100 Gold/200-500 XP). Constant background execution (Workmanager/isolates). As of 10:03 AM IST, September 29, 2025, time-based quests use current date/time.
- **Why**: Skill tree progression transforms productivity into a strategic, rewarding journey (e.g., Diablo’s skill customization), enhancing motivation through choice (branching paths), mastery (skill upgrades), and progression (tiered unlocks), aligning with gamification principles. This boosts retention (FOMO from premium skills), monetization (premium unlocks advanced branches), and psychological hooks (dopamine from skill unlocks, sense of growth). Full automation/hybrid assets/storage ensure seamless, legal, performant experience.
- **When**: Skills auto-unlock/upgrade on XP thresholds (e.g., Level 5 unlocks "Focus Boost"); renewal every minute; rewards/punishments instant on resolution; achievements on thresholds; notifications at 5min due; ads on start/timings; trades instant; ALI auto on load; Agent Mode outside via permissions. Customs apply instant on creation. Lottie/Rive on events (e.g., confetti on skill unlock).
- **How**: Flutter/Dart; skill tree progression: SkillTree class with Map (skillID: {name, tier, prereqs, effects, cost}), updated via XP events. Generate trees procedurally per category (e.g., Focus: "Pomodoro Boost" at Tier 1, "Tree Mastery" at Tier 3 with prereq). Automation: Workmanager/timers. UI: Modals for customs. Hybrid storage: RAM (Riverpod), local (Hive), cloud (Firestore). IAP (in_app_purchase): Instant grants. Ads: google_mobile_ads auto. ALI Agent Mode: Inside (auto-task), outside (permissions). Hybrid assets: code-gen, external fetched, Lottie effects, Rive interactives. Random rewards: Random() with seeds.
- **Mechanics**:  
  - **Skill Tree Progression**:  
    - **Tiered Skills**: Unlock at XP thresholds (e.g., Tier 1 at 100 XP, Tier 3 at 500 XP), with branches (e.g., Focus: "Speed Focus" vs. "Endurance Focus").
    - **Prerequisites**: Skills require prior unlocks (e.g., "Sleep Mastery" needs "Phase Tracker").
    - **Synergy Bonuses**: Combined effects (e.g., "Focus Boost" + "Tree Mastery" = +30% XP).
    - **Category-Specific**: Tailored trees (e.g., Fitness: "Endurance Run" +10% GPS XP).
  - **Section-Specific Customs**: To-Do (custom Kanban/subtasks), Habits (custom streaks), Sleep (custom alarms), etc., with custom skill templates.
  - **Automation Integration**: Skills auto-apply customs (e.g., custom effects in renewal).
  - **Hybrid Assets**: Code-gen overlays, external fetched, Lottie effects, Rive interactives.
  - **Reward System**: Automatic: Easy (Common, 1-2 items, 5-10 Gold, 10-20 XP); Medium (Rare/Ultra Rare/Uncommon, 2-3 items, 15-30 Gold, 50-100 XP); Hard (Legendary, 3-4 items, 30-50 Gold, 100-200 XP); Very Hard (Mythical, 4-5 items, 50-100 Gold, 200-500 XP); category pools.
- **Logic**: On XP gain: checkLevelUp(); if (level >= prereq) unlockSkill(skillID); applyEffect(); sync. Reward calc: difficulty = task.difficulty; roll = Random().nextDouble(); if (premium) roll += 0.2; type = getRarity(roll); items = getItems(type, category, Random().nextInt(quantityRange) + minQuantity); xp = base + Random().nextInt(spread); gold = xp / 2 + Random().nextInt(10); updateStats(); playRive/Lottie(). Psych: Skill unlocks enhance mastery; randomness excites.


**Deliverable**: Full Flutter project code for "HabitX," ready for `flutter run`, with skill tree progression, all features, customization, automation, hybrid assets (code-gen + external + Lottie + Rive), hybrid storage, instant IAP grants, auto ads/timings, task renewal/rewards/punishments, instant marketplace trades, timed notifications, automatic management, as of 10:03 AM IST, September 29, 2025. Build on prior prompts, ensuring everything instant/automatic. Now Complete Whole App And Implement Actual Features Without PlaceHolders That Means Implement Full Actual Features And Use No PlaceHolders And Implement Everything And Also Use All Types Of Assets And Use Internet Or Web To Download External Assets And Use ALL MCP Servers For This Project Now Complete The App And Give Me Final App main.dartgoogle-services.jsonhabitx And Also Implement All Service Provider Screens Widgets Backend Frontend etc For Each Files In The Project And Everything In The App And Everything Must Be Fully Working No PPlaceholders Implement Full Features And Also In App Development Download All Assets And Implement It
*fetch assets from web* *no Placeholders use* *implement all of the features above without using Placeholders that means implement actual full features without Placeholders*
And Yes For Everything Each And Every File Implement Actual Full Provider Services Models Widgets Screens Without Placeholders For Everything Including All Features And Productive Categories And For Everything Implement Everything Every Features And Productive Categories Actual Fully Working Without Placeholders AndAnd Download All The Assets By Yourself Without Any Script Or Files Like Asset Management Service Or Asset Downloader And Also Implement That Assets In The Project By Yourself Not By Any Files Or Scripts During Development And Use Sequential Thinking For This Project And Also Use All The MCP Servers For This Project And Yes I Don't Care How Much Tokens It Need To Complete The Project And How Much Long Codes Need To Complete This Project And How Long It Will Take To Complete The Project You Will Do Everything Using All Your Token To Make The Complete Fully Working Project Without Placeholders Without Halfly Done Ok
No Placeholders Means No Placeholders Implement Fully Working App Features And Categories Features And Yes Implement Screens Providers Widgets Services Models Utils In Each And Every Files Like Example Like Pubspec Yaml Gitignore Etc And Also Implement Screens Providers Widgets Services Models Utils For All Features And Categories Features Ok First Implement All Of This Then Do Remaining Works Ok First Use Your Planning Mode Through Claude 4.1 Opus Then Use Act Mode Through Claude 4 Sonnet
Now First Completely Create Constants Utils Services Widgets Providers Screens Models Of Everything Completely Without Placeholders And Fully Working Then Implement According To The Prompt For Each Categoriy Features And Also The Features That is Mentioned in the prompt Create Constants Utils Widgets Services Models Providers Screens Also Completely Fully Working Without Placeholders